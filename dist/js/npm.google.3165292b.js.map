{"version":3,"sources":["webpack:///./node_modules/@google/model-viewer/dist/model-viewer.js"],"names":["_a","String","Math","random","slice","window","trustedTypes","createPolicy","createHTML","s","options","addEventListener","removeEventListener","_e","push","ShadyCSS","prepareTemplateDom","console","warn","JSCompiler_renameProperty","prop","_obj","defaultConverter","toAttribute","value","type","Boolean","Object","Array","JSON","stringify","fromAttribute","Number","parse","notEqual","old","defaultPropertyDeclaration","attribute","converter","reflect","hasChanged","STATE_HAS_UPDATED","STATE_UPDATE_REQUESTED","STATE_IS_REFLECTING_TO_ATTRIBUTE","STATE_IS_REFLECTING_TO_PROPERTY","finalized","UpdatingElement","initialize","this","_updateState","_updatePromise","Promise","res","_enableUpdatingResolver","_changedProperties","Map","_saveInstanceProperties","requestUpdateInternal","constructor","_classProperties","forEach","_v","p","hasOwnProperty","_instanceProperties","set","v","undefined","enableUpdating","name","_attributeToProperty","ctor","attr","_attributeNameForProperty","attrValue","_propertyValueToAttribute","removeAttribute","setAttribute","propName","_attributeToPropertyMap","get","getPropertyOptions","_propertyValueFromAttribute","oldValue","shouldRequestUpdate","_valueHasChanged","has","_reflectingProperties","_hasRequestedUpdate","_enqueueUpdate","updateComplete","result","performUpdate","_applyInstanceProperties","shouldUpdate","changedProperties","update","_markUpdated","e","firstUpdated","updated","size","k","_propertyToAttribute","_getUpdateComplete","superProperties","getPrototypeOf","_ensureClassProperties","noAccessor","prototype","key","Symbol","descriptor","getPropertyDescriptor","defineProperty","configurable","enumerable","superCtor","finalize","props","properties","propKeys","getOwnPropertyNames","getOwnPropertySymbols","createProperty","toLowerCase","attributes","HTMLElement","standardProperty","element","kind","assign","finisher","clazz","placement","initializer","call","legacyProperty","proto","property","protoOrDescriptor","ShadowRoot","nativeShadow","Document","CSSStyleSheet","HAS_WEBXR_DEVICE_API","navigator","xr","self","XRSession","isSessionSupported","HAS_WEBXR_HIT_TEST_API","requestHitTestSource","HAS_RESIZE_OBSERVER","ResizeObserver","HAS_INTERSECTION_OBSERVER","IntersectionObserver","IS_WEBXR_AR_CANDIDATE","USE_OFFSCREEN_CANVAS","userAgent","vendor","opera","check","test","substr","IS_ANDROID","IS_IOS","MSStream","platform","maxTouchPoints","IS_AR_QUICKLOOK_CANDIDATE","tempAnchor","document","createElement","relList","supports","IS_SAFARI","IS_FIREFOX","IS_OCULUS","IS_IOS_CHROME","IS_IOS_SAFARI","IS_SCENEVIEWER_CANDIDATE","CloseIcon","ControlsPrompt","ARGlyph","template","innerHTML","makeTemplate","tagName","clone","prepareTemplate","REVISION","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipmapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipmapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","KeepStencilOp","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","GLSL3","EventDispatcher","listener","_listeners","listeners","indexOf","hasEventListener","listenerArray","index","splice","dispatchEvent","event","target","array","i","l","length","_lut","toString","_canvas","_seed","MathUtils","DEG2RAD","PI","RAD2DEG","generateUUID","d0","d1","d2","d3","uuid","toUpperCase","clamp","min","max","euclideanModulo","n","m","mapLinear","x","a1","a2","b1","b2","lerp","y","t","smoothstep","smootherstep","randInt","low","high","floor","randFloat","randFloatSpread","range","seededRandom","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","ceil","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","a","b","c","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","Vector2","scalar","Error","w","addVectors","subVectors","multiplyScalar","elements","minVal","maxVal","divideScalar","round","sqrt","abs","angle","atan2","distanceToSquared","dx","dy","normalize","alpha","v1","v2","offset","getX","getY","center","Matrix3","arguments","error","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","fromArray","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","f","g","h","matrix","throwOnDegenerate","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","getInverse","transpose","r","tx","ty","sx","sy","rotation","cx","cy","theta","ImageUtils","getDataURL","image","src","HTMLCanvasElement","canvas","createElementNS","width","height","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","create","isTexture","updateMatrix","setUvTransform","copy","source","toJSON","meta","isRootObject","textures","output","metadata","generator","wrap","images","url","isArray","dispose","transformUv","uv","applyMatrix3","Vector4","z","acos","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","WebGLMultisampleRenderTarget","samples","isWebGLRenderTarget","setSize","isWebGLMultisampleRenderTarget","Quaternion","_x","_y","_z","_w","_onChangeCallback","quaternion","euler","isEuler","_order","c1","c3","s1","s3","axis","halfAngle","trace","vFrom","vTo","EPS","dot","step","angleTo","slerp","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","EPSILON","sinHalfTheta","halfTheta","ratioA","ratioB","callback","qa","qm","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","Vector3","multiplyVectors","applyQuaternion","_quaternion","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","camera","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","denominator","lengthSq","planeNormal","_vector","projectOnVector","sub","normal","dz","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","Box3","Infinity","minX","minY","minZ","maxX","maxY","maxZ","count","points","makeEmpty","il","expandByPoint","halfSize","_vector$1","add","object","expandByObject","box","isEmpty","point","vector","addScalar","updateWorldMatrix","geometry","boundingBox","computeBoundingBox","_box","union","children","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0","_v1","_v2","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","clampedPoint","getSize","_points","setFromPoints","equals","v0","extents","j","_testAxis","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","distanceTo","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","s0","sqrDist","extDet","segExtent","a01","b0","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectBox","backfaceCulling","sign","DdN","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","n14","n24","n34","n41","n42","n43","n44","scaleX","_v1$1","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","isVector3","t14","scaleXSq","scaleYSq","scaleZSq","position","scale","x2","y2","z2","wx","wy","wz","determinant","_m1","invSX","invSY","invSZ","setFromRotationMatrix","left","right","top","bottom","near","far","Euler","DefaultOrder","asin","_matrix","makeRotationFromQuaternion","newOrder","_quaternion$1","setFromQuaternion","optionalResult","RotationOrders","Layers","mask","channel","layers","_object3DId","_v1$2","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","parent","DefaultUp","onRotationChange","onQuaternionChange","_onChange","defineProperties","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","premultiply","decompose","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","multiply","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","worldToLocal","lookAt","setFromMatrixPosition","isCamera","isLight","extractRotation","inverse","remove","attach","getObjectById","id","getObjectByProperty","getObjectByName","child","getWorldPosition","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","updateMatrixWorld","force","updateParents","updateChildren","geometries","materials","shapes","serialize","library","toArray","isInstancedMesh","instanceMatrix","isMesh","isLine","isPoints","parameters","shape","material","uuids","extractFromCache","cache","values","data","recursive","_vector1","_vector2","_normalMatrix","Plane","setFromNormalAndCoplanarPoint","inverseNormalLength","negate","line","delta","start","startSign","endSign","end","intersectsPlane","optionalNormalMatrix","getNormalMatrix","referencePoint","coplanarPoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","i0","i1","i2","getNormal","setFromCoplanarPoints","getBarycoord","uv1","uv2","uv3","getUV","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","addScaledVector","d5","d6","vb","va","denom","targetLengthSq","dot00","dot01","dot02","dot11","dot12","invDenom","u","p3","_colorKeywords","_hslA","_hslB","hue2rgb","SRGBToLinear","LinearToSRGB","Color","setRGB","isColor","setHex","setStyle","hex","style","handleAlpha","string","parseFloat","exec","color","components","parseInt","setHSL","charAt","setColorName","gammaFactor","safeInverse","copyGammaToLinear","copyLinearToGamma","copySRGBToLinear","copyLinearToSRGB","getHex","hue","saturation","lightness","getHSL","color1","color2","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","fog","blending","side","flatShading","opacity","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","MeshBasicMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","morphTargets","setValues","isMaterial","onBeforeCompile","customProgramCacheKey","newValue","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","morphNormals","srcPlanes","dstPlanes","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","TypeError","usage","updateRange","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","fromBufferAttribute","setXY","setXYZ","applyNormalMatrix","setX","setY","setZ","setW","setXYZW","onUpload","DirectGeometry","vertices","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","group","faces","face","morphTargetsPosition","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","computeGroups","arrayMax","_bufferGeometryId","_m1$2","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","translate","makeTranslation","makeScale","setFromObject","positions","lineDistances","isGeometry","fromGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","isNaN","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","keys","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkIntersection","raycaster","intersect","intersectTriangle","checkBufferGeometryIntersection","morphPosition","morphInfluences","morphTargetInfluences","influence","isSkinnedMesh","boneTransform","intersection","morphTargetDictionary","ml","intersects","intersectsBox","groupMaterial","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","uvs_f","BoxBufferGeometry","depth","widthSegments","heightSegments","depthSegments","scope","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","isMatrix3","isMatrix4","isVector2","isVector4","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","Camera","PerspectiveCamera","fov","aspect","zoom","focus","view","filmGauge","filmOffset","updateProjectionMatrix","isShaderMaterial","uniform","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","enabled","offsetX","offsetY","clearViewOffset","skew","makePerspective","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentXrEnabled","currentRenderTarget","getRenderTarget","setRenderTarget","render","clear","stencil","CubeTexture","_needsFlipEnvMap","WebGLCubeRenderTarget","dummy","isInteger","DataTexture","isCubeTexture","fromEquirectangularTexture","shader","tEquirect","mesh","currentMinFilter","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","requestAnimationFrame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","buffer","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","isInterleavedBufferAttribute","deleteBuffer","delete","cached","elementSize","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmissionmap_fragment","transmissionmap_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","background","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","WebGLBackground","cubemaps","state","objects","planeMesh","boxMesh","clearColor","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","isScene","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","copyPosition","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","getParameter","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","instanceColor","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","geometryId","reset","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","init","enableLocalClipping","beginShadows","endShadows","setState","useCache","materialProperties","nGlobal","lGlobal","clippingState","WebGLCubeMaps","mapTextureMapping","cubemap","currentRenderList","getRenderList","currentRenderState","getRenderState","setRenderList","setRenderState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","sort","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","WebGLObjects","updateMap","DataTexture2DArray","wrapR","DataTexture3D","physical","transmission","transmissionMap","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","addLineNumbers","split","join","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","chunks","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","WebGLProgram","cacheKey","prefixVertex","prefixFragment","gammaFactorDefine","customExtensions","customDefines","createProgram","versionString","isRawShaderMaterial","shaderName","instancing","instancingColor","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","cachedUniforms","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getMaxBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","getParameters","shadows","environment","isMeshStandardMaterial","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","list","cameras","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","identity","isPointLight","isHemisphereLight","LTC_1","LTC_2","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","vsm_frag","vsm_vert","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","intersectsObject","kl","depthMaterial","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","pars","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","enable","disable","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","useProgram","setFlipSided","setCullFace","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendEquationSeparate","blendFuncSeparate","blendFunc","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","factor","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","uploadCubeTexture","wrappingToGL","filterToGL","setTextureParameters","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","pixelStorei","mipmap","convert","glInternalFormat","isDepthTexture","isCompressedTexture","isCompressed","cubeImage","mipmapImage","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","Group","WebXRController","_targetRay","_grip","_hand","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","onSessionEnd","disconnect","setFramebuffer","animation","isPresenting","onRequestReferenceSpace","updateInputSources","inputSources","removed","added","getController","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","then","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","getCamera","depthNear","depthFar","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","transform","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","refreshUniformsCommon","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","domElement","sortObjects","toneMappingExposure","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","message","initGLContext","preventDefault","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","isGroup","isLOD","intersectsSprite","isImmediateRenderObject","renderObjects","isArrayCamera","camera2","lightsStateVersion","programCacheKey","programChange","needsLights","materialNeedsLights","progUniforms","uniformsList","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isOrthographicCamera","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","setFromProjectionMatrix","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","__THREE_DEVTOOLS__","CustomEvent","detail","WebGL1Renderer","joints","inputState","pinching","XRHand","LITTLE_PHALANX_TIP","joint","inputPose","gripPose","handPose","targetRay","grip","hand","jointPose","getJointPose","jointRadius","indexTip","INDEX_PHALANX_TIP","thumbTip","THUMB_PHALANX_TIP","distanceToPinch","threshold","handedness","getPose","targetRaySpace","gripSpace","Scene","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_geometry","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","float32Array","transformVertex","vertexPosition","mvPosition","setFromMatrixScale","_v1$4","_v2$2","LOD","_currentLevel","levels","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","addLevel","getCurrentLevel","getObjectForDistance","bind","calculateInverses","normalizeSkinWeights","skinWeight","manhattanLength","basePosition","skinIndex","weight","getComponent","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","Bone","bone","isBone","getBoneByName","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","linecap","linejoin","setColorAt","getMatrixAt","raycastTimes","instanceId","setMatrixAt","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","Line","computeLineDistances","params","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","distanceSqToSegment","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","CompressedTexture","CanvasTexture","DepthTexture","hasVideoFrameCallback","readyState","HAVE_CURRENT_DATA","isCanvasTexture","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","faceVertexUvs2","uvsCopy","mergeMesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","diff","sortFacesByMaterialIndex","_id","materialIndexSort","newUvs1","newUvs2","uvs1","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","srcVertexNormal","destVertexNormal","Earcut","triangulate","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","prev","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node$1","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","extrudeByPath","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","reverse","hl","ahole","concat","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","bs","vert","binormals","buildLidFaces","layer","f3","buildSideFaces","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","ExtrudeGeometry","toJSON$1","ParametricBufferGeometry","func","slices","stacks","pu","pv","sliceCount","ParametricGeometry","ShapeBufferGeometry","indexOffset","shapeVertices","shapeHoles","shapeHole","toJSON$2","ShapeGeometry","toJSON$3","RawShaderMaterial","ior","Materials","freeze","__proto__","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","LinearInterpolant","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","getTrackTypeForValueTypeName","typeName","parseKeyframeTrack","json","trackType","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","offset1","offset0","weight1","weight0","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","startTime","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","slerpFlat","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","o","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","DefaultLoadingManager","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","load","loadAsync","resolve","reject","setCrossOrigin","setWithCredentials","setPath","setResourcePath","setRequestHeader","loading","FileLoader","AnimationLoader","CompressedTextureLoader","ImageLoader","CubeTextureLoader","DataTextureLoader","TextureLoader","Curve","arcLengthDivisions","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","ArcCurve","aRadius","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","t2","calc","t3","setTimeout","request","dataUriRegex","dataUriRegexResult","mimeType","isBase64","decodeURIComponent","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","header","XMLHttpRequest","open","callbacks","overrideMimeType","send","setResponseType","setMimeType","text","loaded","loadTexture","texDatas","mipmapCount","isCubemap","onImageLoad","onImageError","urls","texData","isJPEG","search","getPoint","getPointAt","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","targetArcLength","arcLengths","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","pt1","pt2","getTangentAt","segments","closed","tangents","mat","MAX_VALUE","tz","makeRotationAxis","fromJSON","isEllipseCurve","twoPi","deltaAngle","samePoints","isArcCurve","pz","CatmullRomCurve3","curveType","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","CubicBezierCurve3","LineCurve","LineCurve3","QuadraticBezierCurve","QuadraticBezierCurve3","SplineCurve","isCatmullRomCurve3","intPoint","isCubicBezierCurve","isCubicBezierCurve3","isLineCurve","isLineCurve3","isQuadraticBezierCurve","isQuadraticBezierCurve3","isSplineCurve","Curves","CurvePath","curves","autoClose","Path","currentPoint","Shape","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","SpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","DirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","lens","cacheLengths","sums","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","arc","absarc","absellipse","ellipse","firstPoint","lastPoint","getPointsHoles","holesPts","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","isSpotLightShadow","scaleW","scaleH","makeOrthographic","isDirectionalLightShadow","SphericalHarmonics3","coeff","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","TYPED_ARRAYS","arrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ImageBitmapLoader","createImageBitmap","fetch","ShapePath","subPaths","currentPath","Font","createPaths","chars","line_height","yMax","yMin","underlineThickness","paths","char","ret","createPath","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","action","ha","familyName","FontLoader","isImageBitmapLoader","setOptions","fetchOptions","credentials","blob","imageBitmap","catch","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","isFont","generateShapes","substring","font","AudioContext","webkitAudioContext","AudioLoader","HemisphereLightProbe","sky","ground","AmbientLightProbe","bufferCopy","decodeAudioData","audioBuffer","isHemisphereLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","_cache","xmin","xmax","eyeSepHalf","eyeSepOnProjection","ymax","Audio","gain","createGain","connect","getInput","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","play","delay","currentTime","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","setTargetAtTime","getFilters","setFilters","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","getValue","restoreOriginalState","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","rootNode","node","findNode","nodeName","AnimationObjectGroup","nCachedObjects_","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","firstValidIndex","bindings","unbind","root","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","startTimeScale","endTimeScale","now","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","_update","setTime","timeInSeconds","getRoot","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","GLBufferAttribute","Raycaster","PointCloud","ascSort","intersectObject","setBuffer","setType","setItemSize","setCount","setFromCamera","coords","unproject","intersectObjects","Spherical","other","setFromCartesianCoords","_vector$7","Box2","ImmediateRenderObject","_vector$9","_boneMatrix","_matrixWorldInv","SkeletonHelper","getBoneList","isSkeletonHelper","boneList","LOD_MIN","LOD_MAX","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","MAX_SAMPLES","ENCODINGS","_flatCamera","_createPlanes","_lodPlanes","_sizeLods","_sigmas","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","convertSRGBToLinear","maxComponent","fExp","log2","col","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","isFinite","sigmaPixels","weights","exp","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","shaderMaterial","_getCommonVertexShader","_getEncodings","Spline","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","initFromArray","getControlPointsArray","reparametrizeByArcLength","Handlers","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","intersectsLine","isIntersectionPlane","getArea","barycoordFromPoint","midpoint","getMidpoint","getPlane","extractAllPoints","extrude","makeGeometry","distanceToManhattan","manhattanDistanceTo","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","transparency","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","audioLoader","updateCubeMap","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","revision","DRACOLoader","decoderPath","decoderConfig","decoderBinary","decoderPending","workerLimit","workerPool","workerNextTaskID","workerSourceURL","defaultAttributeIDs","defaultAttributeTypes","setDecoderPath","setDecoderConfig","config","setWorkerLimit","setVerbosity","setSkipDequantization","taskConfig","attributeIDs","attributeTypes","useUniqueIDs","decodeGeometry","decodeDracoFile","worker","taskKey","taskCache","cachedTask","promise","byteLength","taskID","taskCost","geometryPending","_getWorker","_worker","_callbacks","postMessage","_createGeometry","_releaseTask","geometryData","_loadLibrary","preload","_initDecoder","useJS","WebAssembly","librariesPending","all","libraries","jsContent","wasmBinary","fn","DRACOWorker","body","URL","createObjectURL","Worker","_taskCosts","_taskLoad","onmessage","terminate","draco","decoder","decoderBuffer","dracoGeometry","decodingStatus","geometryType","GetEncodedGeometryType","TRIANGULAR_MESH","DecodeBufferToMesh","POINT_CLOUD","DecodeBufferToPointCloud","ok","ptr","error_msg","attributeName","attributeID","attributeType","GetAttributeByUniqueId","GetAttributeId","GetAttribute","decodeAttribute","decodeIndex","numFaces","num_faces","numIndices","_malloc","GetTrianglesUInt32Array","HEAPF32","_free","numComponents","num_components","numPoints","num_points","numValues","dataType","getDracoDataType","GetAttributeDataArrayForAllPoints","DT_FLOAT32","DT_INT8","DT_INT16","DT_INT32","DT_UINT8","DT_UINT16","DT_UINT32","onModuleLoaded","DracoDecoderModule","module","Decoder","DecoderBuffer","Init","releaseDecoderModule","getDecoderModule","_a$1","_b","_a$2","_b$1","dracoDecoderLocation","_a$3","GLTFLoader","dracoLoader","ddsLoader","ktx2Loader","pluginCallbacks","register","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFMaterialsTransmissionExtension","GLTFLightsExtension","GLTFRegistry","removeAll","_onError","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","unregister","content","plugins","magic","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","MSFT_TEXTURE_DDS","GLTFTextureDDSExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_TRANSMISSION","KHR_TEXTURE_BASISU","refs","uses","_markDefs","nodeDefs","nodes","nodeIndex","nodeLength","nodeDef","_addNodeRef","_loadLight","lightIndex","dependency","lightNode","lightDefs","lightDef","innerConeAngle","outerConeAngle","createUniqueName","createNodeAttachment","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","extendMaterialParams","clearcoatFactor","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughnessTexture","clearcoatNormalTexture","transmissionFactor","transmissionTexture","textureIndex","textureDef","loadTextureImage","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","headerView","getUint32","chunkView","chunkIndex","chunkLength","chunkType","contentArray","byteOffset","GLTFMeshStandardSGMaterial","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","glossiness","glossinessMap","_extraUniforms","uniformName","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","GLTFCubicSplineInterpolant","decodePrimitive","primitive","bufferViewIndex","bufferView","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","getDependency","extendTexture","texCoord","stride2","stride3","td","m0","m1","WEBGL_CONSTANTS","FLOAT","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","5120","5121","5122","5123","5125","5126","WEBGL_FILTERS","9728","9729","9984","9985","9986","9987","WEBGL_WRAPPINGS","33071","33648","10497","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","translation","INTERPOLATION","CUBICSPLINE","STEP","ALPHA_MODES","OPAQUE","MASK","BLEND","createDefaultMaterial","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","addMorphTargets","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","morphPositions","meshDef","targetNames","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","attributesKey","associations","primitiveCache","meshCache","cameraCache","lightCache","nodeNamesUsed","textureLoader","computeBounds","accessor","maxDisplacement","expandByVector","addPrimitiveAttributes","assignAttributeAccessor","accessorIndex","gltfAttributeName","toTrianglesDrawMode","numberOfTriangles","newIndices","newGeometry","_invokeAll","ext","getDependencies","dependencies","scenes","skinDefs","skins","meshDefs","meshes","skinLength","skin","ref","_invokeOne","loadScene","loadNode","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","uri","bufferViewDef","bufferViews","sparse","pendingBufferViews","TypedArray","elementBytes","itemBytes","byteStride","ibSlice","ibCacheKey","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","textureExtensions","webkitURL","sourceURI","isObjectURL","hasAlpha","colorType","getUint8","revokeObjectURL","samplers","sampler","mapName","mapDef","gltfReference","assignFinalMaterial","useVertexTangents","useVertexColors","useFlatShading","useMorphTargets","useMorphNormals","pointsMaterial","lineMaterial","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","alphaMode","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","originalName","loadGeometries","primitives","createDracoPrimitive","geometryPromise","meshIndex","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","input","inputAccessors","outputAccessors","inputAccessor","outputAccessor","targetName","outputArray","scaled","buildNodeHierachy","nodeId","parentObject","pendingJoints","jointNodes","jointNode","sceneIndex","sceneDef","nodeIds","$retainerCount","$recentlyUsed","$evict","$evictionThreshold","$cache","CacheEvictionPolicy","evictionThreshold","recentlyUsedIndex","retainerCount","loadWithLoader","progressCallback","fraction","preloaded","$loader","$evictionPolicy","$GLTFInstance","CachingGLTFLoader","GLTFInstance","rawGLTFLoads","progress","gltfInstanceLoads","rawGLTF","prepare","preparedGLTF","retain","originalDispose","disposed","release","_value","gltfLoads","SETTLING_TIME","DECAY_MILLISECONDS","NATURAL_FREQUENCY","NIL_SPEED","$velocity","Damper","xGoal","timeStepMilliseconds","xNormalization","deltaX","intermediateVelocity","intermediateX","newVelocity","acceleration","CSS2DObject","Element","parentNode","removeChild","cloneNode","_a$4","_b$2","CSS2DRenderer","_widthHalf","_heightHalf","viewProjectionMatrix","overflow","WebkitTransform","MozTransform","oTransform","display","objectData","distanceToCameraSquared","getDistanceToSquared","appendChild","object1","object2","filterAndFlatten","sorted","distanceA","distanceB","zMax","zIndex","numberNode","number","parseExpressions","MAX_PARSE_ITERATIONS","inputString","expressions","parseIterations","expressionParseResult","parseExpression","expression","terms","remainingInput","IS_IDENT_RE","IS_OPERATOR_RE","IS_EXPRESSION_END_RE","FUNCTION_ARGUMENTS_FIRST_TOKEN","HEX_FIRST_TOKEN","parseFunctionArguments","identParseResult","parseIdent","identNode","parseHex","parseNumber","NOT_IDENT_RE","ident","VALUE_RE","UNIT_RE","ALLOWED_UNITS","valueMatch","unitMatch","HEX_RE","hexMatch","expressionNodes","$visitedTypes","ASTWalker","visitedTypes","ast","remaining","ZERO","degreesToRadians","fallbackRadianValue","valueIsDegrees","lengthToBaseMeters","fallbackMeterValue","normalizeUnit","unitNormalizers","fallback","Hotspot","initialized","pivot","classList","updatePosition","updateNormal","facingCamera","updateVisibility","positionNodes","setComponent","normalNodes","show","assignedNodes","nodeType","Node","ELEMENT_NODE","visibilityAttribute","dataset","contains","reduceVertices","model","OFFSET","LOG_MAX_RESOLUTION","LOG_MIN_RESOLUTION","ANIMATION_SCALING","Shadow","softness","shadowMaterial","isAnimated","setModel","animationNames","maxDimension","subScalar","shadowOffset","setSoftness","setMapSize","maxMapSize","widthPad","heightPad","setScaleAndOffset","radiansY","sizeY","inverseScale","DEFAULT_FOV_DEG","DEFAULT_HALF_FOV","SAFE_RADIUS_RATIO","DEFAULT_TAN_FOV","$shadow","$cancelPendingSourceChange","$currentGLTF","normalWorld","Model","animationsByName","currentAnimationAction","modelContainer","idealCameraDistance","fieldOfViewAspect","updateFraming","$renderer","crossfadeTime","animationClip","lastAnimationAction","radiusSquared","framedRadius","horizontalFov","radiusXZ","shadowIntensity","shadowSoftness","setIntensity","setRotation","hotspot","viewerPosition","forHotspots","hide","orient","DEFAULT_TAN_FOV$1","ModelScene","isDirty","exposure","canScale","framedFieldOfView","goalTarget","targetDamperX","targetDamperY","targetDamperZ","activeCamera","onModelLoad","setSource","frameModel","vertical","setShadowIntensity","modelX","modelY","modelZ","updateTarget","goal","setShadowRotation","yaw","worldX","worldZ","hasModel","setShadowSoftness","pixelPosition","hits","hit","_mipmapMaterial","_getMipmapMaterial","_mesh$1","_flatCamera$1","_tempTarget","RoughnessMipmapper","roughnessUpdated","oldTarget","newRoughnessTarget","mip","_a$5","_b$3","_c","_d","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","_s","_t","_u","_x$1","_y$1","_z$1","_0","_1","_2","_3","_4","_5","_6","_7","_8","_9","_10","_11","_12","deserializeUrl","toFullUrl","assertIsArCandidate","missingApis","partialUrl","location","throttle","ms","timer","throttled","flush","clearTimeout","debounce","args","lowerLimit","upperLimit","CAPPED_DEVICE_PIXEL_RATIO","resolveDpr","HAS_META_VIEWPORT_TAG","metas","head","querySelectorAll","devicePixelRatio","isDebugMode","debugQueryParameterName","debugQueryParameter","ModelViewerElement","debugMode","getFirstMapKey","firstKey","_map","_error","waitForEvent","eventName","predicate","handler","RADIUS","LINE_WIDTH","MAX_OPACITY","SEGMENTS","DELTA_PHI","addCorner","cornerX","cornerY","PlacementBox","numVertices","goalOpacity","opacityDamper","hitPlane","shadowHeight","screenX","screenY","hitResult","positionAndNormalFromPoint","AR_SHADOW_INTENSITY","ROTATION_RATE","HIT_ANGLE_DEG","INTRO_DAMPER_RATE","SCALE_SNAP_HIGH","SCALE_SNAP_LOW","MIN_VIEWPORT_SCALE","ARStatus","NOT_PRESENTING","SESSION_STARTED","OBJECT_PLACED","FAILED","$presentedScene","$placementBox","$lastTick","$turntableRotation","$oldShadowIntensity","$oldBackground","$rafId","$currentSession","$tick","$refSpace","$viewerRefSpace","$frame","$initialized","$initialModelToWorld","$placementComplete","$initialHitSource","$transientHitTestSource","$inputSource","$isTranslating","$isRotating","$isScaling","$lastDragPosition","$lastScalar","$goalPosition","$goalYaw","$goalScale","$xDamper","$yDamper","$zDamper","$yawDamper","$scaleDamper","$damperRate","$resolveCleanup","$exitWebXRButtonContainer","$onWebXRFrame","$postSessionCleanup","$updateCamera","$placeInitially","$getHitPoint","$onSelectStart","$onSelectEnd","$onUpdateScene","$fingerSeparation","$processInput","$moveScene","$onExitWebXRButtonContainerClick","vector3$1","hitPosition","ARRenderer","stopPresenting","hitSource","fingers","getHitTestResultsForTransientInput","gamepad","getHit","offsetHeight","threeRenderer","requestSession","requiredFeatures","optionalFeatures","domOverlay","shadowRoot","querySelector","waitForXRAnimationFrame","_reject","$onResize","screen","framebufferWidth","framebufferHeight","exitButton","waitForAnimationFrame","setHotspotsVisibility","resolveARSession","currentSession","once","setCamera","XRRay","DOMPoint","space","offsetRay","hitTestSource","performance","cleanupPromise","setShadowScaleAndOffset","orientHotspots","requestUpdate","getBoundingClientRect","cancel","hitSourceInitial","getTarget","setTarget","cameraMatrix","pointTowards","requestViewportScale","recommendedViewportScale","hitTestResults","getHitTestResults","hitMatrix","placeModel","requestHitTestSourceForTransientInput","profile","modelToWorld","modelPosition","setPosition","world2Model","fingerOne","fingerTwo","deltaY","separation","thisDragX","finger","oldScale","newScale","updateOpacity","isFirstView","preRender","Debugger","THREE","$threeGLTF","$gltf","$gltfElementMap","$threeObjectMap","$parallelTraverseThreeScene","$correlateOriginalThreeGLTF","$correlateCloneThreeGLTF","CorrelatedSceneGraph","threeGLTF","threeObjectMap","gltfElementMap","upstreamCorrelatedSceneGraph","gltfElementReference","threeObject","elementArray","gltfElement","threeObjects","Set","cloneThreeGLTF","originalThreeGLTF","originalGLTF","cloneGLTF","cloneThreeObjectMap","cloneGLTFELementMap","cloneObject","elementReference","cloneElement","cloneObjects","sceneOne","sceneTwo","SkeletonUtils","retarget","pos","quat","bindBoneMatrix","relativeMatrix","globalMatrix","preserveMatrix","preservePosition","preserveHipPosition","useTargetMatrix","hip","names","bindBones","boneTo","bonesPosition","sourceBones","getBones","wBindMatrix","retargetClip","useFirstFramePosition","getHelperFromSkeleton","positionOffset","boneData","numFrames","convertedTracks","boneDatas","getSkeletonOffsets","targetParentPos","targetPos","sourceParentPos","sourcePos","targetDir","sourceDir","nameKeys","nameValues","boneParent","getNearestBone","boneToParent","laterialAngle","makeRotationFromEuler","renameBones","findBoneTrackData","regexp","trackData","getEqualsBonesNames","targetSkeleton","targetBones","sourceLookup","cloneLookup","parallelTraverse","sourceNode","clonedNode","clonedMesh","sourceMesh","$prepared","$prepare","$preparedGLTF","$clone","GLTFInstanceConstructor","clonedGLTF","prepared","alphaChunk","$cloneAndPatchMaterial","$correlatedSceneGraph","ModelViewerGLTFInstance","sourceUUIDToClonedMaterial","correlatedSceneGraph","oldOnBeforeCompile","meshesToDuplicate","Renderer","singleton","roughnessMipmapper","duplicateMaterials","backMaterial","duplicateMaterial","meshBack","RGBELoader","RGBE_RETURN_FAILURE","rgbe_read_error","rgbe_write_error","rgbe_format_error","rgbe_memory_error","rgbe_error","rgbe_error_code","msg","RGBE_VALID_PROGRAMTYPE","RGBE_VALID_FORMAT","RGBE_VALID_DIMENSIONS","NEWLINE","fgets","lineLimit","consume","chunkSize","chunk","RGBE_ReadHeader","magic_token_re","gamma_re","exposure_re","format_re","dimensions_re","comments","programtype","gamma","RGBE_ReadPixels_RLE","data_rgba","byteValue","scanline_buffer","ptr_end","off","isEncodedRun","rgbeStart","scanline_width","num_scanlines","RGBEByteToRGBFloat","sourceOffset","destArray","destOffset","RGBEByteToRGBHalf","floatView","int32View","toHalf","val","byteArray","rgbe_header_info","image_rgba_data","numElements","floatArray","halfArray","setDataType","onLoadCallback","EnvironmentScene","roomMaterial","boxMaterial","mainLight","room","box1","box2","box3","box4","box5","box6","light1","createAreaLightMaterial","light2","light3","light4","light5","light6","setScalar","GENERATED_SIGMA","_a$6","_b$4","HDR_FILE_RE","ldrLoader","hdrLoader","TextureUtils","generatedEnvironmentMap","skyboxCache","environmentMapCache","isHDR","addMetadata","skyboxUrl","environmentMapUrl","progressTracker","updateGenerationProgress","beginActivity","skyboxLoads","loadSkyboxFromUrl","environmentMapLoads","loadEnvironmentMapFromUrl","loadGeneratedEnvironmentMap","environmentMap","skybox","skyboxMapLoads","cubeUV","fromEquirectangular","compileEquirectangularShader","defaultScene","fromScene","allTargetsLoad","targetLoads","DURATION_DECAY","LOW_FRAME_DURATION_MS","HIGH_FRAME_DURATION_MS","MAX_AVG_CHANGE_MS","SCALE_STEP","DEFAULT_MIN_SCALE","$onWebGLContextLost","$webGLContextLostHandler","$singleton","dpr","minScale","debugger","multipleScenesVisible","avgFrameDuration","canvasElement","canvas3D","arRenderer","textureUtils","canRender","updateRendererSize","lastTick","$updateSize","widthCSS","heightCSS","addScene","removeScene","$canvas","visibleScenes","visibleInput","modelIsVisible","$userInputElement","parentElement","userInputElement","$tick$1","exposureIsNumber","updateShadow","selectCanvas","updateRendererScale","orderedScenes","$sceneIsReady","createContext","context2D","clearRect","sourceEvent","_a$7","_b$5","_a$8","_b$6","_c$1","_d$1","_e$1","_f$1","_g$1","_h$1","_j$1","_k$1","dataUrlToBlob","base64DataUrl","sliceSize","typeMatch","base64","byteCharacters","byteArrays","byteNumbers","$ongoingActivities","$announceTotalProgress","$eventDelegate","ACTIVITY_PROGRESS_WEIGHT","ProgressTracker","createDocumentFragment","activity","ongoingActivityCount","nextProgress","totalProgress","statusCount","completedActivities","compoundWeight","__decorate","decorators","desc","getOwnPropertyDescriptor","Reflect","CLEAR_MODEL_TIMEOUT_MS","FALLBACK_SIZE_UPDATE_THRESHOLD_MS","ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD","UNSIZED_MEDIA_WIDTH","UNSIZED_MEDIA_HEIGHT","blobCanvas","blobContext","$template","$fallbackResizeHandler","$defaultAriaLabel","$resizeObserver","$intersectionObserver","$clearModelTimeout","$onContextLost","$contextLostHandler","$loaded","$isElementInViewport","$announceModelVisibility","$ariaLabel","$loadedTime","$updateSource","$markLoaded","$container","$scene","$needsRender","$onModelLoad","$progressTracker","$getLoaded","$getModelIsVisible","$shouldAttemptPreload","$hasTransitioned","toVector3D","ModelViewerElementBase","alt","boundingRect","oldVisibility","newVisibility","styleElement","attachShadow","isConnected","rect","entries","entry","contentRect","isIntersecting","rootMargin","observe","registerScene","unobserve","unregisterScene","ariaLabel","encoderOptions","displayCanvas","qualityArgument","idealAspect","scaleFactor","outputWidth","outputHeight","oldHeight","oldWidth","msToBlob","toBlob","_time","_delta","sourceError","updateSourceProgress","setModelSource","is","_a$9","_b$7","_c$2","__decorate$1","MILLISECONDS_PER_SECOND","$changeAnimation","$paused","AnimationMixin","AnimationModelViewerElement","animationName","animationCrossfadeDuration","availableAnimations","hasActiveAnimation","updateAnimation","stopAnimation","playAnimation","animationTime","$annotationRenderer","$hotspotMap","$mutationCallback","$observer","$addHotspot","$removeHotspot","worldToModel","worldToModelNormal","AnnotationMixin","AnnotationModelViewerElement","mutations","mutation","MutationRecord","addedNodes","removedNodes","MutationObserver","pointerEvents","ShadyDOM","childList","observeChildren","unobserveChildren","pixelX","pixelY","updateHotspots","increment","addHotspot","decrement","removeHotspot","enumerationDeserializer","allowedNames","valueString","valueNode","__decorate$2","isWebXRBlocked","isSceneViewerBlocked","noArViewerSigil","deserializeQuickLookBrowsers","deserializeARModes","DEFAULT_AR_MODES","ARMode","QUICK_LOOK","SCENE_VIEWER","WEBXR","NONE","$arButtonContainer","$enterARWithWebXR","$openSceneViewer","$openIOSARQuickLook","$canActivateAR","$arMode","$arModes","$canLaunchQuickLook","$quickLookBrowsers","$arAnchor","$preload","$onARButtonContainerClick","$onARStatus","$onARTap","$selectARMode","ARMixin","ARModelViewerElement","ar","arScale","arModes","iosSrc","quickLookBrowsers","activateAR","presentedScene","supportsPresentation","canActivateAR","present","gltfSrc","locationUrl","modelUrl","intentParams","includes","encodeURIComponent","intent","undoHashChange","history","back","click","anchor","img","$evaluate","$lastValue","Evaluator","isConstant","basis","PercentageEvaluator","CalcEvaluator","EnvEvaluator","evaluatable","evaluated","intrinsics","keywords","auto","basisNode","autoSubstituteNode","evaluatedNode","keyword","_a$a","_b$8","_c$3","_d$2","$percentage","$basis","percentage","$identNode","envFunction","verticalScrollPosition","pageYOffset","verticalScrollMax","scrollHeight","documentElement","clientHeight","scrollY","innerHeight","IS_MULTIPLICATION_RE","$evaluator","calcFunction","secondOrderTerms","term","previousTerm","operator","leftValue","OperatorEvaluator","evaluatableFor","$operator","$left","$right","leftNode","rightNode","leftUnit","rightValue","rightUnit","$evaluatables","$intrinsics","StyleEvaluator","firstExpression","applyIntrinsics","$instances","$activateListener","$deactivateListener","$notifyInstances","$notify","$scrollCallback","ScrollObserver","instance","passive","_a$b","_b$9","$computeStyleCallback","$astWalker","$dependencies","$scrollHandler","$onScroll","StyleEffector","newDependencies","oldDependencies","environmentState","walk","functionNode","firstArgument","firstTerm","observer","relatedState","observeEffects","getIntrinsics","Function","originalUpdated","originalConnectedCallback","connectedCallback","originalDisconnectedCallback","disconnectedCallback","$styleEffector","$styleEvaluator","$updateEvaluator","$evaluateAndSync","writable","observeEffectsFor","updateHandler","DEFAULT_OPTIONS","minimumRadius","maximumRadius","minimumPolarAngle","maximumPolarAngle","minimumAzimuthalAngle","maximumAzimuthalAngle","minimumFieldOfView","maximumFieldOfView","interactionPolicy","touchAction","TOUCH_EVENT_RE","KEYBOARD_ORBIT_INCREMENT","ZOOM_SENSITIVITY","KeyCode","PAGE_UP","PAGE_DOWN","LEFT","UP","RIGHT","DOWN","ChangeSource","USER_INTERACTION","SmoothControls","sensitivity","_interactionEnabled","isUserChange","isUserPointing","spherical","goalSpherical","thetaDamper","phiDamper","radiusDamper","logFov","goalLogFov","fovDamper","pointerIsDown","lastPointerPosition","clientX","clientY","touchMode","touchDecided","onPointerMove","canInteract","touches","lastTouches","lastTouchDistance","twoTouchDistance","touchDistance","deltaZoom","userAdjustOrbit","_options","handleSinglePointerMove","cancelable","onPointerDown","handleSinglePointerDown","onPointerUp","_event","cursor","pointer","onWheel","deltaMode","onKeyDown","relevantKey","keyCode","setOrbit","setFieldOfView","jumpToGoal","nearPlane","farPlane","goalTheta","goalPhi","goalRadius","nextTheta","wrapAngle","nextPhi","nextRadius","makeSafe","deltaTheta","deltaPhi","dTheta","dThetaLimit","deltaRatio","isStationary","moveCamera","setFromSpherical","adjustOrbit","wrapped","pixelLength","touchOne","touchTwo","xOne","yOne","xTwo","yTwo","xDelta","yDelta","pixelLengthToSphericalAngle","getRootNode","activeElement","easeInOutQuad","interpolate","ease","sequence","totalWeight","reduce","ratios","ratio","timeline","initialValue","keyframes","lastValue","keyframe","frames","__decorate$3","PROMPT_ANIMATION_TIME","wiggle","fade","DEFAULT_CAMERA_ORBIT","DEFAULT_CAMERA_TARGET","DEFAULT_FIELD_OF_VIEW","MINIMUM_RADIUS_RATIO","AZIMUTHAL_QUADRANT_LABELS","POLAR_TRIENT_LABELS","DEFAULT_INTERACTION_PROMPT_THRESHOLD","INTERACTION_PROMPT","InteractionPromptStrategy","AUTO","WHEN_FOCUSED","InteractionPromptStyle","BASIC","WIGGLE","InteractionPolicy","ALWAYS_ALLOW","TouchAction","PAN_Y","PAN_X","fieldOfViewIntrinsics","$zoomAdjustedFieldOfView","minFieldOfViewIntrinsics","maxFieldOfViewIntrinsics","cameraOrbitIntrinsics","defaultTerms","minCameraOrbitIntrinsics","maxCameraOrbitIntrinsics","orbitIntrinsics","evaluator","defaultRadius","cameraTargetIntrinsics","HALF_PI","THIRD_PI","QUARTER_PI","TAU","$controls","$promptElement","$promptAnimatedContainer","$deferInteractionPrompt","$updateAria","$updateCameraForRadius","$blurHandler","$focusHandler","$changeHandler","$pointerChangeHandler","$onBlur","$onFocus","$onChange","$onPointerChange","$waitingToPromptUser","$userHasInteracted","$promptElementVisibleTime","$lastPromptOffset","$focusedTime","$lastSpherical","$jumpCamera","$initialized$1","$maintainThetaPhi","$syncCameraOrbit","$syncFieldOfView","$syncCameraTarget","$syncMinCameraOrbit","$syncMaxCameraOrbit","$syncMinFieldOfView","$syncMaxFieldOfView","ControlsMixin","ControlsModelViewerElement","cameraControls","cameraOrbit","cameraTarget","fieldOfView","minCameraOrbit","maxCameraOrbit","minFieldOfView","maxFieldOfView","interactionPromptThreshold","interactionPromptStyle","interactionPrompt","orbitSensitivity","getFieldOfView","controls","enableInteraction","disableInteraction","toggle","applyOptions","getCameraOrbit","jumpCameraToGoal","thresholdTime","updateNearFar","lastTheta","lastPhi","getCameraSpherical","lastAzimuthalQuadrant","azimuthalQuadrant","lastPolarTrient","polarTrient","azimuthalQuadrantLabel","polarTrientLabel","oldFramedFieldOfView","newFramedFieldOfView","updateAspect","__decorate$4","BASE_OPACITY","DEFAULT_SHADOW_INTENSITY","DEFAULT_SHADOW_SOFTNESS","DEFAULT_EXPOSURE","$currentEnvironmentMap","$applyEnvironmentMap","$updateEnvironment","$cancelEnvironmentUpdate","$onPreload","EnvironmentMixin","EnvironmentModelViewerElement","environmentImage","skyboxImage","texturesLoad","generateEnvironmentMapAndSkybox","INITIAL_STATUS_ANNOUNCEMENT","FINISHED_LOADING_ANNOUNCEMENT","UPDATE_STATUS_DEBOUNCE_MS","$modelViewerStatusInstance","$updateStatus","LoadingStatusAnnouncer","registeredInstanceStatuses","loadingPromises","statusElement","statusUpdateInProgress","updateStatus","modelViewer","onUnregistered","loadShouldBeMeasured","loadAttemptCompletes","resolveHandler","modelViewerStatusInstance","statuses","instanceStatus","textContent","currentInstance","_a$c","_b$a","_c$4","_a$d","__decorate$5","PROGRESS_BAR_UPDATE_THRESHOLD","PROGRESS_MASK_BASE_OPACITY","DEFAULT_DRACO_DECODER_LOCATION","SPACE_KEY","ENTER_KEY","RevealStrategy","INTERACTION","MANUAL","LoadingStrategy","LAZY","EAGER","PosterDismissalSource","loadingStatusAnnouncer","$defaultProgressBarElement","$defaultProgressMaskElement","$posterContainerElement","$defaultPosterElement","$posterDismissalSource","$showPoster","$hidePoster","$modelIsRevealed","$updateProgressBar","$lastReportedProgress","$transitioned","$ariaLabelCallToAction","$clickHandler","$keydownHandler","$progressHandler","$onClick","$onKeydown","$onProgress","LoadingMixin","LoadingModelViewerElement","poster","reveal","setDRACODecoderLocation","registerInstance","unregisterInstance","backgroundImage","dismissPoster","posterContainerElement","defaultPosterElement","tabIndex","currentGLTF","getDRACODecoderLocation","ThreeDOMMessageType","HANDSHAKE","IMPORT_SCRIPT","MODEL_CHANGE","MUTATION_RESULT","CONTEXT_INITIALIZED","MUTATE","$ownerModel","ThreeDOMElement","kernel","$kernel","$uri","$name","Image","serialized","mutate","$pbrMetallicRoughness","$normalTexture","$occlusionTexture","$emissiveTexture","$kernel$1","$name$1","Material$1","deserialize","_a$e","_b$b","$materials","$kernel$2","Model$1","getElementsByType","_a$f","_b$c","$kernel$3","$baseColorFactor","$baseColorTexture","$metallicRoughnessTexture","$metallicFactor","$roughnessFactor","PBRMetallicRoughness","_a$g","$kernel$4","$minFilter","$magFilter","$wrapS","$wrapT","$name$2","Sampler","_a$h","_b$d","$kernel$5","$texture","TextureInfo","_a$i","_b$e","_c$5","_d$3","_e$2","_f$2","$kernel$6","$source","$sampler","$name$3","Texture$1","_a$j","ThreeDOMElementMap","$onMessageEvent","$port","$model","$elementsByLocalId","$localIdsByElement","$elementsByType","$pendingMutations","$nextMutationId","ModelKernel","port","applied","mutationId","pendingMutation","types","ElementConstructor","close","$modelGraft","$port$1","$onMessageEvent$1","ModelGraftManipulator","modelGraft","_a$k","_a$l","getLocallyUniqueId","$callbacks","$visitMesh","$visitElement","$visitNode","$visitScene","$visitMaterial","GLTFTreeVisitor","allScenes","visited","elementList","visit","childNodeIndex","$correlatedObjects","$sourceObject","$graft","$id","ThreeDOMElement$1","graft","correlatedObjects","adopt","_property","$threeTextures","$bufferViewImages","Image$1","correlatedTextures","sourceObject","_a$m","_b$f","_a$n","isMinFilter","minFilterValues","isMagFilter","magFilterValues","isWrapMode","wrapModes","isValidSamplerValue","defaultValues","$threeTextures$1","Sampler$1","$source$1","$sampler$1","Texture$2","glTF","samplerIndex","imageIndex","_a$o","_b$g","$texture$1","TextureInfo$1","textureInfo","_a$p","_b$h","_c$6","_d$4","_a$q","_b$i","$threeMaterials","$baseColorTexture$1","$metallicRoughnessTexture$1","PBRMetallicRoughness$1","correlatedMaterials","baseColorTextures","metallicRoughnessTextures","$pbrMetallicRoughness$1","$normalTexture$1","$occlusionTexture$1","$emissiveTexture$1","Material$2","normalTextures","occlusionTextures","emissiveTextures","_a$r","_b$j","$modelUri","$materials$1","Model$2","modelUri","visitor","$model$1","$correlatedSceneGraph$1","$elementsByInternalId","$eventDelegate$1","ModelGraft","internalID","getElementByInternalId","UNSIGNED_INT","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","NEAREST","NEAREST_MIPMAP_NEAREST","LINEAR_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_LINEAR","CLAMP_TO_EDGE","MIRRORED_REPEAT","THREE_TO_WEBGL","GLTFExporter","onDone","binary","trs","onlyVisible","truncateDrawRange","embedImages","forcePowerOfTwoTextures","includeCustomExtensions","cachedCanvas","outputJSON","nodeMap","cachedData","attributesNormalized","uids","uid","getUID","equalArray","array1","every","stringToArrayBuffer","TextEncoder","encode","getMinMax","POSITIVE_INFINITY","NEGATIVE_INFINITY","isNormalizedNormalAttribute","createNormalizedNormalAttribute","getPaddedBufferSize","bufferSize","getPaddedArrayBuffer","paddingByte","paddedLength","serializeUserData","gltfProperty","applyTextureTransform","didTransform","transformDef","processBuffer","processBufferView","componentSize","dataView","setFloat32","setUint32","setUint16","setUint8","gltfBufferView","processBufferViewImage","reader","FileReader","readAsArrayBuffer","onloadend","processAccessor","3","4","16","end2","bufferViewTarget","minMax","gltfAccessor","processImage","cachedImages","gltfImage","ctx","processSampler","gltfSampler","processTexture","gltfTexture","processMaterial","gltfMaterial","KHR_materials_unlit","KHR_materials_pbrSpecularGlossiness","metalRoughMapDef","baseColorMapDef","specularMapDef","emissiveMapDef","normalMapDef","occlusionMapDef","processMesh","meshCacheKeyParts","meshCacheKey","gltfMesh","nameConversion","originalNormal","modifiedAttribute","validVertexAttributes","reverseDictionary","warned","baseAttribute","relativeAttribute","processCamera","isOrtho","gltfCamera","orthographic","perspective","processAnimation","Utils","mergeMorphTargetTracks","trackBinding","trackNode","trackProperty","inputItemSize","outputItemSize","processSkin","rootJoint","processLight","processNode","gltfNode","processScene","gltfScene","processObjects","processInput","objectsWithoutScene","extensionsUsedList","GLB_HEADER_BYTES","GLB_HEADER_MAGIC","GLB_VERSION","GLB_CHUNK_PREFIX_BYTES","GLB_CHUNK_TYPE_JSON","GLB_CHUNK_TYPE_BIN","binaryChunk","binaryChunkPrefix","jsonChunk","jsonChunkPrefix","totalByteLength","glbBlob","glbReader","readAsDataURL","base64data","insertKeyframe","tolerance","mergedTracks","sourceTracks","sourceTrack","sourceTrackBinding","sourceTrackNode","mergedTrack","targetCount","sourceInterpolant","keyframeIndex","__decorate$6","$updateThreeSide","$currentGLTF$1","$modelGraft$1","$mainPort","$threePort","$manipulator","$modelKernel","$onModelChange","$onModelGraftMutation","SceneGraphMixin","SceneGraphModelViewerElement","currentKernel","deactivate","MessageChannel","port1","port2","oldModelGraft","manipulator","currentModelGraft","currentManipulator","opts","exporter","__decorate$7","DEFAULT_ROTATION_SPEED","AUTO_ROTATE_DELAY_DEFAULT","rotationRateIntrinsics","$autoRotateStartTime","$radiansPerSecond","$syncRotationRate","$cameraChangeHandler","$onCameraChange","StagingMixin","StagingModelViewerElement","autoRotate","autoRotateDelay","rotationPerSecond","rotationDelta","turntableRotation","FocusVisiblePolyfillMixin","SuperClass","coordinateWithPolyfill","hasAttribute","applyFocusVisiblePolyfill","coordinationHandler","$endPolyfillCoordination","FocusVisibleCoordinator","customElements","define"],"mappings":"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","file":"js/npm.google.3165292b.js","sourcesContent":["/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * An expression marker with embedded unique key to avoid collision with\n * possible text in templates.\n */\nconst marker = `{{lit-${String(Math.random()).slice(2)}}}`;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n/**\n * Our TrustedTypePolicy for HTML which is declared using the html template\n * tag function.\n *\n * That HTML is a developer-authored constant, and is parsed with innerHTML\n * before any untrusted expressions have been mixed in. Therefor it is\n * considered safe by construction.\n */\nconst policy = window.trustedTypes &&\n    trustedTypes.createPolicy('lit-html', { createHTML: (s) => s });\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// Detect event listener options support. If the `capture` property is read\n// from the options object, then options are supported. If not, then the third\n// argument to add/removeEventListener is interpreted as the boolean capture\n// value so we should only pass the `capture` property.\nlet eventOptionsSupported = false;\n// Wrap into an IIFE because MS Edge <= v41 does not support having try/catch\n// blocks right into the body of a module\n(() => {\n    try {\n        const options = {\n            get capture() {\n                eventOptionsSupported = true;\n                return false;\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.addEventListener('test', options, options);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        window.removeEventListener('test', options, options);\n    }\n    catch (_e) {\n        // event options not supported\n    }\n})();\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for lit-html usage.\n// TODO(justinfagnani): inject version number at build time\nif (typeof window !== 'undefined') {\n    (window['litHtmlVersions'] || (window['litHtmlVersions'] = [])).push('1.3.0');\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nif (typeof window.ShadyCSS === 'undefined') ;\nelse if (typeof window.ShadyCSS.prepareTemplateDom === 'undefined') {\n    console.warn(`Incompatible ShadyCSS version detected. ` +\n        `Please update to at least @webcomponents/webcomponentsjs@2.0.2 and ` +\n        `@webcomponents/shadycss@1.3.1.`);\n}\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nvar _a;\n/**\n * Use this module if you want to create your own base class extending\n * [[UpdatingElement]].\n * @packageDocumentation\n */\n/*\n * When using Closure Compiler, JSCompiler_renameProperty(property, object) is\n * replaced at compile time by the munged name for object[property]. We cannot\n * alias this function, so we have to use a small shim that has the same\n * behavior when not compiling.\n */\nwindow.JSCompiler_renameProperty =\n    (prop, _obj) => prop;\nconst defaultConverter = {\n    toAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value ? '' : null;\n            case Object:\n            case Array:\n                // if the value is `null` or `undefined` pass this through\n                // to allow removing/no change behavior.\n                return value == null ? value : JSON.stringify(value);\n        }\n        return value;\n    },\n    fromAttribute(value, type) {\n        switch (type) {\n            case Boolean:\n                return value !== null;\n            case Number:\n                return value === null ? null : Number(value);\n            case Object:\n            case Array:\n                return JSON.parse(value);\n        }\n        return value;\n    }\n};\n/**\n * Change function that returns true if `value` is different from `oldValue`.\n * This method is used as the default for a property's `hasChanged` function.\n */\nconst notEqual = (value, old) => {\n    // This ensures (old==NaN, value==NaN) always returns false\n    return old !== value && (old === old || value === value);\n};\nconst defaultPropertyDeclaration = {\n    attribute: true,\n    type: String,\n    converter: defaultConverter,\n    reflect: false,\n    hasChanged: notEqual\n};\nconst STATE_HAS_UPDATED = 1;\nconst STATE_UPDATE_REQUESTED = 1 << 2;\nconst STATE_IS_REFLECTING_TO_ATTRIBUTE = 1 << 3;\nconst STATE_IS_REFLECTING_TO_PROPERTY = 1 << 4;\n/**\n * The Closure JS Compiler doesn't currently have good support for static\n * property semantics where \"this\" is dynamic (e.g.\n * https://github.com/google/closure-compiler/issues/3177 and others) so we use\n * this hack to bypass any rewriting by the compiler.\n */\nconst finalized = 'finalized';\n/**\n * Base element class which manages element properties and attributes. When\n * properties change, the `update` method is asynchronously called. This method\n * should be supplied by subclassers to render updates as desired.\n * @noInheritDoc\n */\nclass UpdatingElement extends HTMLElement {\n    constructor() {\n        super();\n        this.initialize();\n    }\n    /**\n     * Returns a list of attributes corresponding to the registered properties.\n     * @nocollapse\n     */\n    static get observedAttributes() {\n        // note: piggy backing on this to ensure we're finalized.\n        this.finalize();\n        const attributes = [];\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this._classProperties.forEach((v, p) => {\n            const attr = this._attributeNameForProperty(p, v);\n            if (attr !== undefined) {\n                this._attributeToPropertyMap.set(attr, p);\n                attributes.push(attr);\n            }\n        });\n        return attributes;\n    }\n    /**\n     * Ensures the private `_classProperties` property metadata is created.\n     * In addition to `finalize` this is also called in `createProperty` to\n     * ensure the `@property` decorator can add property metadata.\n     */\n    /** @nocollapse */\n    static _ensureClassProperties() {\n        // ensure private storage for property declarations.\n        if (!this.hasOwnProperty(JSCompiler_renameProperty('_classProperties', this))) {\n            this._classProperties = new Map();\n            // NOTE: Workaround IE11 not supporting Map constructor argument.\n            const superProperties = Object.getPrototypeOf(this)._classProperties;\n            if (superProperties !== undefined) {\n                superProperties.forEach((v, k) => this._classProperties.set(k, v));\n            }\n        }\n    }\n    /**\n     * Creates a property accessor on the element prototype if one does not exist\n     * and stores a PropertyDeclaration for the property with the given options.\n     * The property setter calls the property's `hasChanged` property option\n     * or uses a strict identity check to determine whether or not to request\n     * an update.\n     *\n     * This method may be overridden to customize properties; however,\n     * when doing so, it's important to call `super.createProperty` to ensure\n     * the property is setup correctly. This method calls\n     * `getPropertyDescriptor` internally to get a descriptor to install.\n     * To customize what properties do when they are get or set, override\n     * `getPropertyDescriptor`. To customize the options for a property,\n     * implement `createProperty` like this:\n     *\n     * static createProperty(name, options) {\n     *   options = Object.assign(options, {myOption: true});\n     *   super.createProperty(name, options);\n     * }\n     *\n     * @nocollapse\n     */\n    static createProperty(name, options = defaultPropertyDeclaration) {\n        // Note, since this can be called by the `@property` decorator which\n        // is called before `finalize`, we ensure storage exists for property\n        // metadata.\n        this._ensureClassProperties();\n        this._classProperties.set(name, options);\n        // Do not generate an accessor if the prototype already has one, since\n        // it would be lost otherwise and that would never be the user's intention;\n        // Instead, we expect users to call `requestUpdate` themselves from\n        // user-defined accessors. Note that if the super has an accessor we will\n        // still overwrite it\n        if (options.noAccessor || this.prototype.hasOwnProperty(name)) {\n            return;\n        }\n        const key = typeof name === 'symbol' ? Symbol() : `__${name}`;\n        const descriptor = this.getPropertyDescriptor(name, key, options);\n        if (descriptor !== undefined) {\n            Object.defineProperty(this.prototype, name, descriptor);\n        }\n    }\n    /**\n     * Returns a property descriptor to be defined on the given named property.\n     * If no descriptor is returned, the property will not become an accessor.\n     * For example,\n     *\n     *   class MyElement extends LitElement {\n     *     static getPropertyDescriptor(name, key, options) {\n     *       const defaultDescriptor =\n     *           super.getPropertyDescriptor(name, key, options);\n     *       const setter = defaultDescriptor.set;\n     *       return {\n     *         get: defaultDescriptor.get,\n     *         set(value) {\n     *           setter.call(this, value);\n     *           // custom action.\n     *         },\n     *         configurable: true,\n     *         enumerable: true\n     *       }\n     *     }\n     *   }\n     *\n     * @nocollapse\n     */\n    static getPropertyDescriptor(name, key, options) {\n        return {\n            // tslint:disable-next-line:no-any no symbol in index\n            get() {\n                return this[key];\n            },\n            set(value) {\n                const oldValue = this[name];\n                this[key] = value;\n                this\n                    .requestUpdateInternal(name, oldValue, options);\n            },\n            configurable: true,\n            enumerable: true\n        };\n    }\n    /**\n     * Returns the property options associated with the given property.\n     * These options are defined with a PropertyDeclaration via the `properties`\n     * object or the `@property` decorator and are registered in\n     * `createProperty(...)`.\n     *\n     * Note, this method should be considered \"final\" and not overridden. To\n     * customize the options for a given property, override `createProperty`.\n     *\n     * @nocollapse\n     * @final\n     */\n    static getPropertyOptions(name) {\n        return this._classProperties && this._classProperties.get(name) ||\n            defaultPropertyDeclaration;\n    }\n    /**\n     * Creates property accessors for registered properties and ensures\n     * any superclasses are also finalized.\n     * @nocollapse\n     */\n    static finalize() {\n        // finalize any superclasses\n        const superCtor = Object.getPrototypeOf(this);\n        if (!superCtor.hasOwnProperty(finalized)) {\n            superCtor.finalize();\n        }\n        this[finalized] = true;\n        this._ensureClassProperties();\n        // initialize Map populated in observedAttributes\n        this._attributeToPropertyMap = new Map();\n        // make any properties\n        // Note, only process \"own\" properties since this element will inherit\n        // any properties defined on the superClass, and finalization ensures\n        // the entire prototype chain is finalized.\n        if (this.hasOwnProperty(JSCompiler_renameProperty('properties', this))) {\n            const props = this.properties;\n            // support symbols in properties (IE11 does not support this)\n            const propKeys = [\n                ...Object.getOwnPropertyNames(props),\n                ...(typeof Object.getOwnPropertySymbols === 'function') ?\n                    Object.getOwnPropertySymbols(props) :\n                    []\n            ];\n            // This for/of is ok because propKeys is an array\n            for (const p of propKeys) {\n                // note, use of `any` is due to TypeSript lack of support for symbol in\n                // index types\n                // tslint:disable-next-line:no-any no symbol in index\n                this.createProperty(p, props[p]);\n            }\n        }\n    }\n    /**\n     * Returns the property name for the given attribute `name`.\n     * @nocollapse\n     */\n    static _attributeNameForProperty(name, options) {\n        const attribute = options.attribute;\n        return attribute === false ?\n            undefined :\n            (typeof attribute === 'string' ?\n                attribute :\n                (typeof name === 'string' ? name.toLowerCase() : undefined));\n    }\n    /**\n     * Returns true if a property should request an update.\n     * Called when a property value is set and uses the `hasChanged`\n     * option for the property if present or a strict identity check.\n     * @nocollapse\n     */\n    static _valueHasChanged(value, old, hasChanged = notEqual) {\n        return hasChanged(value, old);\n    }\n    /**\n     * Returns the property value for the given attribute value.\n     * Called via the `attributeChangedCallback` and uses the property's\n     * `converter` or `converter.fromAttribute` property option.\n     * @nocollapse\n     */\n    static _propertyValueFromAttribute(value, options) {\n        const type = options.type;\n        const converter = options.converter || defaultConverter;\n        const fromAttribute = (typeof converter === 'function' ? converter : converter.fromAttribute);\n        return fromAttribute ? fromAttribute(value, type) : value;\n    }\n    /**\n     * Returns the attribute value for the given property value. If this\n     * returns undefined, the property will *not* be reflected to an attribute.\n     * If this returns null, the attribute will be removed, otherwise the\n     * attribute will be set to the value.\n     * This uses the property's `reflect` and `type.toAttribute` property options.\n     * @nocollapse\n     */\n    static _propertyValueToAttribute(value, options) {\n        if (options.reflect === undefined) {\n            return;\n        }\n        const type = options.type;\n        const converter = options.converter;\n        const toAttribute = converter && converter.toAttribute ||\n            defaultConverter.toAttribute;\n        return toAttribute(value, type);\n    }\n    /**\n     * Performs element initialization. By default captures any pre-set values for\n     * registered properties.\n     */\n    initialize() {\n        this._updateState = 0;\n        this._updatePromise =\n            new Promise((res) => this._enableUpdatingResolver = res);\n        this._changedProperties = new Map();\n        this._saveInstanceProperties();\n        // ensures first update will be caught by an early access of\n        // `updateComplete`\n        this.requestUpdateInternal();\n    }\n    /**\n     * Fixes any properties set on the instance before upgrade time.\n     * Otherwise these would shadow the accessor and break these properties.\n     * The properties are stored in a Map which is played back after the\n     * constructor runs. Note, on very old versions of Safari (<=9) or Chrome\n     * (<=41), properties created for native platform properties like (`id` or\n     * `name`) may not have default values set in the element constructor. On\n     * these browsers native properties appear on instances and therefore their\n     * default value will overwrite any element default (e.g. if the element sets\n     * this.id = 'id' in the constructor, the 'id' will become '' since this is\n     * the native platform default).\n     */\n    _saveInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        this.constructor\n            ._classProperties.forEach((_v, p) => {\n            if (this.hasOwnProperty(p)) {\n                const value = this[p];\n                delete this[p];\n                if (!this._instanceProperties) {\n                    this._instanceProperties = new Map();\n                }\n                this._instanceProperties.set(p, value);\n            }\n        });\n    }\n    /**\n     * Applies previously saved instance properties.\n     */\n    _applyInstanceProperties() {\n        // Use forEach so this works even if for/of loops are compiled to for loops\n        // expecting arrays\n        // tslint:disable-next-line:no-any\n        this._instanceProperties.forEach((v, p) => this[p] = v);\n        this._instanceProperties = undefined;\n    }\n    connectedCallback() {\n        // Ensure first connection completes an update. Updates cannot complete\n        // before connection.\n        this.enableUpdating();\n    }\n    enableUpdating() {\n        if (this._enableUpdatingResolver !== undefined) {\n            this._enableUpdatingResolver();\n            this._enableUpdatingResolver = undefined;\n        }\n    }\n    /**\n     * Allows for `super.disconnectedCallback()` in extensions while\n     * reserving the possibility of making non-breaking feature additions\n     * when disconnecting at some point in the future.\n     */\n    disconnectedCallback() {\n    }\n    /**\n     * Synchronizes property values when attributes change.\n     */\n    attributeChangedCallback(name, old, value) {\n        if (old !== value) {\n            this._attributeToProperty(name, value);\n        }\n    }\n    _propertyToAttribute(name, value, options = defaultPropertyDeclaration) {\n        const ctor = this.constructor;\n        const attr = ctor._attributeNameForProperty(name, options);\n        if (attr !== undefined) {\n            const attrValue = ctor._propertyValueToAttribute(value, options);\n            // an undefined value does not change the attribute.\n            if (attrValue === undefined) {\n                return;\n            }\n            // Track if the property is being reflected to avoid\n            // setting the property again via `attributeChangedCallback`. Note:\n            // 1. this takes advantage of the fact that the callback is synchronous.\n            // 2. will behave incorrectly if multiple attributes are in the reaction\n            // stack at time of calling. However, since we process attributes\n            // in `update` this should not be possible (or an extreme corner case\n            // that we'd like to discover).\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_ATTRIBUTE;\n            if (attrValue == null) {\n                this.removeAttribute(attr);\n            }\n            else {\n                this.setAttribute(attr, attrValue);\n            }\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_ATTRIBUTE;\n        }\n    }\n    _attributeToProperty(name, value) {\n        // Use tracking info to avoid deserializing attribute value if it was\n        // just set from a property setter.\n        if (this._updateState & STATE_IS_REFLECTING_TO_ATTRIBUTE) {\n            return;\n        }\n        const ctor = this.constructor;\n        // Note, hint this as an `AttributeMap` so closure clearly understands\n        // the type; it has issues with tracking types through statics\n        // tslint:disable-next-line:no-unnecessary-type-assertion\n        const propName = ctor._attributeToPropertyMap.get(name);\n        if (propName !== undefined) {\n            const options = ctor.getPropertyOptions(propName);\n            // mark state reflecting\n            this._updateState = this._updateState | STATE_IS_REFLECTING_TO_PROPERTY;\n            this[propName] =\n                // tslint:disable-next-line:no-any\n                ctor._propertyValueFromAttribute(value, options);\n            // mark state not reflecting\n            this._updateState = this._updateState & ~STATE_IS_REFLECTING_TO_PROPERTY;\n        }\n    }\n    /**\n     * This protected version of `requestUpdate` does not access or return the\n     * `updateComplete` promise. This promise can be overridden and is therefore\n     * not free to access.\n     */\n    requestUpdateInternal(name, oldValue, options) {\n        let shouldRequestUpdate = true;\n        // If we have a property key, perform property update steps.\n        if (name !== undefined) {\n            const ctor = this.constructor;\n            options = options || ctor.getPropertyOptions(name);\n            if (ctor._valueHasChanged(this[name], oldValue, options.hasChanged)) {\n                if (!this._changedProperties.has(name)) {\n                    this._changedProperties.set(name, oldValue);\n                }\n                // Add to reflecting properties set.\n                // Note, it's important that every change has a chance to add the\n                // property to `_reflectingProperties`. This ensures setting\n                // attribute + property reflects correctly.\n                if (options.reflect === true &&\n                    !(this._updateState & STATE_IS_REFLECTING_TO_PROPERTY)) {\n                    if (this._reflectingProperties === undefined) {\n                        this._reflectingProperties = new Map();\n                    }\n                    this._reflectingProperties.set(name, options);\n                }\n            }\n            else {\n                // Abort the request if the property should not be considered changed.\n                shouldRequestUpdate = false;\n            }\n        }\n        if (!this._hasRequestedUpdate && shouldRequestUpdate) {\n            this._updatePromise = this._enqueueUpdate();\n        }\n    }\n    /**\n     * Requests an update which is processed asynchronously. This should\n     * be called when an element should update based on some state not triggered\n     * by setting a property. In this case, pass no arguments. It should also be\n     * called when manually implementing a property setter. In this case, pass the\n     * property `name` and `oldValue` to ensure that any configured property\n     * options are honored. Returns the `updateComplete` Promise which is resolved\n     * when the update completes.\n     *\n     * @param name {PropertyKey} (optional) name of requesting property\n     * @param oldValue {any} (optional) old value of requesting property\n     * @returns {Promise} A Promise that is resolved when the update completes.\n     */\n    requestUpdate(name, oldValue) {\n        this.requestUpdateInternal(name, oldValue);\n        return this.updateComplete;\n    }\n    /**\n     * Sets up the element to asynchronously update.\n     */\n    async _enqueueUpdate() {\n        this._updateState = this._updateState | STATE_UPDATE_REQUESTED;\n        try {\n            // Ensure any previous update has resolved before updating.\n            // This `await` also ensures that property changes are batched.\n            await this._updatePromise;\n        }\n        catch (e) {\n            // Ignore any previous errors. We only care that the previous cycle is\n            // done. Any error should have been handled in the previous update.\n        }\n        const result = this.performUpdate();\n        // If `performUpdate` returns a Promise, we await it. This is done to\n        // enable coordinating updates with a scheduler. Note, the result is\n        // checked to avoid delaying an additional microtask unless we need to.\n        if (result != null) {\n            await result;\n        }\n        return !this._hasRequestedUpdate;\n    }\n    get _hasRequestedUpdate() {\n        return (this._updateState & STATE_UPDATE_REQUESTED);\n    }\n    get hasUpdated() {\n        return (this._updateState & STATE_HAS_UPDATED);\n    }\n    /**\n     * Performs an element update. Note, if an exception is thrown during the\n     * update, `firstUpdated` and `updated` will not be called.\n     *\n     * You can override this method to change the timing of updates. If this\n     * method is overridden, `super.performUpdate()` must be called.\n     *\n     * For instance, to schedule updates to occur just before the next frame:\n     *\n     * ```\n     * protected async performUpdate(): Promise<unknown> {\n     *   await new Promise((resolve) => requestAnimationFrame(() => resolve()));\n     *   super.performUpdate();\n     * }\n     * ```\n     */\n    performUpdate() {\n        // Abort any update if one is not pending when this is called.\n        // This can happen if `performUpdate` is called early to \"flush\"\n        // the update.\n        if (!this._hasRequestedUpdate) {\n            return;\n        }\n        // Mixin instance properties once, if they exist.\n        if (this._instanceProperties) {\n            this._applyInstanceProperties();\n        }\n        let shouldUpdate = false;\n        const changedProperties = this._changedProperties;\n        try {\n            shouldUpdate = this.shouldUpdate(changedProperties);\n            if (shouldUpdate) {\n                this.update(changedProperties);\n            }\n            else {\n                this._markUpdated();\n            }\n        }\n        catch (e) {\n            // Prevent `firstUpdated` and `updated` from running when there's an\n            // update exception.\n            shouldUpdate = false;\n            // Ensure element can accept additional updates after an exception.\n            this._markUpdated();\n            throw e;\n        }\n        if (shouldUpdate) {\n            if (!(this._updateState & STATE_HAS_UPDATED)) {\n                this._updateState = this._updateState | STATE_HAS_UPDATED;\n                this.firstUpdated(changedProperties);\n            }\n            this.updated(changedProperties);\n        }\n    }\n    _markUpdated() {\n        this._changedProperties = new Map();\n        this._updateState = this._updateState & ~STATE_UPDATE_REQUESTED;\n    }\n    /**\n     * Returns a Promise that resolves when the element has completed updating.\n     * The Promise value is a boolean that is `true` if the element completed the\n     * update without triggering another update. The Promise result is `false` if\n     * a property was set inside `updated()`. If the Promise is rejected, an\n     * exception was thrown during the update.\n     *\n     * To await additional asynchronous work, override the `_getUpdateComplete`\n     * method. For example, it is sometimes useful to await a rendered element\n     * before fulfilling this Promise. To do this, first await\n     * `super._getUpdateComplete()`, then any subsequent state.\n     *\n     * @returns {Promise} The Promise returns a boolean that indicates if the\n     * update resolved without triggering another update.\n     */\n    get updateComplete() {\n        return this._getUpdateComplete();\n    }\n    /**\n     * Override point for the `updateComplete` promise.\n     *\n     * It is not safe to override the `updateComplete` getter directly due to a\n     * limitation in TypeScript which means it is not possible to call a\n     * superclass getter (e.g. `super.updateComplete.then(...)`) when the target\n     * language is ES5 (https://github.com/microsoft/TypeScript/issues/338).\n     * This method should be overridden instead. For example:\n     *\n     *   class MyElement extends LitElement {\n     *     async _getUpdateComplete() {\n     *       await super._getUpdateComplete();\n     *       await this._myChild.updateComplete;\n     *     }\n     *   }\n     */\n    _getUpdateComplete() {\n        return this._updatePromise;\n    }\n    /**\n     * Controls whether or not `update` should be called when the element requests\n     * an update. By default, this method always returns `true`, but this can be\n     * customized to control when to update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    shouldUpdate(_changedProperties) {\n        return true;\n    }\n    /**\n     * Updates the element. This method reflects property values to attributes.\n     * It can be overridden to render and keep updated element DOM.\n     * Setting properties inside this method will *not* trigger\n     * another update.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    update(_changedProperties) {\n        if (this._reflectingProperties !== undefined &&\n            this._reflectingProperties.size > 0) {\n            // Use forEach so this works even if for/of loops are compiled to for\n            // loops expecting arrays\n            this._reflectingProperties.forEach((v, k) => this._propertyToAttribute(k, this[k], v));\n            this._reflectingProperties = undefined;\n        }\n        this._markUpdated();\n    }\n    /**\n     * Invoked whenever the element is updated. Implement to perform\n     * post-updating tasks via DOM APIs, for example, focusing an element.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    updated(_changedProperties) {\n    }\n    /**\n     * Invoked when the element is first updated. Implement to perform one time\n     * work on the element after update.\n     *\n     * Setting properties inside this method will trigger the element to update\n     * again after this update cycle completes.\n     *\n     * @param _changedProperties Map of changed properties with old values\n     */\n    firstUpdated(_changedProperties) {\n    }\n}\n_a = finalized;\n/**\n * Marks class as having finished creating properties.\n */\nUpdatingElement[_a] = true;\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\nconst standardProperty = (options, element) => {\n    // When decorating an accessor, pass it through and add property metadata.\n    // Note, the `hasOwnProperty` check in `createProperty` ensures we don't\n    // stomp over the user's accessor.\n    if (element.kind === 'method' && element.descriptor &&\n        !('value' in element.descriptor)) {\n        return Object.assign(Object.assign({}, element), { finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            } });\n    }\n    else {\n        // createProperty() takes care of defining the property, but we still\n        // must return some kind of descriptor, so return a descriptor for an\n        // unused prototype field. The finisher calls createProperty().\n        return {\n            kind: 'field',\n            key: Symbol(),\n            placement: 'own',\n            descriptor: {},\n            // When @babel/plugin-proposal-decorators implements initializers,\n            // do this instead of the initializer below. See:\n            // https://github.com/babel/babel/issues/9260 extras: [\n            //   {\n            //     kind: 'initializer',\n            //     placement: 'own',\n            //     initializer: descriptor.initializer,\n            //   }\n            // ],\n            initializer() {\n                if (typeof element.initializer === 'function') {\n                    this[element.key] = element.initializer.call(this);\n                }\n            },\n            finisher(clazz) {\n                clazz.createProperty(element.key, options);\n            }\n        };\n    }\n};\nconst legacyProperty = (options, proto, name) => {\n    proto.constructor\n        .createProperty(name, options);\n};\n/**\n * A property decorator which creates a LitElement property which reflects a\n * corresponding attribute value. A [[`PropertyDeclaration`]] may optionally be\n * supplied to configure property features.\n *\n * This decorator should only be used for public fields. Private or protected\n * fields should use the [[`internalProperty`]] decorator.\n *\n * @example\n * ```ts\n * class MyElement {\n *   @property({ type: Boolean })\n *   clicked = false;\n * }\n * ```\n * @category Decorator\n * @ExportDecoratedItems\n */\nfunction property(options) {\n    // tslint:disable-next-line:no-any decorator\n    return (protoOrDescriptor, name) => (name !== undefined) ?\n        legacyProperty(options, protoOrDescriptor, name) :\n        standardProperty(options, protoOrDescriptor);\n}\n\n/**\n@license\nCopyright (c) 2019 The Polymer Project Authors. All rights reserved.\nThis code may only be used under the BSD style license found at\nhttp://polymer.github.io/LICENSE.txt The complete set of authors may be found at\nhttp://polymer.github.io/AUTHORS.txt The complete set of contributors may be\nfound at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as\npart of the polymer project is also subject to an additional IP rights grant\nfound at http://polymer.github.io/PATENTS.txt\n*/\n/**\n * Whether the current browser supports `adoptedStyleSheets`.\n */\nconst supportsAdoptingStyleSheets = (window.ShadowRoot) &&\n    (window.ShadyCSS === undefined || window.ShadyCSS.nativeShadow) &&\n    ('adoptedStyleSheets' in Document.prototype) &&\n    ('replace' in CSSStyleSheet.prototype);\n\n/**\n * @license\n * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at\n * http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at\n * http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at\n * http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at\n * http://polymer.github.io/PATENTS.txt\n */\n// IMPORTANT: do not change the property name or the assignment expression.\n// This line will be used in regexes to search for LitElement usage.\n// TODO(justinfagnani): inject version number at build time\n(window['litElementVersions'] || (window['litElementVersions'] = []))\n    .push('2.4.0');\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// NOTE(cdata): The HAS_WEBXR_* constants can be enabled in Chrome by turning on\n// the appropriate flags. However, just because we have the API does not\n// guarantee that AR will work.\nconst HAS_WEBXR_DEVICE_API = navigator.xr != null &&\n    self.XRSession != null && navigator.xr.isSessionSupported != null;\nconst HAS_WEBXR_HIT_TEST_API = HAS_WEBXR_DEVICE_API && self.XRSession.prototype.requestHitTestSource;\nconst HAS_RESIZE_OBSERVER = self.ResizeObserver != null;\nconst HAS_INTERSECTION_OBSERVER = self.IntersectionObserver != null;\nconst IS_WEBXR_AR_CANDIDATE = HAS_WEBXR_HIT_TEST_API;\nconst IS_MOBILE = (() => {\n    const userAgent = navigator.userAgent || navigator.vendor || self.opera;\n    let check = false;\n    // eslint-disable-next-line\n    if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i\n        .test(userAgent) ||\n        /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i\n            .test(userAgent.substr(0, 4))) {\n        check = true;\n    }\n    return check;\n})();\nconst IS_CHROMEOS = /\\bCrOS\\b/.test(navigator.userAgent);\n// Disabling offscreen canvas for now because it is slower and has bugs relating\n// to janky updates and out of sync frames.\nconst USE_OFFSCREEN_CANVAS = false;\n// Boolean((self as any).OffscreenCanvas) &&\n//     Boolean((self as any).OffscreenCanvas.prototype.transferToImageBitmap) &&\n//     !IS_CHROMEOS;  // TODO(elalish): file a bug on inverted renders\nconst IS_ANDROID = /android/i.test(navigator.userAgent);\n// Prior to iOS 13, detecting iOS Safari was relatively straight-forward.\n// As of iOS 13, Safari on iPad (in its default configuration) reports the same\n// user-agent string as Safari on desktop MacOS. Strictly speaking, we only care\n// about iOS for the purposes if selecting for cases where Quick Look is known\n// to be supported. However, for API correctness purposes, we must rely on\n// known, detectable signals to distinguish iOS Safari from MacOS Safari. At the\n// time of this writing, there are no non-iOS/iPadOS Apple devices with\n// multi-touch displays.\n// @see https://stackoverflow.com/questions/57765958/how-to-detect-ipad-and-ipad-os-version-in-ios-13-and-up\n// @see https://forums.developer.apple.com/thread/119186\n// @see https://github.com/google/model-viewer/issues/758\nconst IS_IOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !self.MSStream) ||\n    (navigator.platform === 'MacIntel' && navigator.maxTouchPoints > 1);\nconst IS_AR_QUICKLOOK_CANDIDATE = (() => {\n    const tempAnchor = document.createElement('a');\n    return Boolean(tempAnchor.relList && tempAnchor.relList.supports &&\n        tempAnchor.relList.supports('ar'));\n})();\n// @see https://developer.chrome.com/multidevice/user-agent\nconst IS_SAFARI = /Safari\\//.test(navigator.userAgent);\nconst IS_FIREFOX = /firefox/i.test(navigator.userAgent);\nconst IS_OCULUS = /OculusBrowser/.test(navigator.userAgent);\nconst IS_IOS_CHROME = IS_IOS && /CriOS\\//.test(navigator.userAgent);\nconst IS_IOS_SAFARI = IS_IOS && IS_SAFARI;\nconst IS_SCENEVIEWER_CANDIDATE = IS_ANDROID && !IS_FIREFOX && !IS_OCULUS;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar CloseIcon = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" fill=\"#000000\">\n    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement\n         support for dynamic re-coloring of UI components -->\n    <defs>\n      <filter id=\"drop-shadow\" x=\"-100%\" y=\"-100%\" width=\"300%\" height=\"300%\">\n        <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"1\"/>\n        <feOffset dx=\"0\" dy=\"0\" result=\"offsetblur\"/>\n        <feFlood flood-color=\"#000000\"/>\n        <feComposite in2=\"offsetblur\" operator=\"in\"/>\n        <feMerge>\n          <feMergeNode/>\n          <feMergeNode in=\"SourceGraphic\"/>\n        </feMerge>\n      </filter>\n    </defs>\n    <path filter=\"url(#drop-shadow)\" d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n    <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ControlsPrompt = `\n<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"25\" height=\"36\">\n    <defs>\n        <path id=\"A\" d=\"M.001.232h24.997V36H.001z\" />\n    </defs>\n    <g transform=\"translate(-11 -4)\" fill=\"none\" fill-rule=\"evenodd\">\n        <path fill-opacity=\"0\" fill=\"#fff\" d=\"M0 0h44v44H0z\" />\n        <g transform=\"translate(11 3)\">\n            <path d=\"M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z\" fill-opacity=\".5\" fill=\"#e4e4e4\" />\n            <path d=\"M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91\" fill-opacity=\".6\" fill=\"#000\" />\n            <path d=\"M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z\" fill=\"#fff\" />\n            <g transform=\"translate(0 .769)\">\n                <mask id=\"B\" fill=\"#fff\">\n                    <use xlink:href=\"#A\" />\n                </mask>\n                <path d=\"M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325\" fill-opacity=\".05\" fill=\"#000\" mask=\"url(#B)\" />\n            </g>\n        </g>\n    </g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar ARGlyph = `\n<svg version=\"1.1\" id=\"view_x5F_in_x5F_AR_x5F_icon\"\n\t xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" width=\"24px\" height=\"24px\"\n\t viewBox=\"0 0 24 24\" enable-background=\"new 0 0 24 24\" xml:space=\"preserve\">\n<rect id=\"Bounding_Box\" x=\"0\" y=\"0\" fill=\"none\" width=\"24\" height=\"24\"/>\n<g id=\"Art_layer\">\n\t<path d=\"M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z\"/>\n\t<path d=\"M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z\"/>\n\t<path d=\"M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z\"/>\n\t<path d=\"M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z\"/>\n\t<g>\n\t\t<path d=\"M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3\n\t\t\tl5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62\n\t\t\tl4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z\"/>\n\t</g>\n</g>\n</svg>`;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst template = document.createElement('template');\ntemplate.innerHTML = `\n<style>\n:host {\n  display: block;\n  position: relative;\n  contain: strict;\n  width: 300px;\n  height: 150px;\n}\n\n/* NOTE: This ruleset is our integration surface area with the\n * :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196 */\n:host([data-js-focus-visible]:focus:not(.focus-visible)),\n:host([data-js-focus-visible]) :focus:not(.focus-visible) {\n  outline: none;\n}\n\n.container {\n  position: relative;\n}\n\n.userInput {\n  width: 100%;\n  height: 100%;\n  display: block;\n  position: relative;\n  overflow: hidden;\n}\n\ncanvas {\n  position: absolute;\n  display: none;\n  pointer-events: none;\n  /* NOTE(cdata): Chrome 76 and below apparently have a bug\n   * that causes our canvas not to display pixels unless it is\n   * on its own render layer\n   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893\n   */\n  transform: translateZ(0);\n}\n\ncanvas.show {\n  display: block;\n}\n\n/* Adapted from HTML5 Boilerplate\n *\n * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */\n.screen-reader-only {\n  border: 0;\n  clip: rect(0, 0, 0, 0);\n  height: 1px;\n  margin: -1px;\n  overflow: hidden;\n  padding: 0;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n}\n\n.slot {\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n\n.slot > * {\n  pointer-events: initial;\n}\n\n.annotation-wrapper ::slotted(*) {\n  opacity: var(--max-hotspot-opacity, 1);\n  transition: opacity 0.3s;\n}\n\n.pointer-tumbling .annotation-wrapper ::slotted(*) {\n  pointer-events: none;\n}\n\n.annotation-wrapper ::slotted(*) {\n  pointer-events: initial;\n}\n\n.annotation-wrapper.hide ::slotted(*) {\n  opacity: var(--min-hotspot-opacity, 0.25);\n}\n\n.slot.poster {\n  opacity: 0;\n  transition: opacity 0.3s 0.3s;\n  background-color: inherit;\n}\n\n.slot.poster.show {\n  opacity: 1;\n  transition: none;\n}\n\n.slot.poster > * {\n  pointer-events: initial;\n}\n\n.slot.poster:not(.show) > * {\n  pointer-events: none;\n}\n\n#default-poster {\n  width: 100%;\n  height: 100%;\n  /* The default poster is a <button> so we need to set display\n   * to prevent it from being affected by text-align: */\n  display: block;\n  position: absolute;\n  border: none;\n  padding: 0;\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: var(--poster-color, #fff);\n  background-image: var(--poster-image, none);\n}\n\n#default-progress-bar {\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  overflow: hidden;\n}\n\n#default-progress-bar > .mask {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: var(--progress-mask, #fff);\n  transition: opacity 0.3s;\n  opacity: 0.2;\n}\n\n#default-progress-bar > .bar {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: var(--progress-bar-height, 5px);\n  transition: transform 0.09s;\n  transform-origin: top left;\n  transform: scaleX(0);\n  overflow: hidden;\n}\n\n#default-progress-bar > .bar:before {\n  content: '';\n  display: block;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));\n\n  transition: none;\n  transform-origin: top left;\n  transform: translateY(0);\n}\n\n#default-progress-bar > .bar.hide:before {\n  transition: transform 0.3s 1s;\n  transform: translateY(-100%);\n}\n\n.slot.interaction-prompt {\n  display: var(--interaction-prompt-display, flex);\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  align-items: center;\n  justify-content: center;\n\n  opacity: 0;\n  will-change: opacity;\n  overflow: hidden;\n  transition: opacity 0.3s;\n}\n\n.slot.interaction-prompt.visible {\n  opacity: 1;\n}\n\n.slot.interaction-prompt > .animated-container {\n  will-change: transform, opacity;\n}\n\n.slot.interaction-prompt > * {\n  pointer-events: none;\n}\n\n.slot.ar-button {\n  -moz-user-select: none;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n\n  display: var(--ar-button-display, block);\n}\n\n.slot.ar-button:not(.enabled) {\n  display: none;\n}\n\n.fab {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-sizing: border-box;\n  width: 40px;\n  height: 40px;\n  cursor: pointer;\n  background-color: #fff;\n  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);\n  border-radius: 100px;\n}\n\n.fab > * {\n  opacity: 0.87;\n}\n\n#default-ar-button {\n  position: absolute;\n  bottom: 16px;\n  right: 16px;\n  transform: scale(var(--ar-button-scale, 1));\n  transform-origin: bottom right;\n}\n\n.slot.default {\n  pointer-events: none;\n}\n\n.slot.progress-bar {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button {\n  pointer-events: none;\n}\n\n.slot.exit-webxr-ar-button:not(.enabled) {\n  display: none;\n}\n\n#default-exit-webxr-ar-button {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 16px;\n  left: 16px;\n  width: 40px;\n  height: 40px;\n  box-sizing: border-box;\n}\n\n#default-exit-webxr-ar-button > svg {\n  fill: #fff;\n}\n</style>\n<div class=\"container\">\n  <div class=\"userInput\" tabindex=\"0\" role=\"img\"\n      aria-label=\"A depiction of a 3D model\"\n      aria-live=\"polite\">\n    <canvas></canvas>\n  </div>\n\n  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM\n        will have their <slot> elements removed by ShadyCSS -->\n  <div class=\"slot poster\">\n    <slot name=\"poster\">\n      <button type=\"button\" id=\"default-poster\" aria-hidden=\"true\" aria-label=\"Activate to view in 3D!\"></button>\n    </slot>\n  </div>\n\n  <div class=\"slot ar-button\">\n    <slot name=\"ar-button\">\n      <a id=\"default-ar-button\" class=\"fab\"\n          tabindex=\"2\"\n          aria-label=\"View this 3D model up close\">\n        ${ARGlyph}\n      </a>\n    </slot>\n  </div>\n\n  <div class=\"slot interaction-prompt\">\n    <div class=\"animated-container\" part=\"interaction-prompt\">\n      <slot name=\"interaction-prompt\" aria-hidden=\"true\">\n        ${ControlsPrompt}\n      </slot>\n    </div>\n  </div>\n\n  <div class=\"slot default\">\n    <slot></slot>\n\n    <div class=\"slot progress-bar\">\n      <slot name=\"progress-bar\">\n        <div id=\"default-progress-bar\" aria-hidden=\"true\">\n          <div class=\"mask\"></div>\n          <div class=\"bar\"></div>\n        </div>\n      </slot>\n    </div>\n    \n    <div class=\"slot exit-webxr-ar-button\">\n      <slot name=\"exit-webxr-ar-button\">\n        <a id=\"default-exit-webxr-ar-button\"\n            tabindex=\"3\"\n            aria-label=\"Exit AR\"\n            aria-hidden=\"true\">\n          ${CloseIcon}\n        </a>\n      </slot>\n    </div>\n  </div>\n</div>`;\nconst makeTemplate = (tagName) => {\n    const clone = document.createElement('template');\n    clone.innerHTML = template.innerHTML;\n    if (window.ShadyCSS) {\n        window.ShadyCSS.prepareTemplate(clone, tagName);\n    }\n    return clone;\n};\n\n// threejs.org/license\nconst REVISION = '121';\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst FlatShading = 1;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst CubeUVRefractionMapping = 307;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedShort565Type = 1019;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst RGBEFormat = RGBAFormat;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBIntegerFormat = 1032;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst GammaEncoding = 3007;\nconst RGBEEncoding = 3002;\nconst LogLuvEncoding = 3003;\nconst RGBM7Encoding = 3004;\nconst RGBM16Encoding = 3005;\nconst RGBDEncoding = 3006;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\nconst KeepStencilOp = 7680;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst GLSL3 = \"300 es\";\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nlet _seed = 1234567;\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\t// Deterministic pseudo-random float in the interval [ 0, 1 ]\n\n\tseededRandom: function ( s ) {\n\n\t\tif ( s !== undefined ) _seed = s % 2147483647;\n\n\t\t// Park-Miller algorithm\n\n\t\t_seed = _seed * 16807 % 2147483647;\n\n\t\treturn ( _seed - 1 ) / 2147483646;\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector2', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix3', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tgetInverse( matrix, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\tconst me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t}\n\n\tscale( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nlet _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nlet textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isVector4', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : false;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.samples = 4;\n\n}\n\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultisampleRenderTarget,\n\n\tisWebGLMultisampleRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tObject.defineProperty( this, 'isQuaternion', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerp( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinverse() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tObject.defineProperty( this, 'isVector3', { value: true } );\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox3', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$1 );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\n\nconst _box = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nconst _box$1 = /*@__PURE__*/ new Box3();\n\nclass Sphere {\n\n\tconstructor( center, radius ) {\n\n\t\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\t\tthis.radius = ( radius !== undefined ) ? radius : - 1;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin, direction ) {\n\n\t\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\t\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$2.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$2.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$2.dot( this.direction );\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isMatrix4', { value: true } );\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( arguments.length > 0 ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetInverse( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\t\tObject.defineProperty( this, 'isEuler', { value: true } );\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$1.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\ttoVector3( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n}\n\nEuler.DefaultOrder = 'XYZ';\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$2 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1$1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion$2 = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$2.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$2.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal, constant ) {\n\n\t\tObject.defineProperty( this, 'isPlane', { value: true } );\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\t\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n}\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nclass Triangle {\n\n\tconstructor( a, b, c ) {\n\n\t\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\t\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\t\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$1.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tObject.defineProperty( this, 'isColor', { value: true } );\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\t\t\treturn this.set( r );\n\n\t\t}\n\n\t\treturn this.setRGB( r, g, b );\n\n\t}\n\n\tset( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopyGammaToLinear( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToGamma( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t}\n\n\tconvertGammaToLinear( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToGamma( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex() {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t}\n\n\tgetHexString() {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle() {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n}\n\nColor.NAMES = _colorKeywords;\nColor.prototype.r = 1;\nColor.prototype.g = 1;\nColor.prototype.b = 1;\n\nclass Face3 {\n\n\tconstructor( a, b, c, normal, color, materialIndex ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\t\tthis.color = ( color && color.isColor ) ? color : new Color();\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\t\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _vector$3 = new Vector3();\nconst _vector2$1 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\n\t\t\t\t_vector$3.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\nclass DirectGeometry {\n\n\tconstructor() {\n\n\t\tthis.vertices = [];\n\t\tthis.normals = [];\n\t\tthis.colors = [];\n\t\tthis.uvs = [];\n\t\tthis.uvs2 = [];\n\n\t\tthis.groups = [];\n\n\t\tthis.morphTargets = {};\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\t// this.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tcomputeGroups( geometry ) {\n\n\t\tconst groups = [];\n\n\t\tlet group, i;\n\t\tlet materialIndex = undefined;\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n\tfromGeometry( geometry ) {\n\n\t\tconst faces = geometry.faces;\n\t\tconst vertices = geometry.vertices;\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tconst morphTargets = geometry.morphTargets;\n\t\tconst morphTargetsLength = morphTargets.length;\n\n\t\tlet morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tconst morphNormals = geometry.morphNormals;\n\t\tconst morphNormalsLength = morphNormals.length;\n\n\t\tlet morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tconst skinIndices = geometry.skinIndices;\n\t\tconst skinWeights = geometry.skinWeights;\n\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nconst _m1$2 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box$2 = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$2.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$2.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$2.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$2.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$2.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tlet geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tlet direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( const name in geometry.morphTargets ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ i ];\n\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$4.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$4.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst isMultiMaterial = Array.isArray( material );\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst faces = geometry.faces;\n\t\t\tlet uvs;\n\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = faces[ f ];\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tconst fvA = vertices[ face.a ];\n\t\t\t\tconst fvB = vertices[ face.b ];\n\t\t\t\tconst fvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\n/**\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tthis.glslVersion = null;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\tthis.glslVersion = source.glslVersion;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.glslVersion = this.glslVersion;\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst fov = 90, aspect = 1;\n\nfunction CubeCamera( near, far, renderTarget ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\treturn;\n\n\t}\n\n\tthis.renderTarget = renderTarget;\n\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.layers = this.layers;\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.layers = this.layers;\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.layers = this.layers;\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.layers = this.layers;\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.layers = this.layers;\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.layers = this.layers;\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.update = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t};\n\n\tthis.clear = function ( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( renderTarget, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t};\n\n}\n\nCubeCamera.prototype = Object.create( Object3D.prototype );\nCubeCamera.prototype.constructor = CubeCamera;\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n\tthis._needsFlipEnvMap = true;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\n\n\tif ( Number.isInteger( options ) ) {\n\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\toptions = dummy;\n\n\t}\n\n\tWebGLRenderTarget.call( this, size, size, options );\n\n\toptions = options || {};\n\n\tthis.texture = new CubeTexture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture._needsFlipEnvMap = false;\n\n}\n\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\n\n\tthis.texture.type = texture.type;\n\tthis.texture.format = RGBAFormat; // see #18859\n\tthis.texture.encoding = texture.encoding;\n\n\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\tthis.texture.minFilter = texture.minFilter;\n\tthis.texture.magFilter = texture.magFilter;\n\n\tconst shader = {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: /* glsl */`\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t`,\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t`\n\t};\n\n\tconst geometry = new BoxBufferGeometry( 5, 5, 5 );\n\n\tconst material = new ShaderMaterial( {\n\n\t\tname: 'CubemapFromEquirect',\n\n\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader,\n\t\tside: BackSide,\n\t\tblending: NoBlending\n\n\t} );\n\n\tmaterial.uniforms.tEquirect.value = texture;\n\n\tconst mesh = new Mesh( geometry, material );\n\n\tconst currentMinFilter = texture.minFilter;\n\n\t// Avoid blurred poles\n\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\tconst camera = new CubeCamera( 1, 10, this );\n\tcamera.update( renderer, mesh );\n\n\ttexture.minFilter = currentMinFilter;\n\n\tmesh.geometry.dispose();\n\tmesh.material.dispose();\n\n\treturn this;\n\n};\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\nconst _vector$5 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tthis.planes = [\n\n\t\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t\t];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$1.center.set( 0, 0, 0 );\n\t\t_sphere$1.radius = 0.7071067811865476;\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = 5126;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = 5123;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tvar cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, widthSegments, heightSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'PlaneBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments ) || 1;\n\t\tconst gridY = Math.floor( heightSegments ) || 1;\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n}\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor.xyz *= color.xyz;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_maxMipLevel 8.0\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_maxTileSize 256.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\\n\\t\\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\\n\\t\\tvec2 f = fract( uv );\\n\\t\\tuv += 0.5 - f;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tif ( mipInt < cubeUV_maxMipLevel ) {\\n\\t\\t\\tuv.y += 2.0 * cubeUV_maxTileSize;\\n\\t\\t}\\n\\t\\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n\\t\\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\\n\\t\\tuv *= texelSize;\\n\\t\\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x += texelSize;\\n\\t\\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.y += texelSize;\\n\\t\\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tuv.x -= texelSize;\\n\\t\\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\\n\\t\\tvec3 tm = mix( tl, tr, f.x );\\n\\t\\tvec3 bm = mix( bl, br, f.x );\\n\\t\\treturn mix( tm, bm, f.y );\\n\\t}\\n\\t#define r0 1.0\\n\\t#define v0 0.339\\n\\t#define m0 - 2.0\\n\\t#define r1 0.8\\n\\t#define v1 0.276\\n\\t#define m1 - 1.0\\n\\t#define r4 0.4\\n\\t#define v4 0.046\\n\\t#define m4 2.0\\n\\t#define r5 0.305\\n\\t#define v5 0.016\\n\\t#define m5 3.0\\n\\t#define r6 0.21\\n\\t#define v6 0.0038\\n\\t#define m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= r1 ) {\\n\\t\\t\\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\\n\\t\\t} else if ( roughness >= r4 ) {\\n\\t\\t\\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\\n\\t\\t} else if ( roughness >= r5 ) {\\n\\t\\t\\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\\n\\t\\t} else if ( roughness >= r6 ) {\\n\\t\\t\\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value ) {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularRoughness;\\n\\tvec3 specularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmissionmap_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\\n#endif\";\n\nvar transmissionmap_pars_fragment = \"#ifdef USE_TRANSMISSIONMAP\\n\\tuniform sampler2D transmissionMap;\\n#endif\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSMISSION\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSMISSION\\n\\tuniform float transmission;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <transmissionmap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#ifdef TRANSMISSION\\n\\t\\tfloat totalTransmission = transmission;\\n\\t#endif\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <transmissionmap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSMISSION\\n\\t\\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmissionmap_fragment: transmissionmap_fragment,\n\ttransmissionmap_pars_fragment: transmissionmap_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nfunction WebGLBackground( renderer, cubemaps, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tbackground = cubemaps.get( background );\n\n\t\t}\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tif ( background.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t// TODO Deprecate\n\n\t\t\t\tbackground = background.texture;\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry, index );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t}\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( name === 'instanceColor' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceColor );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute, 3, type, false, 12, 0 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst currentRenderList = renderer.getRenderList();\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\t\t\t\tconst currentRenderState = renderer.getRenderState();\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\t\t\t\t\t\trenderer.setRenderList( currentRenderList );\n\t\t\t\t\t\trenderer.setRenderState( currentRenderState );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ] !== null;\n\n\t\t\t}\n\n\t\t\tlet extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension !== null;\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( ! this.has( name ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = new WeakMap();\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\t\tconst buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( const name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tlet buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\tattributes.update( object.instanceColor, 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = new Texture();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tconst cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, 35718 );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + \"\\n\" : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\", \"instancingColor\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\", \"transmissionMap\"\n\t];\n\n\tfunction getMaxBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\ttransmissionMap: !! material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap || !! material.transmissionMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.transmissionMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList( properties ) {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: materialProperties.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = materialProperties.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists( properties ) {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tconst cameras = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList( properties );\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList( properties );\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_1;\n\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_2;\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState() {\n\n\tconst lights = new WebGLLights();\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, camera ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\t\\t#ifdef HORIZONAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean * HALF_SAMPLE_RATE;\\n\\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = null;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 6407 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = 6402;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\n\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\tconst cubeImage = [];\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t} else {\n\n\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst image = cubeImage[ 0 ],\n\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\tlet mipmaps;\n\n\t\tif ( isCompressed ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else {\n\n\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t// We assume images for cube map have the same size.\n\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\n\n\t\t\trenderTarget.texture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 34067, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 3553, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = 16384;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\n\t\tsetTextureCube( texture, slot );\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\t\tif ( p === UnsignedShort565Type ) return 33635;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBFormat ) return 6407;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBIntegerFormat ) return 36248;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\tthis._hand = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetHandSpace: function () {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = [];\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t\tif ( window.XRHand ) {\n\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\n\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\tconst joint = new Group();\n\t\t\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\t\t\tjoint.visible = false;\n\t\t\t\t\tthis._hand.joints.push( joint );\n\t\t\t\t\t// ??\n\t\t\t\t\tthis._hand.add( joint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t},\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( let i = 0; i <= window.XRHand.LITTLE_PHALANX_TIP; i ++ ) {\n\n\t\t\t\t\tif ( inputSource.hand[ i ] ) {\n\n\t\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\t\tconst jointPose = frame.getJointPose( inputSource.hand[ i ], referenceSpace );\n\t\t\t\t\t\tconst joint = hand.joints[ i ];\n\n\t\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t\t\t// Custom events\n\n\t\t\t\t\t\t// Check pinch\n\t\t\t\t\t\tconst indexTip = hand.joints[ window.XRHand.INDEX_PHALANX_TIP ];\n\t\t\t\t\t\tconst thumbTip = hand.joints[ window.XRHand.THUMB_PHALANX_TIP ];\n\t\t\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: \"pinchend\",\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\t\t\ttarget: this\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\t\t\ttype: \"pinchstart\",\n\t\t\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\t\t\ttarget: this\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\tthis.getHand = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getHandSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.isPresenting = true;\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tgl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap._needsFlipEnvMap ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tconst maxMipLevel = properties.get( envMap ).__maxMipLevel;\n\n\t\t\tif ( maxMipLevel !== undefined ) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if ( material.clearcoatMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if ( material.clearcoatNormalMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material ) {\n\n\t\trefreshUniformsStandard( uniforms, material );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif ( material.transmissionMap ) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\tlet _currentArrayCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, cubemaps, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates, clipping;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'OES_vertex_array_object' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tclipping = new WebGLClipping( properties );\n\t\tprogramCache = new WebGLPrograms( _this, cubemaps, extensions, capabilities, bindingStates, clipping );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists( properties );\n\t\trenderStates = new WebGLRenderStates();\n\t\tbackground = new WebGLBackground( _this, cubemaps, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= 16384;\n\t\tif ( depth === undefined || depth ) bits |= 256;\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tcubemaps.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( 4, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tconst material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list, envMap still needs the update here to avoid a frame-late effect\n\n\t\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || environment );\n\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\t\tmaterialProperties.envMap = cubemaps.get( material.envMap || materialProperties.environment );\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms();\n\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\t\tconst envMap = cubemaps.get( material.envMap || environment );\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height );\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderList = function () {\n\n\t\treturn currentRenderList;\n\n\t};\n\n\tthis.setRenderList = function ( renderList ) {\n\n\t\tcurrentRenderList = renderList;\n\n\t};\n\n\tthis.getRenderState = function () {\n\n\t\treturn currentRenderState;\n\n\t};\n\n\tthis.setRenderState = function ( renderState ) {\n\n\t\tcurrentRenderState = renderState;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nfunction WebGL1Renderer( parameters ) {\n\n\tWebGLRenderer.call( this, parameters );\n\n}\n\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\n\n\tconstructor: WebGL1Renderer,\n\n\tisWebGL1Renderer: true\n\n} );\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tObject.defineProperty( this, 'isScene', { value: true } );\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tthis.autoUpdate = true; // checked by the renderer\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\nconst _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.name = '';\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t},\n\n\tneedsUpdate: {\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.data.needsUpdate = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.x = this.getX( i );\n\t\t\t_vector$6.y = this.getY( i );\n\t\t\t_vector$6.z = this.getZ( i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interlaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\nlet _geometry;\n\nconst _intersectPoint = new Vector3();\nconst _worldScale = new Vector3();\nconst _mvPosition = new Vector3();\n\nconst _alignedPosition = new Vector2();\nconst _rotatedPosition = new Vector2();\nconst _viewWorldMatrix = new Matrix4();\n\nconst _vA$1 = new Vector3();\nconst _vB$1 = new Vector3();\nconst _vC$1 = new Vector3();\n\nconst _uvA$1 = new Vector2();\nconst _uvB$1 = new Vector2();\nconst _uvC$1 = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tconst float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA$1.set( 0, 0 );\n\t\t_uvB$1.set( 1, 0 );\n\t\t_uvC$1.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB$1.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$4 = new Vector3();\nconst _v2$2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t},\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tboneTransform: ( function () {\n\n\t\tconst basePosition = new Vector3();\n\n\t\tconst skinIndex = new Vector4();\n\t\tconst skinWeight = new Vector4();\n\n\t\tconst vector = new Vector3();\n\t\tconst matrix = new Matrix4();\n\n\t\treturn function ( index, target ) {\n\n\t\t\tconst skeleton = this.skeleton;\n\t\t\tconst geometry = this.geometry;\n\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\n\n\t\t\ttarget.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst weight = skinWeight.getComponent( i );\n\n\t\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\n\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t\t};\n\n\t}() )\n\n} );\n\nconst _offsetMatrix = new Matrix4();\nconst _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones, boneInverses ) {\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\tthis.frame = - 1;\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== undefined ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tdispose: function ( ) {\n\n\t\tif ( this.boneTexture ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = undefined;\n\n\t\t}\n\n\t}\n\n} );\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\nconst _instanceLocalMatrix = new Matrix4();\nconst _instanceWorldMatrix = new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\tthis.instanceColor = null;\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t},\n\n\tsetColorAt: function ( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new BufferAttribute( new Float32Array( this.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t},\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t}\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _start = new Vector3();\nconst _end = new Vector3();\nconst _inverseMatrix$1 = new Matrix4();\nconst _ray$1 = new Ray();\nconst _sphere$2 = new Sphere();\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere );\n\t\t_sphere$2.applyMatrix4( matrixWorld );\n\t\t_sphere$2.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\t\t\t\t\tconst b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst nbVertices = vertices.length;\n\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nconst _start$1 = new Vector3();\nconst _end$1 = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [];\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t_start$1.copy( vertices[ i ] );\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\nconst _inverseMatrix$2 = new Matrix4();\nconst _ray$2 = new Ray();\nconst _sphere$3 = new Sphere();\nconst _position$1 = new Vector3();\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\t\t_sphere$3.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positionAttribute = attributes.position;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position$1.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_position$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst vertices = geometry.vertices;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n\tconst scope = this;\n\n\tfunction updateVideo() {\n\n\t\tscope.needsUpdate = true;\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t}\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\nCanvasTexture.prototype.isCanvasTexture = true;\n\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\tformat = format !== undefined ? format : DepthFormat;\n\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t}\n\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps\t= false;\n\n}\n\nDepthTexture.prototype = Object.create( Texture.prototype );\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\nlet _geometryId = 0; // Geometry uses even numbers as Id\nconst _m1$3 = new Matrix4();\nconst _obj$1 = new Object3D();\nconst _offset$1 = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$3.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$3.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$3.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$3.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$3.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj$1.lookAt( vector );\n\n\t\t_obj$1.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj$1.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tconst scope = this;\n\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\n\t\tconst attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst position = attributes.position;\n\t\tconst normal = attributes.normal;\n\t\tconst color = attributes.color;\n\t\tconst uv = attributes.uv;\n\t\tconst uv2 = attributes.uv2;\n\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\n\n\t\t\tif ( color !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone()\n\t\t\t];\n\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\n\t\t\t];\n\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uv !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uv2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\n\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\n\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tconst center = this.boundingSphere.center;\n\t\tconst radius = this.boundingSphere.radius;\n\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tconst matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tconst vertices = new Array( this.vertices.length );\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tconst tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tconst faceNormal = new Vector3();\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet normalMatrix;\n\t\tconst vertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = vertices2[ i ];\n\n\t\t\tconst vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tconst face = faces2[ i ];\n\t\t\tlet normal, color;\n\t\t\tconst faceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tconst faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tconst unique = [], changes = [];\n\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst v = this.vertices[ i ];\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tconst faceIndicesToRemove = [];\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tconst indices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tconst idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tconst diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tconst faces = this.faces;\n\t\tconst length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tlet newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tconst vertices = [];\n\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst normals = [];\n\t\tconst normalsHash = {};\n\t\tconst colors = [];\n\t\tconst colorsHash = {};\n\t\tconst uvs = [];\n\t\tconst uvsHash = {};\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tconst hasMaterial = true;\n\t\t\tconst hasFaceUv = false; // deprecated\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tlet faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tconst vertices = source.vertices;\n\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tconst colors = source.colors;\n\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tconst faces = source.faces;\n\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphTargets = source.morphTargets;\n\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tconst morphNormals = source.morphNormals;\n\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tconst morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tconst destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tconst skinWeights = source.skinWeights;\n\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tconst skinIndices = source.skinIndices;\n\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tconst lineDistances = source.lineDistances;\n\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nconst _v0$2 = new Vector3();\nconst _v1$5 = new Vector3();\nconst _normal$1 = new Vector3();\nconst _triangle = new Triangle();\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode;\n\tconst hx = hole.x;\n\tconst hy = hole.y;\n\tlet qx = - Infinity, m;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node$1( a.i, a.x, a.y ),\n\t\tb2 = new Node$1( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node$1( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node$1( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nconst ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nclass ExtrudeBufferGeometry extends BufferGeometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tlet depth = options.depth !== undefined ? options.depth : 100;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t// deprecated options\n\n\t\t\tif ( options.amount !== undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\t\tdepth = options.amount;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON( shapes, options, data );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nclass ExtrudeGeometry extends Geometry {\n\n\tconstructor( shapes, options ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n}\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n/**\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\tconst EPS = 0.00001;\n\n\tconst normal = new Vector3();\n\n\tconst p0 = new Vector3(), p1 = new Vector3();\n\tconst pu = new Vector3(), pv = new Vector3();\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tconst sliceCount = slices + 1;\n\n\tfor ( let i = 0; i <= stacks; i ++ ) {\n\n\t\tconst v = i / stacks;\n\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\n\n\t\t\tconst u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( let j = 0; j < slices; j ++ ) {\n\n\t\t\tconst a = i * sliceCount + j;\n\t\t\tconst b = i * sliceCount + j + 1;\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n/**\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\nclass ShapeBufferGeometry extends BufferGeometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'ShapeBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tcurveSegments = curveSegments || 12;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// incides\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON$2( shapes, data );\n\n\t}\n\n}\n\nfunction toJSON$2( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass ShapeGeometry extends Geometry {\n\n\tconstructor( shapes, curveSegments ) {\n\n\t\tsuper();\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tif ( typeof curveSegments === 'object' ) {\n\n\t\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\t\tcurveSegments = curveSegments.curveSegments;\n\n\t\t}\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = Geometry.prototype.toJSON.call( this );\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON$3( shapes, data );\n\n\t}\n\n}\n\nfunction toJSON$3( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\n/**\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n/**\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *  ior: <float>,\n *\n *  sheen: <Color>,\n *\n *  transmission: <float>,\n *  transmissionMap: new THREE.Texture( <Image> )\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tObject.defineProperty( this, 'ior', {\n\t\tget: function () {\n\n\t\t\treturn ( 1 + 0.4 * this.reflectivity ) / ( 1 - 0.4 * this.reflectivity );\n\n\t\t},\n\t\tset: function ( ior ) {\n\n\t\t\tthis.reflectivity = MathUtils.clamp( 2.5 * ( ior - 1 ) / ( ior + 1 ), 0, 1 );\n\n\t\t}\n\t} );\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transmission = 0.0;\n\tthis.transmissionMap = null;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transmission = source.transmission;\n\tthis.transmissionMap = source.transmissionMap;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\nvar Materials = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tShadowMaterial: ShadowMaterial,\n\tSpriteMaterial: SpriteMaterial,\n\tRawShaderMaterial: RawShaderMaterial,\n\tShaderMaterial: ShaderMaterial,\n\tPointsMaterial: PointsMaterial,\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\tMeshStandardMaterial: MeshStandardMaterial,\n\tMeshPhongMaterial: MeshPhongMaterial,\n\tMeshToonMaterial: MeshToonMaterial,\n\tMeshNormalMaterial: MeshNormalMaterial,\n\tMeshLambertMaterial: MeshLambertMaterial,\n\tMeshDepthMaterial: MeshDepthMaterial,\n\tMeshDistanceMaterial: MeshDistanceMaterial,\n\tMeshBasicMaterial: MeshBasicMaterial,\n\tMeshMatcapMaterial: MeshMatcapMaterial,\n\tLineDashedMaterial: LineDashedMaterial,\n\tLineBasicMaterial: LineBasicMaterial,\n\tMaterial: Material\n});\n\nconst AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tconst n = times.length;\n\t\tconst result = new Array( n );\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tconst nValues = values.length;\n\t\tconst result = new values.constructor( nValues );\n\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tconst srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tlet i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tlet value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tconst clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tconst track = clip.tracks[ i ];\n\t\t\tconst valueSize = track.getValueSize();\n\n\t\t\tconst times = [];\n\t\t\tconst values = [];\n\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tlet minStartTime = Infinity;\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t},\n\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\n\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\n\n\t\tconst numTracks = referenceClip.tracks.length;\n\t\tconst referenceTime = referenceFrame / fps;\n\n\t\t// Make each track's values relative to the values at the reference frame\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t\t// Skip this track if it's non-numeric\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t\t} );\n\n\t\t\tif ( targetTrack === undefined ) continue;\n\n\t\t\tlet referenceOffset = 0;\n\t\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t\t}\n\n\t\t\tlet targetOffset = 0;\n\t\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t\t}\n\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\t\tlet referenceValue;\n\n\t\t\t// Find the value to subtract out of the track\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex, endIndex );\n\n\t\t\t} else {\n\n\t\t\t\t// Interpolate to the reference value\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\t\tconst startIndex = referenceOffset;\n\t\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( interpolant.resultBuffer, startIndex, endIndex );\n\n\t\t\t}\n\n\t\t\t// Conjugate the quaternion\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t\t}\n\n\t\t\t// Subtract the reference value from all of the track values\n\n\t\t\tconst numTimes = targetTrack.times.length;\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart,\n\t\t\t\t\t\treferenceValue,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\t\treturn targetClip;\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\n/**\n * A Track of Boolean keyframe values.\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\n/**\n * A Track of keyframe values that represent color.\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\n/**\n * A Track of numeric keyframe values.\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * A Track of quaternion keyframe values.\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\n/**\n * A Track that interpolates Strings\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\n/**\n * A Track of vectored keyframe values.\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nfunction AnimationClip( name, duration, tracks, blendMode ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n} );\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.withCredentials = false;\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\nconst loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\n\t\tlet request;\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\n\n\t\t\tlet data = dataUriRegexResult[ 3 ];\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tlet response;\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\trequest = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tconst response = this.response;\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( const header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction AnimationLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AnimationLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n} );\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\nfunction CubeTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CubeTextureLoader,\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t},\n\n\tgetTangentAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst twoPi = Math.PI * 2;\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tconst angle = this.aStartAngle + t * deltaAngle;\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tconst cos = Math.cos( this.aRotation );\n\t\tconst sin = Math.sin( this.aRotation );\n\n\t\tconst tx = x - this.aX;\n\t\tconst ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = new Vector3();\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = ( tension !== undefined ) ? tension : 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst points = this.points;\n\tconst l = points.length;\n\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tlet intPoint = Math.floor( p );\n\tlet weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tconst p1 = points[ intPoint % l ];\n\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n/**\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tconst tangent = optionalTarget || new Vector2();\n\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\treturn tangent;\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction SplineCurve( points ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst points = this.points;\n\tconst p = ( points.length - 1 ) * t;\n\n\tconst intPoint = Math.floor( p );\n\tconst weight = p - intPoint;\n\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tconst p1 = points[ intPoint ];\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalBias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\tthis.focus = 1;\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex ) {\n\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\n\n\t\tconst camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tObject.defineProperty( this, 'isSphericalHarmonics3', { value: true } );\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nfunction LightProbe( sh, intensity ) {\n\n\tLight.call( this, undefined, intensity );\n\n\tthis.type = 'LightProbe';\n\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\n\n}\n\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: LightProbe,\n\n\tisLightProbe: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\nconst LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.instanceCount = Infinity;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = { premultiplyAlpha: 'none' };\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tisImageBitmapLoader: true,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, scope.options );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tconst toChange = [];\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new ShapePath();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\nfunction AudioLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AudioLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( skyColor );\n\tconst color2 = new Color().set( groundColor );\n\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\tconst c0 = Math.sqrt( Math.PI );\n\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n}\n\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: HemisphereLightProbe,\n\n\tisHemisphereLightProbe: true,\n\n\tcopy: function ( source ) { // modifying colors not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nfunction AmbientLightProbe( color, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( color );\n\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n}\n\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: AmbientLightProbe,\n\n\tisAmbientLightProbe: true,\n\n\tcopy: function ( source ) { // modifying color not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst _eyeRight = new Matrix4();\nconst _eyeLeft = new Matrix4();\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n\tthis._cache = {\n\t\tfocus: null,\n\t\tfov: null,\n\t\taspect: null,\n\t\tnear: null,\n\t\tfar: null,\n\t\tzoom: null,\n\t\teyeSep: null\n\t};\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: function ( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n} );\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay ) {\n\n\t\tif ( delay === undefined ) delay = 0;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tlet mixFunction,\n\t\tmixFunctionAdditive,\n\t\tsetIdentity;\n\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\t//\n\t// 'add' is used for additive cumulative results\n\t//\n\t// 'work' is optional and is only present for quaternion types. It is used\n\t// to store intermediate quaternion multiplication results\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\tthis._workIndex = 5;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tmixFunction = this._select;\n\n\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t// additive is not relevant for non-numeric types\n\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t}\n\n\tthis._mixBufferRegion = mixFunction;\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\tthis._setIdentity = setIdentity;\n\tthis._origIndex = 3;\n\tthis._addIndex = 4;\n\n\tthis.cumulativeWeight = 0;\n\tthis.cumulativeWeightAdditive = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive: function ( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\t_setAdditiveIdentityNumeric: function () {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t},\n\n\t_setAdditiveIdentityQuaternion: function () {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t},\n\n\t_setAdditiveIdentityOther: function () {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t},\n\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tconst source = this.resolvedProperty;\n\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nfunction AnimationObjectGroup() {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// cached objects followed by the active ones\n\tthis._objects = Array.prototype.slice.call( arguments );\n\n\tthis.nCachedObjects_ = 0; // threshold\n\t// note: read by PropertyBinding.Composite\n\n\tconst indices = {};\n\tthis._indicesByUUID = indices; // for bookkeeping\n\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t}\n\n\tthis._paths = []; // inside: string\n\tthis._parsedPaths = []; // inside: { we don't care, here }\n\tthis._bindings = []; // inside: Array< PropertyBinding >\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\tconst scope = this;\n\n\tthis.stats = {\n\n\t\tobjects: {\n\t\t\tget total() {\n\n\t\t\t\treturn scope._objects.length;\n\n\t\t\t},\n\t\t\tget inUse() {\n\n\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t}\n\t\t},\n\t\tget bindingsPerObject() {\n\n\t\t\treturn scope._bindings.length;\n\n\t\t}\n\n\t};\n\n}\n\nObject.assign( AnimationObjectGroup.prototype, {\n\n\tisAnimationObjectGroup: true,\n\n\tadd: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\tremove: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// remove & forget\n\tuncache: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_: function ( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t},\n\n\tunsubscribe_: function ( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n} );\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot, blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot || null;\n\t\tthis.blendMode = blendMode || clip.blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tif ( typeof value === 'string' ) {\n\n\t\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\t\tvalue = arguments[ 1 ];\n\n\t\t}\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n} );\n\nfunction GLBufferAttribute( buffer, type, itemSize, elementSize, count ) {\n\n\tthis.buffer = buffer;\n\tthis.type = type;\n\tthis.itemSize = itemSize;\n\tthis.elementSize = elementSize;\n\tthis.count = count;\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( GLBufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( GLBufferAttribute.prototype, {\n\n\tisGLBufferAttribute: true,\n\n\tsetBuffer: function ( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t},\n\n\tsetType: function ( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetItemSize: function ( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t},\n\n\tsetCount: function ( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t},\n\n} );\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _vector$7 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min, max ) {\n\n\t\tObject.defineProperty( this, 'isBox2', { value: true } );\n\n\t\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\t\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n\tthis.hasPositions = false;\n\tthis.hasNormals = false;\n\tthis.hasColors = false;\n\tthis.hasUvs = false;\n\n\tthis.positionArray = null;\n\tthis.normalArray = null;\n\tthis.colorArray = null;\n\tthis.uvArray = null;\n\n\tthis.count = 0;\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'SkeletonHelper';\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.getInverse( this.root.matrixWorld );\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nconst LOD_MIN = 4;\nconst LOD_MAX = 8;\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst { _lodPlanes, _sizeLods, _sigmas } = /*@__PURE__*/ _createPlanes();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\n\t\tthis._equirectShader = null;\n\t\tthis._cubemapShader = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular ) {\n\n\t\treturn this._fromTexture( equirectangular );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap ) {\n\n\t\treturn this._fromTexture( cubemap );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapShader === null ) {\n\n\t\t\tthis._cubemapShader = _getCubemapShader();\n\t\t\tthis._compileMaterial( this._cubemapShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectShader === null ) {\n\n\t\t\tthis._equirectShader = _getEquirectShader();\n\t\t\tthis._compileMaterial( this._equirectShader );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._blurMaterial.dispose();\n\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\n\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t// private interface\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._pingPongRenderTarget.dispose();\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets( texture ) { // warning: null texture is valid\n\n\t\tconst params = {\n\t\t\tmagFilter: NearestFilter,\n\t\t\tminFilter: NearestFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: UnsignedByteType,\n\t\t\tformat: RGBEFormat,\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst outputEncoding = renderer.outputEncoding;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\tconst clearColor = renderer.getClearColor();\n\t\tconst clearAlpha = renderer.getClearAlpha();\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.outputEncoding = LinearEncoding;\n\n\t\tlet background = scene.background;\n\t\tif ( background && background.isColor ) {\n\n\t\t\tbackground.convertSRGBToLinear();\n\t\t\t// Convert linear to RGBE\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\n\t\t\trenderer.setClearColor( background, alpha );\n\t\t\tscene.background = null;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\t\t\tif ( col == 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col == 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\t_setViewport( cubeUVRenderTarget,\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.outputEncoding = outputEncoding;\n\t\trenderer.setClearColor( clearColor, clearAlpha );\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\tif ( this._cubemapShader == null ) {\n\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this._equirectShader == null ) {\n\n\t\t\t\tthis._equirectShader = _getEquirectShader();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tif ( ! texture.isCubeTexture ) {\n\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t\t}\n\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i == 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\t\tconst outputSize = _sizeLods[ lodOut ];\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\nfunction _isLDR( texture ) {\n\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\n\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n\n}\n\nfunction _createPlanes() {\n\n\tconst _lodPlanes = [];\n\tconst _sizeLods = [];\n\tconst _sigmas = [];\n\n\tlet lod = LOD_MAX;\n\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\t_sigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\n\t\tconst min = - texelSize / 2;\n\t\tconst max = 1 + texelSize / 2;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tconst weights = new Float32Array( maxSamples );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tconst texelSize = new Vector2( 1, 1 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${ _getEncodings() }\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn /* glsl */`\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t`;\n\n}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nObject.assign( CurvePath.prototype, {\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from path points (for Line or Points objects)\n\n\t\tconst pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from equidistant sampling along the path\n\n\t\tconst pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\tconst geometry = new Geometry();\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n//\n\nObject.assign( Path.prototype, {\n\n\tfromPoints: function ( points ) {\n\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n} );\n\n//\n\nfunction Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\nSkeletonHelper.prototype.update = function () {\n\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\n};\n\n//\n\nObject.assign( Loader.prototype, {\n\n\textractUrlBase: function ( url ) {\n\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\t\treturn LoaderUtils.extractUrlBase( url );\n\n\t}\n\n} );\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\n//\n\nObject.assign( Box2.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Sphere.prototype, {\n\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\n} );\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\nObject.assign( MathUtils, {\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\t\treturn MathUtils.floorPowerOfTwo( value );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\t\treturn MathUtils.ceilPowerOfTwo( value );\n\n\t}\n\n} );\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\t\treturn attribute.applyMatrix3( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyToArray: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\t\treturn attribute.applyMatrix4( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nObject.assign( Ray.prototype, {\n\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tarea: function () {\n\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\t\treturn this.getArea();\n\n\t},\n\tbarycoordFromPoint: function ( point, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn this.getBarycoord( point, target );\n\n\t},\n\tmidpoint: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\t\treturn this.getMidpoint( target );\n\n\t},\n\tnormal: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn this.getNormal( target );\n\n\t},\n\tplane: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\t\treturn this.getPlane( target );\n\n\t}\n\n} );\n\nObject.assign( Triangle, {\n\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n\t},\n\tnormal: function ( a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn Triangle.getNormal( a, b, c, target );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textractAllPoints: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\n\t\treturn this.extractPoints( divisions );\n\n\t},\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\n//\n\nObject.assign( Geometry.prototype, {\n\n\tcomputeTangents: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeLineDistances: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\tgetWorldRotation: function () {\n\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( Mesh.prototype, {\n\n\tsetDrawMode: function () {\n\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t},\n\n} );\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nSkinnedMesh.prototype.initBones = function () {\n\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\n\n};\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tcopyIndicesArray: function ( /* indices */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddAttribute: function ( name, attribute ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\treturn this.setAttribute( name, attribute );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t},\n\tremoveAttribute: function ( name ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\t\treturn this.deleteAttribute( name );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InstancedBufferGeometry.prototype, {\n\n\tmaxInstancedCount: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\treturn this.instanceCount;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\tthis.instanceCount = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\n//\n\nObject.assign( ExtrudeBufferGeometry.prototype, {\n\n\tgetArrays: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\n\n\t},\n\n\taddShapeList: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\n\n\t},\n\n\taddShape: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Scene.prototype, {\n\n\tdispose: function () {\n\n\t\tconsole.error( 'THREE.Scene: .dispose() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhysicalMaterial.prototype, {\n\n\ttransparency: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\treturn this.transmission;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission.' );\n\t\t\tthis.transmission = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t},\n\tanimate: function ( callback ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\t\tthis.setAnimationLoop( callback );\n\n\t},\n\tgetCurrentRenderTarget: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\treturn this.getRenderTarget();\n\n\t},\n\tgetMaxAnisotropy: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\t\treturn this.capabilities.getMaxAnisotropy();\n\n\t},\n\tgetPrecision: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\t\treturn this.capabilities.precision;\n\n\t},\n\tresetGLState: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\t\treturn this.state.reset();\n\n\t},\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t},\n\tsetFaceCulling: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n\t},\n\tallocTextureUnit: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n\t},\n\tsetTexture: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n\t},\n\tsetTexture2D: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n\t},\n\tsetTextureCube: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n\t},\n\tgetActiveMipMapLevel: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\t\treturn this.getActiveMipmapLevel();\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t},\n\ttoneMappingWhitePoint: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\t\t\treturn 1.0;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\n\t\t}\n\t},\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tconst scope = this;\n\t\t\tconst audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tconst loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tconst loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nvar DRACOLoader = function ( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.decoderPath = '';\n\tthis.decoderConfig = {};\n\tthis.decoderBinary = null;\n\tthis.decoderPending = null;\n\n\tthis.workerLimit = 4;\n\tthis.workerPool = [];\n\tthis.workerNextTaskID = 1;\n\tthis.workerSourceURL = '';\n\n\tthis.defaultAttributeIDs = {\n\t\tposition: 'POSITION',\n\t\tnormal: 'NORMAL',\n\t\tcolor: 'COLOR',\n\t\tuv: 'TEX_COORD'\n\t};\n\tthis.defaultAttributeTypes = {\n\t\tposition: 'Float32Array',\n\t\tnormal: 'Float32Array',\n\t\tcolor: 'Float32Array',\n\t\tuv: 'Float32Array'\n\t};\n\n};\n\nDRACOLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DRACOLoader,\n\n\tsetDecoderPath: function ( path ) {\n\n\t\tthis.decoderPath = path;\n\n\t\treturn this;\n\n\t},\n\n\tsetDecoderConfig: function ( config ) {\n\n\t\tthis.decoderConfig = config;\n\n\t\treturn this;\n\n\t},\n\n\tsetWorkerLimit: function ( workerLimit ) {\n\n\t\tthis.workerLimit = workerLimit;\n\n\t\treturn this;\n\n\t},\n\n\t/** @deprecated */\n\tsetVerbosity: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setVerbosity() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetDrawMode: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setDrawMode() method has been removed.' );\n\n\t},\n\n\t/** @deprecated */\n\tsetSkipDequantization: function () {\n\n\t\tconsole.warn( 'THREE.DRACOLoader: The .setSkipDequantization() method has been removed.' );\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, ( buffer ) => {\n\n\t\t\tvar taskConfig = {\n\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\tuseUniqueIDs: false\n\t\t\t};\n\n\t\t\tthis.decodeGeometry( buffer, taskConfig )\n\t\t\t\t.then( onLoad )\n\t\t\t\t.catch( onError );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\tdecodeDracoFile: function ( buffer, callback, attributeIDs, attributeTypes ) {\n\n\t\tvar taskConfig = {\n\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\tuseUniqueIDs: !! attributeIDs\n\t\t};\n\n\t\tthis.decodeGeometry( buffer, taskConfig ).then( callback );\n\n\t},\n\n\tdecodeGeometry: function ( buffer, taskConfig ) {\n\n\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t// references (rather than names) to typed array constructors. These must be\n\t\t// serialized before sending them to the worker.\n\t\tfor ( var attribute in taskConfig.attributeTypes ) {\n\n\t\t\tvar type = taskConfig.attributeTypes[ attribute ];\n\n\t\t\tif ( type.BYTES_PER_ELEMENT !== undefined ) {\n\n\t\t\t\ttaskConfig.attributeTypes[ attribute ] = type.name;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar taskKey = JSON.stringify( taskConfig );\n\n\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t// again from this thread.\n\t\tif ( DRACOLoader.taskCache.has( buffer ) ) {\n\n\t\t\tvar cachedTask = DRACOLoader.taskCache.get( buffer );\n\n\t\t\tif ( cachedTask.key === taskKey ) {\n\n\t\t\t\treturn cachedTask.promise;\n\n\t\t\t} else if ( buffer.byteLength === 0 ) {\n\n\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\tthrow new Error(\n\n\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar worker;\n\t\tvar taskID = this.workerNextTaskID ++;\n\t\tvar taskCost = buffer.byteLength;\n\n\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t// when the task completes.\n\t\tvar geometryPending = this._getWorker( taskID, taskCost )\n\t\t\t.then( ( _worker ) => {\n\n\t\t\t\tworker = _worker;\n\n\t\t\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\t\t\tworker._callbacks[ taskID ] = { resolve, reject };\n\n\t\t\t\t\tworker.postMessage( { type: 'decode', id: taskID, taskConfig, buffer }, [ buffer ] );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t} );\n\n\t\t\t} )\n\t\t\t.then( ( message ) => this._createGeometry( message.geometry ) );\n\n\t\t// Remove task from the task list.\n\t\t// Note: replaced '.finally()' with '.catch().then()' block - iOS 11 support (#19416)\n\t\tgeometryPending\n\t\t\t.catch( () => true )\n\t\t\t.then( () => {\n\n\t\t\t\tif ( worker && taskID ) {\n\n\t\t\t\t\tthis._releaseTask( worker, taskID );\n\n\t\t\t\t\t// this.debug();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t// Cache the task result.\n\t\tDRACOLoader.taskCache.set( buffer, {\n\n\t\t\tkey: taskKey,\n\t\t\tpromise: geometryPending\n\n\t\t} );\n\n\t\treturn geometryPending;\n\n\t},\n\n\t_createGeometry: function ( geometryData ) {\n\n\t\tvar geometry = new BufferGeometry();\n\n\t\tif ( geometryData.index ) {\n\n\t\t\tgeometry.setIndex( new BufferAttribute( geometryData.index.array, 1 ) );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < geometryData.attributes.length; i ++ ) {\n\n\t\t\tvar attribute = geometryData.attributes[ i ];\n\t\t\tvar name = attribute.name;\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tgeometry.setAttribute( name, new BufferAttribute( array, itemSize ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t},\n\n\t_loadLibrary: function ( url, responseType ) {\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.decoderPath );\n\t\tloader.setResponseType( responseType );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\treturn new Promise( ( resolve, reject ) => {\n\n\t\t\tloader.load( url, resolve, undefined, reject );\n\n\t\t} );\n\n\t},\n\n\tpreload: function () {\n\n\t\tthis._initDecoder();\n\n\t\treturn this;\n\n\t},\n\n\t_initDecoder: function () {\n\n\t\tif ( this.decoderPending ) return this.decoderPending;\n\n\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\tvar librariesPending = [];\n\n\t\tif ( useJS ) {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.js', 'text' ) );\n\n\t\t} else {\n\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_wasm_wrapper.js', 'text' ) );\n\t\t\tlibrariesPending.push( this._loadLibrary( 'draco_decoder.wasm', 'arraybuffer' ) );\n\n\t\t}\n\n\t\tthis.decoderPending = Promise.all( librariesPending )\n\t\t\t.then( ( libraries ) => {\n\n\t\t\t\tvar jsContent = libraries[ 0 ];\n\n\t\t\t\tif ( ! useJS ) {\n\n\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[ 1 ];\n\n\t\t\t\t}\n\n\t\t\t\tvar fn = DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\tvar body = [\n\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\tjsContent,\n\t\t\t\t\t'',\n\t\t\t\t\t'/* worker */',\n\t\t\t\t\tfn.substring( fn.indexOf( '{' ) + 1, fn.lastIndexOf( '}' ) )\n\t\t\t\t].join( '\\n' );\n\n\t\t\t\tthis.workerSourceURL = URL.createObjectURL( new Blob( [ body ] ) );\n\n\t\t\t} );\n\n\t\treturn this.decoderPending;\n\n\t},\n\n\t_getWorker: function ( taskID, taskCost ) {\n\n\t\treturn this._initDecoder().then( () => {\n\n\t\t\tif ( this.workerPool.length < this.workerLimit ) {\n\n\t\t\t\tvar worker = new Worker( this.workerSourceURL );\n\n\t\t\t\tworker._callbacks = {};\n\t\t\t\tworker._taskCosts = {};\n\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\tworker.postMessage( { type: 'init', decoderConfig: this.decoderConfig } );\n\n\t\t\t\tworker.onmessage = function ( e ) {\n\n\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\tswitch ( message.type ) {\n\n\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].resolve( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\tworker._callbacks[ message.id ].reject( message );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"' );\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t\tthis.workerPool.push( worker );\n\n\t\t\t} else {\n\n\t\t\t\tthis.workerPool.sort( function ( a, b ) {\n\n\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tvar worker = this.workerPool[ this.workerPool.length - 1 ];\n\t\t\tworker._taskCosts[ taskID ] = taskCost;\n\t\t\tworker._taskLoad += taskCost;\n\t\t\treturn worker;\n\n\t\t} );\n\n\t},\n\n\t_releaseTask: function ( worker, taskID ) {\n\n\t\tworker._taskLoad -= worker._taskCosts[ taskID ];\n\t\tdelete worker._callbacks[ taskID ];\n\t\tdelete worker._taskCosts[ taskID ];\n\n\t},\n\n\tdebug: function () {\n\n\t\tconsole.log( 'Task load: ', this.workerPool.map( ( worker ) => worker._taskLoad ) );\n\n\t},\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.workerPool.length; ++ i ) {\n\n\t\t\tthis.workerPool[ i ].terminate();\n\n\t\t}\n\n\t\tthis.workerPool.length = 0;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/* WEB WORKER */\n\nDRACOLoader.DRACOWorker = function () {\n\n\tvar decoderConfig;\n\tvar decoderPending;\n\n\tonmessage = function ( e ) {\n\n\t\tvar message = e.data;\n\n\t\tswitch ( message.type ) {\n\n\t\t\tcase 'init':\n\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\tdecoderPending = new Promise( function ( resolve/*, reject*/ ) {\n\n\t\t\t\t\tdecoderConfig.onModuleLoaded = function ( draco ) {\n\n\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\tresolve( { draco: draco } );\n\n\t\t\t\t\t};\n\n\t\t\t\t\tDracoDecoderModule( decoderConfig ); // eslint-disable-line no-undef\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t\tcase 'decode':\n\t\t\t\tvar buffer = message.buffer;\n\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\tdecoderPending.then( ( module ) => {\n\n\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\tdecoderBuffer.Init( new Int8Array( buffer ), buffer.byteLength );\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tvar geometry = decodeGeometry( draco, decoder, decoderBuffer, taskConfig );\n\n\t\t\t\t\t\tvar buffers = geometry.attributes.map( ( attr ) => attr.array.buffer );\n\n\t\t\t\t\t\tif ( geometry.index ) buffers.push( geometry.index.array.buffer );\n\n\t\t\t\t\t\tself.postMessage( { type: 'decode', id: message.id, geometry }, buffers );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tconsole.error( error );\n\n\t\t\t\t\t\tself.postMessage( { type: 'error', id: message.id, error: error.message } );\n\n\t\t\t\t\t} finally {\n\n\t\t\t\t\t\tdraco.destroy( decoderBuffer );\n\t\t\t\t\t\tdraco.destroy( decoder );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t};\n\n\tfunction decodeGeometry( draco, decoder, decoderBuffer, taskConfig ) {\n\n\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\tvar dracoGeometry;\n\t\tvar decodingStatus;\n\n\t\tvar geometryType = decoder.GetEncodedGeometryType( decoderBuffer );\n\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\tdecodingStatus = decoder.DecodeBufferToMesh( decoderBuffer, dracoGeometry );\n\n\t\t} else if ( geometryType === draco.POINT_CLOUD ) {\n\n\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud( decoderBuffer, dracoGeometry );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Unexpected geometry type.' );\n\n\t\t}\n\n\t\tif ( ! decodingStatus.ok() || dracoGeometry.ptr === 0 ) {\n\n\t\t\tthrow new Error( 'THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg() );\n\n\t\t}\n\n\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t// Gather all vertex attributes.\n\t\tfor ( var attributeName in attributeIDs ) {\n\n\t\t\tvar attributeType = self[ attributeTypes[ attributeName ] ];\n\n\t\t\tvar attribute;\n\t\t\tvar attributeID;\n\n\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\tif ( taskConfig.useUniqueIDs ) {\n\n\t\t\t\tattributeID = attributeIDs[ attributeName ];\n\t\t\t\tattribute = decoder.GetAttributeByUniqueId( dracoGeometry, attributeID );\n\n\t\t\t} else {\n\n\t\t\t\tattributeID = decoder.GetAttributeId( dracoGeometry, draco[ attributeIDs[ attributeName ] ] );\n\n\t\t\t\tif ( attributeID === - 1 ) continue;\n\n\t\t\t\tattribute = decoder.GetAttribute( dracoGeometry, attributeID );\n\n\t\t\t}\n\n\t\t\tgeometry.attributes.push( decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) );\n\n\t\t}\n\n\t\t// Add index.\n\t\tif ( geometryType === draco.TRIANGULAR_MESH ) {\n\n\t\t\tgeometry.index = decodeIndex( draco, decoder, dracoGeometry );\n\n\t\t}\n\n\t\tdraco.destroy( dracoGeometry );\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction decodeIndex( draco, decoder, dracoGeometry ) {\n\n\t\tvar numFaces = dracoGeometry.num_faces();\n\t\tvar numIndices = numFaces * 3;\n\t\tvar byteLength = numIndices * 4;\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetTrianglesUInt32Array( dracoGeometry, byteLength, ptr );\n\t\tvar index = new Uint32Array( draco.HEAPF32.buffer, ptr, numIndices ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn { array: index, itemSize: 1 };\n\n\t}\n\n\tfunction decodeAttribute( draco, decoder, dracoGeometry, attributeName, attributeType, attribute ) {\n\n\t\tvar numComponents = attribute.num_components();\n\t\tvar numPoints = dracoGeometry.num_points();\n\t\tvar numValues = numPoints * numComponents;\n\t\tvar byteLength = numValues * attributeType.BYTES_PER_ELEMENT;\n\t\tvar dataType = getDracoDataType( draco, attributeType );\n\n\t\tvar ptr = draco._malloc( byteLength );\n\t\tdecoder.GetAttributeDataArrayForAllPoints( dracoGeometry, attribute, dataType, byteLength, ptr );\n\t\tvar array = new attributeType( draco.HEAPF32.buffer, ptr, numValues ).slice();\n\t\tdraco._free( ptr );\n\n\t\treturn {\n\t\t\tname: attributeName,\n\t\t\tarray: array,\n\t\t\titemSize: numComponents\n\t\t};\n\n\t}\n\n\tfunction getDracoDataType ( draco, attributeType ) {\n\n\t\tswitch ( attributeType ) {\n\n\t\t\tcase Float32Array: return draco.DT_FLOAT32;\n\t\t\tcase Int8Array: return draco.DT_INT8;\n\t\t\tcase Int16Array: return draco.DT_INT16;\n\t\t\tcase Int32Array: return draco.DT_INT32;\n\t\t\tcase Uint8Array: return draco.DT_UINT8;\n\t\t\tcase Uint16Array: return draco.DT_UINT16;\n\t\t\tcase Uint32Array: return draco.DT_UINT32;\n\n\t\t}\n\n\t}\n\n};\n\nDRACOLoader.taskCache = new WeakMap();\n\n/** Deprecated static methods */\n\n/** @deprecated */\nDRACOLoader.setDecoderPath = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.setDecoderConfig = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.releaseDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\n/** @deprecated */\nDRACOLoader.getDecoderModule = function () {\n\n\tconsole.warn( 'THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.' );\n\n};\n\nvar GLTFLoader = ( function () {\n\n\tfunction GLTFLoader( manager ) {\n\n\t\tLoader.call( this, manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ddsLoader = null;\n\t\tthis.ktx2Loader = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t}\n\n\tGLTFLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\t\tconstructor: GLTFLoader,\n\n\t\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\t\tvar scope = this;\n\n\t\t\tvar resourcePath;\n\n\t\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t} else if ( this.path !== '' ) {\n\n\t\t\t\tresourcePath = this.path;\n\n\t\t\t} else {\n\n\t\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t\t}\n\n\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tvar _onError = function ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t};\n\n\t\t\tvar loader = new FileLoader( this.manager );\n\n\t\t\tloader.setPath( this.path );\n\t\t\tloader.setResponseType( 'arraybuffer' );\n\t\t\tloader.setRequestHeader( this.requestHeader );\n\t\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\t\tloader.load( url, function ( data ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t\t}, _onError );\n\n\t\t\t\t} catch ( e ) {\n\n\t\t\t\t\t_onError( e );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, _onError );\n\n\t\t},\n\n\t\tsetDRACOLoader: function ( dracoLoader ) {\n\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetDDSLoader: function ( ddsLoader ) {\n\n\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tsetKTX2Loader: function ( ktx2Loader ) {\n\n\t\t\tthis.ktx2Loader = ktx2Loader;\n\t\t\treturn this;\n\n\t\t},\n\n\t\tregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tunregister: function ( callback ) {\n\n\t\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t},\n\n\t\tparse: function ( data, path, onLoad, onError ) {\n\n\t\t\tvar content;\n\t\t\tvar extensions = {};\n\t\t\tvar plugins = {};\n\n\t\t\tif ( typeof data === 'string' ) {\n\n\t\t\t\tcontent = data;\n\n\t\t\t} else {\n\n\t\t\t\tvar magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar json = JSON.parse( content );\n\n\t\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar parser = new GLTFParser( json, {\n\n\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\tmanager: this.manager,\n\t\t\t\tktx2Loader: this.ktx2Loader\n\n\t\t\t} );\n\n\t\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\t\tfor ( var i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\t\tvar plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t\t// Remove this workaround if we move all the existing\n\t\t\t\t// extension handlers to plugin system\n\t\t\t\textensions[ plugin.name ] = true;\n\n\t\t\t}\n\n\t\t\tif ( json.extensionsUsed ) {\n\n\t\t\t\tfor ( var i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\t\tvar extensionName = json.extensionsUsed[ i ];\n\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureDDSExtension( this.ddsLoader );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.setExtensions( extensions );\n\t\t\tparser.setPlugins( plugins );\n\t\t\tparser.parse( onLoad, onError );\n\n\t\t}\n\n\t} );\n\n\t/* GLTFREGISTRY */\n\n\tfunction GLTFRegistry() {\n\n\t\tvar objects = {};\n\n\t\treturn\t{\n\n\t\t\tget: function ( key ) {\n\n\t\t\t\treturn objects[ key ];\n\n\t\t\t},\n\n\t\t\tadd: function ( key, object ) {\n\n\t\t\t\tobjects[ key ] = object;\n\n\t\t\t},\n\n\t\t\tremove: function ( key ) {\n\n\t\t\t\tdelete objects[ key ];\n\n\t\t\t},\n\n\t\t\tremoveAll: function () {\n\n\t\t\t\tobjects = {};\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t/*********************************/\n\t/********** EXTENSIONS ***********/\n\t/*********************************/\n\n\tvar EXTENSIONS = {\n\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds'\n\t};\n\n\t/**\n\t * DDS Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t *\n\t */\n\tfunction GLTFTextureDDSExtension( ddsLoader ) {\n\n\t\tif ( ! ddsLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\tthis.ddsLoader = ddsLoader;\n\n\t}\n\n\t/**\n\t * Punctual Lights Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t */\n\tfunction GLTFLightsExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\tGLTFLightsExtension.prototype._markDefs = function () {\n\n\t\tvar parser = this.parser;\n\t\tvar nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tGLTFLightsExtension.prototype._loadLight = function ( lightIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar cacheKey = 'light:' + lightIndex;\n\t\tvar dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tvar json = parser.json;\n\t\tvar extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tvar lightDefs = extensions.lights || [];\n\t\tvar lightDef = lightDefs[ lightIndex ];\n\t\tvar lightNode;\n\n\t\tvar color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".' );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t};\n\n\tGLTFLightsExtension.prototype.createNodeAttachment = function ( nodeIndex ) {\n\n\t\tvar self = this;\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\t\tvar lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tvar lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Unlit Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t */\n\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\treturn MeshBasicMaterial;\n\n\t};\n\n\tGLTFMaterialsUnlitExtension.prototype.extendParams = function ( materialParams, materialDef, parser ) {\n\n\t\tvar pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Clearcoat Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t */\n\tfunction GLTFMaterialsClearcoatExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsClearcoatExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Transmission Materials Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n\t * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n\t */\n\tfunction GLTFMaterialsTransmissionExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tGLTFMaterialsTransmissionExtension.prototype.getMaterialType = function ( materialIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t};\n\n\tGLTFMaterialsTransmissionExtension.prototype.extendMaterialParams = function ( materialIndex, materialParams ) {\n\n\t\tvar parser = this.parser;\n\t\tvar materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tvar extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * BasisU Texture Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n\t * (draft PR https://github.com/KhronosGroup/glTF/pull/1751)\n\t */\n\tfunction GLTFTextureBasisUExtension( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tGLTFTextureBasisUExtension.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this.parser;\n\t\tvar json = parser.json;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar extension = textureDef.extensions[ this.name ];\n\t\tvar source = json.images[ extension.source ];\n\t\tvar loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\t/* BINARY EXTENSION */\n\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\tfunction GLTFBinaryExtension( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tvar headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tvar chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tvar chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkView.byteLength ) {\n\n\t\t\tvar chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tvar chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tvar contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * DRACO Mesh Compression Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t */\n\tfunction GLTFDracoMeshCompressionExtension( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function ( primitive, parser ) {\n\n\t\tvar json = this.json;\n\t\tvar dracoLoader = this.dracoLoader;\n\t\tvar bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tvar gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tvar threeAttributeMap = {};\n\t\tvar attributeNormalizedMap = {};\n\t\tvar attributeTypeMap = {};\n\n\t\tfor ( var attributeName in gltfAttributeMap ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( attributeName in primitive.attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tvar accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tvar normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Texture Transform Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t */\n\tfunction GLTFTextureTransformExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\tGLTFTextureTransformExtension.prototype.extendTexture = function ( texture, transform ) {\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t};\n\n\t/**\n\t * Specular-Glossiness Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t */\n\n\t/**\n\t * A sub class of StandardMaterial with some of the functionality\n\t * changed via the `onBeforeCompile` callback\n\t * @pailhead\n\t */\n\n\tfunction GLTFMeshStandardSGMaterial( params ) {\n\n\t\tMeshStandardMaterial.call( this );\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tvar specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tvar uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( var uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tGLTFMeshStandardSGMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\n\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\tGLTFMeshStandardSGMaterial.prototype.copy = function ( source ) {\n\n\t\tMeshStandardMaterial.prototype.copy.call( this, source );\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t};\n\n\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\treturn {\n\n\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\tspecularGlossinessParams: [\n\t\t\t\t'color',\n\t\t\t\t'map',\n\t\t\t\t'lightMap',\n\t\t\t\t'lightMapIntensity',\n\t\t\t\t'aoMap',\n\t\t\t\t'aoMapIntensity',\n\t\t\t\t'emissive',\n\t\t\t\t'emissiveIntensity',\n\t\t\t\t'emissiveMap',\n\t\t\t\t'bumpMap',\n\t\t\t\t'bumpScale',\n\t\t\t\t'normalMap',\n\t\t\t\t'normalMapType',\n\t\t\t\t'displacementMap',\n\t\t\t\t'displacementScale',\n\t\t\t\t'displacementBias',\n\t\t\t\t'specularMap',\n\t\t\t\t'specular',\n\t\t\t\t'glossinessMap',\n\t\t\t\t'glossiness',\n\t\t\t\t'alphaMap',\n\t\t\t\t'envMap',\n\t\t\t\t'envMapIntensity',\n\t\t\t\t'refractionRatio',\n\t\t\t],\n\n\t\t\tgetMaterialType: function () {\n\n\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t},\n\n\t\t\textendParams: function ( materialParams, materialDef, parser ) {\n\n\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\t\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t\t\t}\n\n\t\t\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t},\n\n\t\t\tcreateMaterial: function ( materialParams ) {\n\n\t\t\t\tvar material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\t\t\tmaterial.fog = true;\n\n\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\tmaterial.lightMap = null;\n\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\treturn material;\n\n\t\t\t},\n\n\t\t};\n\n\t}\n\n\t/**\n\t * Mesh Quantization Extension\n\t *\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t */\n\tfunction GLTFMeshQuantizationExtension() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n\t/*********************************/\n\t/********** INTERPOLATION ********/\n\t/*********************************/\n\n\t// Spline Interpolation\n\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\tfunction GLTFCubicSplineInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tGLTFCubicSplineInterpolant.prototype = Object.create( Interpolant.prototype );\n\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function ( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( var i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer;\n\t\tvar values = this.sampleValues;\n\t\tvar stride = this.valueSize;\n\n\t\tvar stride2 = stride * 2;\n\t\tvar stride3 = stride * 3;\n\n\t\tvar td = t1 - t0;\n\n\t\tvar p = ( t - t0 ) / td;\n\t\tvar pp = p * p;\n\t\tvar ppp = pp * p;\n\n\t\tvar offset1 = i1 * stride3;\n\t\tvar offset0 = offset1 - stride3;\n\n\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\tvar s3 = ppp - pp;\n\t\tvar s0 = 1 - s2;\n\t\tvar s1 = s3 - pp + p;\n\n\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\tfor ( var i = 0; i !== stride; i ++ ) {\n\n\t\t\tvar p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\t\tvar m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\tvar p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\t\tvar m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t}\n\n\t\treturn result;\n\n\t};\n\n\t/*********************************/\n\t/********** INTERNALS ************/\n\t/*********************************/\n\n\t/* CONSTANTS */\n\n\tvar WEBGL_CONSTANTS = {\n\t\tFLOAT: 5126,\n\t\t//FLOAT_MAT2: 35674,\n\t\tFLOAT_MAT3: 35675,\n\t\tFLOAT_MAT4: 35676,\n\t\tFLOAT_VEC2: 35664,\n\t\tFLOAT_VEC3: 35665,\n\t\tFLOAT_VEC4: 35666,\n\t\tLINEAR: 9729,\n\t\tREPEAT: 10497,\n\t\tSAMPLER_2D: 35678,\n\t\tPOINTS: 0,\n\t\tLINES: 1,\n\t\tLINE_LOOP: 2,\n\t\tLINE_STRIP: 3,\n\t\tTRIANGLES: 4,\n\t\tTRIANGLE_STRIP: 5,\n\t\tTRIANGLE_FAN: 6,\n\t\tUNSIGNED_BYTE: 5121,\n\t\tUNSIGNED_SHORT: 5123\n\t};\n\n\tvar WEBGL_COMPONENT_TYPES = {\n\t\t5120: Int8Array,\n\t\t5121: Uint8Array,\n\t\t5122: Int16Array,\n\t\t5123: Uint16Array,\n\t\t5125: Uint32Array,\n\t\t5126: Float32Array\n\t};\n\n\tvar WEBGL_FILTERS = {\n\t\t9728: NearestFilter,\n\t\t9729: LinearFilter,\n\t\t9984: NearestMipmapNearestFilter,\n\t\t9985: LinearMipmapNearestFilter,\n\t\t9986: NearestMipmapLinearFilter,\n\t\t9987: LinearMipmapLinearFilter\n\t};\n\n\tvar WEBGL_WRAPPINGS = {\n\t\t33071: ClampToEdgeWrapping,\n\t\t33648: MirroredRepeatWrapping,\n\t\t10497: RepeatWrapping\n\t};\n\n\tvar WEBGL_TYPE_SIZES = {\n\t\t'SCALAR': 1,\n\t\t'VEC2': 2,\n\t\t'VEC3': 3,\n\t\t'VEC4': 4,\n\t\t'MAT2': 4,\n\t\t'MAT3': 9,\n\t\t'MAT4': 16\n\t};\n\n\tvar ATTRIBUTES = {\n\t\tPOSITION: 'position',\n\t\tNORMAL: 'normal',\n\t\tTANGENT: 'tangent',\n\t\tTEXCOORD_0: 'uv',\n\t\tTEXCOORD_1: 'uv2',\n\t\tCOLOR_0: 'color',\n\t\tWEIGHTS_0: 'skinWeight',\n\t\tJOINTS_0: 'skinIndex',\n\t};\n\n\tvar PATH_PROPERTIES = {\n\t\tscale: 'scale',\n\t\ttranslation: 'position',\n\t\trotation: 'quaternion',\n\t\tweights: 'morphTargetInfluences'\n\t};\n\n\tvar INTERPOLATION = {\n\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\t\tLINEAR: InterpolateLinear,\n\t\tSTEP: InterpolateDiscrete\n\t};\n\n\tvar ALPHA_MODES = {\n\t\tOPAQUE: 'OPAQUE',\n\t\tMASK: 'MASK',\n\t\tBLEND: 'BLEND'\n\t};\n\n\t/* UTILITY FUNCTIONS */\n\n\tfunction resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t */\n\tfunction createDefaultMaterial( cache ) {\n\n\t\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\temissive: 0x000000,\n\t\t\t\tmetalness: 1,\n\t\t\t\troughness: 1,\n\t\t\t\ttransparent: false,\n\t\t\t\tdepthTest: true,\n\t\t\t\tside: FrontSide\n\t\t\t} );\n\n\t\t}\n\n\t\treturn cache[ 'DefaultMaterial' ];\n\n\t}\n\n\tfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\tfor ( var name in objectDef.extensions ) {\n\n\t\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * @param {Object3D|Material|BufferGeometry} object\n\t * @param {GLTF.definition} gltfDef\n\t */\n\tfunction assignExtrasToUserData( object, gltfDef ) {\n\n\t\tif ( gltfDef.extras !== undefined ) {\n\n\t\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t *\n\t * @param {BufferGeometry} geometry\n\t * @param {Array<GLTF.Target>} targets\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addMorphTargets( geometry, targets, parser ) {\n\n\t\tvar hasMorphPosition = false;\n\t\tvar hasMorphNormal = false;\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t\t}\n\n\t\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\t\tvar pendingPositionAccessors = [];\n\t\tvar pendingNormalAccessors = [];\n\n\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tvar target = targets[ i ];\n\n\t\t\tif ( hasMorphPosition ) {\n\n\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t\tif ( hasMorphNormal ) {\n\n\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( [\n\t\t\tPromise.all( pendingPositionAccessors ),\n\t\t\tPromise.all( pendingNormalAccessors )\n\t\t] ).then( function ( accessors ) {\n\n\t\t\tvar morphPositions = accessors[ 0 ];\n\t\t\tvar morphNormals = accessors[ 1 ];\n\n\t\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\treturn geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {Mesh} mesh\n\t * @param {GLTF.Mesh} meshDef\n\t */\n\tfunction updateMorphTargets( mesh, meshDef ) {\n\n\t\tmesh.updateMorphTargets();\n\n\t\tif ( meshDef.weights !== undefined ) {\n\n\t\t\tfor ( var i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\tfor ( var i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createPrimitiveKey( primitiveDef ) {\n\n\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\t\tvar geometryKey;\n\n\t\tif ( dracoExtension ) {\n\n\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t\t} else {\n\n\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t\t}\n\n\t\treturn geometryKey;\n\n\t}\n\n\tfunction createAttributesKey( attributes ) {\n\n\t\tvar attributesKey = '';\n\n\t\tvar keys = Object.keys( attributes ).sort();\n\n\t\tfor ( var i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t\t}\n\n\t\treturn attributesKey;\n\n\t}\n\n\t/* GLTF PARSER */\n\n\tfunction GLTFParser( json, options ) {\n\n\t\tthis.json = json || {};\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options || {};\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox/.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tGLTFParser.prototype.setExtensions = function ( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t};\n\n\tGLTFParser.prototype.setPlugins = function ( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t};\n\n\tGLTFParser.prototype.parse = function ( onLoad, onError ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( [\n\n\t\t\tthis.getDependencies( 'scene' ),\n\t\t\tthis.getDependencies( 'animation' ),\n\t\t\tthis.getDependencies( 'camera' ),\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tonLoad( result );\n\n\t\t} ).catch( onError );\n\n\t};\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\tGLTFParser.prototype._markDefs = function () {\n\n\t\tvar nodeDefs = this.json.nodes || [];\n\t\tvar skinDefs = this.json.skins || [];\n\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tvar joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( var i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tvar nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\tGLTFParser.prototype._addNodeRef = function ( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t};\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\tGLTFParser.prototype._getNodeRef = function ( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tvar ref = object.clone();\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t};\n\n\tGLTFParser.prototype._invokeOne = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t};\n\n\tGLTFParser.prototype._invokeAll = function ( func ) {\n\n\t\tvar extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tvar result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t};\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tGLTFParser.prototype.getDependency = function ( type, index ) {\n\n\t\tvar cacheKey = type + ':' + index;\n\t\tvar dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t};\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tGLTFParser.prototype.getDependencies = function ( type ) {\n\n\t\tvar dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tvar parser = this;\n\t\t\tvar defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBuffer = function ( bufferIndex ) {\n\n\t\tvar bufferDef = this.json.buffers[ bufferIndex ];\n\t\tvar loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tvar options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tGLTFParser.prototype.loadBufferView = function ( bufferViewIndex ) {\n\n\t\tvar bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tGLTFParser.prototype.loadAccessor = function ( accessorIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tvar pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tvar bufferView = bufferViews[ 0 ];\n\n\t\t\tvar itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\tvar array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tvar ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tvar ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tvar sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tvar sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tGLTFParser.prototype.loadTexture = function ( textureIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\tvar source;\n\n\t\tif ( textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ] ) {\n\n\t\t\tsource = json.images[ textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].source ];\n\n\t\t} else {\n\n\t\t\tsource = json.images[ textureDef.source ];\n\n\t\t}\n\n\t\tvar loader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tloader = options.manager.getHandler( source.uri );\n\n\t\t}\n\n\t\tif ( ! loader ) {\n\n\t\t\tloader = textureExtensions[ EXTENSIONS.MSFT_TEXTURE_DDS ]\n\t\t\t\t? parser.extensions[ EXTENSIONS.MSFT_TEXTURE_DDS ].ddsLoader\n\t\t\t\t: this.textureLoader;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t};\n\n\tGLTFParser.prototype.loadTextureImage = function ( textureIndex, source, loader ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar options = this.options;\n\n\t\tvar textureDef = json.textures[ textureIndex ];\n\n\t\tvar URL = self.URL || self.webkitURL;\n\n\t\tvar sourceURI = source.uri;\n\t\tvar isObjectURL = false;\n\t\tvar hasAlpha = true;\n\n\t\tif ( source.mimeType === 'image/jpeg' ) hasAlpha = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tif ( source.mimeType === 'image/png' ) {\n\n\t\t\t\t\t// Inspect the PNG 'IHDR' chunk to determine whether the image could have an\n\t\t\t\t\t// alpha channel. This check is conservative  the image could have an alpha\n\t\t\t\t\t// channel with all values == 1, and the indexed type (colorType == 3) only\n\t\t\t\t\t// sometimes contains alpha.\n\t\t\t\t\t//\n\t\t\t\t\t// https://en.wikipedia.org/wiki/Portable_Network_Graphics#File_header\n\t\t\t\t\tvar colorType = new DataView( bufferView, 25, 1 ).getUint8( 0, false );\n\t\t\t\t\thasAlpha = colorType === 6 || colorType === 4 || colorType === 3;\n\n\t\t\t\t}\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tvar blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tvar onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tresolve( new CanvasTexture( imageBitmap ) );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\t// When there is definitely no alpha channel in the texture, set RGBFormat to save space.\n\t\t\tif ( ! hasAlpha ) texture.format = RGBFormat;\n\n\t\t\tvar samplers = json.samplers || {};\n\t\t\tvar sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, {\n\t\t\t\ttype: 'textures',\n\t\t\t\tindex: textureIndex\n\t\t\t} );\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise}\n\t */\n\tGLTFParser.prototype.assignTexture = function ( materialParams, mapName, mapDef ) {\n\n\t\tvar parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tvar gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accomodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tGLTFParser.prototype.assignFinalMaterial = function ( mesh ) {\n\n\t\tvar geometry = mesh.geometry;\n\t\tvar material = mesh.material;\n\n\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\tvar useMorphTargets = Object.keys( geometry.morphAttributes ).length > 0;\n\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tvar pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tvar lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets ) {\n\n\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useSkinning ) cacheKey += 'skinning:';\n\t\t\tif ( useVertexTangents ) cacheKey += 'vertex-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\t\t\tif ( useMorphTargets ) cacheKey += 'morph-targets:';\n\t\t\tif ( useMorphNormals ) cacheKey += 'morph-normals:';\n\n\t\t\tvar cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useSkinning ) cachedMaterial.skinning = true;\n\t\t\t\tif ( useVertexTangents ) cachedMaterial.vertexTangents = true;\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\t\t\t\tif ( useMorphTargets ) cachedMaterial.morphTargets = true;\n\t\t\t\tif ( useMorphNormals ) cachedMaterial.morphNormals = true;\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\tif ( material.normalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalScale && ! useVertexTangents ) {\n\n\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t};\n\n\tGLTFParser.prototype.getMaterialType = function ( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tGLTFParser.prototype.loadMaterial = function ( materialIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar materialDef = json.materials[ materialIndex ];\n\n\t\tvar materialType;\n\t\tvar materialParams = {};\n\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\tvar pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tvar sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tvar kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tmaterialParams.normalScale.set( materialDef.normalTexture.scale, materialDef.normalTexture.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tvar material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { type: 'materials', index: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t};\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tGLTFParser.prototype.createUniqueName = function ( originalName ) {\n\n\t\tvar name = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tfor ( var i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = originalName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t};\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t */\n\tfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar box = new Box3();\n\n\t\tif ( attributes.POSITION !== undefined ) {\n\n\t\t\tvar accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\t\tvar min = accessor.min;\n\t\t\tvar max = accessor.max;\n\n\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\tbox.set(\n\t\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar targets = primitiveDef.targets;\n\n\t\tif ( targets !== undefined ) {\n\n\t\t\tvar maxDisplacement = new Vector3();\n\t\t\tvar vector = new Vector3();\n\n\t\t\tfor ( var i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\t\tvar accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\tbox.expandByVector( maxDisplacement );\n\n\t\t}\n\n\t\tgeometry.boundingBox = box;\n\n\t\tvar sphere = new Sphere();\n\n\t\tbox.getCenter( sphere.center );\n\t\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\t\tgeometry.boundingSphere = sphere;\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {GLTF.Primitive} primitiveDef\n\t * @param {GLTFParser} parser\n\t * @return {Promise<BufferGeometry>}\n\t */\n\tfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\t\tvar attributes = primitiveDef.attributes;\n\n\t\tvar pending = [];\n\n\t\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t\t.then( function ( accessor ) {\n\n\t\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tfor ( var gltfAttributeName in attributes ) {\n\n\t\t\tvar threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t\t}\n\n\t\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\t\tvar accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\t\tgeometry.setIndex( accessor );\n\n\t\t\t} );\n\n\t\t\tpending.push( accessor );\n\n\t\t}\n\n\t\tassignExtrasToUserData( geometry, primitiveDef );\n\n\t\tcomputeBounds( geometry, primitiveDef, parser );\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t\t: geometry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * @param {BufferGeometry} geometry\n\t * @param {Number} drawMode\n\t * @return {BufferGeometry}\n\t */\n\tfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\t\tvar index = geometry.getIndex();\n\n\t\t// generate index if not present\n\n\t\tif ( index === null ) {\n\n\t\t\tvar indices = [];\n\n\t\t\tvar position = geometry.getAttribute( 'position' );\n\n\t\t\tif ( position !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < position.count; i ++ ) {\n\n\t\t\t\t\tindices.push( i );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex( indices );\n\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar numberOfTriangles = index.count - 2;\n\t\tvar newIndices = [];\n\n\t\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\tfor ( var i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\tfor ( var i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t\t}\n\n\t\t// build final geometry\n\n\t\tvar newGeometry = geometry.clone();\n\t\tnewGeometry.setIndex( newIndices );\n\n\t\treturn newGeometry;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tGLTFParser.prototype.loadGeometries = function ( primitives ) {\n\n\t\tvar parser = this;\n\t\tvar extensions = this.extensions;\n\t\tvar cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar primitive = primitives[ i ];\n\t\t\tvar cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tvar cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tvar geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tGLTFParser.prototype.loadMesh = function ( meshIndex ) {\n\n\t\tvar parser = this;\n\t\tvar json = this.json;\n\n\t\tvar meshDef = json.meshes[ meshIndex ];\n\t\tvar primitives = meshDef.primitives;\n\n\t\tvar pending = [];\n\n\t\tfor ( var i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tvar material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tvar materials = results.slice( 0, results.length - 1 );\n\t\t\tvar geometries = results[ results.length - 1 ];\n\n\t\t\tvar meshes = [];\n\n\t\t\tfor ( var i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tvar geometry = geometries[ i ];\n\t\t\t\tvar primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tvar mesh;\n\n\t\t\t\tvar material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tif ( geometries.length > 1 ) mesh.name += '_' + i;\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tvar group = new Group();\n\n\t\t\tfor ( var i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tGLTFParser.prototype.loadCamera = function ( cameraIndex ) {\n\n\t\tvar camera;\n\t\tvar cameraDef = this.json.cameras[ cameraIndex ];\n\t\tvar params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tGLTFParser.prototype.loadSkin = function ( skinIndex ) {\n\n\t\tvar skinDef = this.json.skins[ skinIndex ];\n\n\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tGLTFParser.prototype.loadAnimation = function ( animationIndex ) {\n\n\t\tvar json = this.json;\n\n\t\tvar animationDef = json.animations[ animationIndex ];\n\n\t\tvar pendingNodes = [];\n\t\tvar pendingInputAccessors = [];\n\t\tvar pendingOutputAccessors = [];\n\t\tvar pendingSamplers = [];\n\t\tvar pendingTargets = [];\n\n\t\tfor ( var i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tvar channel = animationDef.channels[ i ];\n\t\t\tvar sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tvar target = channel.target;\n\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tvar nodes = dependencies[ 0 ];\n\t\t\tvar inputAccessors = dependencies[ 1 ];\n\t\t\tvar outputAccessors = dependencies[ 2 ];\n\t\t\tvar samplers = dependencies[ 3 ];\n\t\t\tvar targets = dependencies[ 4 ];\n\n\t\t\tvar tracks = [];\n\n\t\t\tfor ( var i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tvar node = nodes[ i ];\n\t\t\t\tvar inputAccessor = inputAccessors[ i ];\n\t\t\t\tvar outputAccessor = outputAccessors[ i ];\n\t\t\t\tvar sampler = samplers[ i ];\n\t\t\t\tvar target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tvar targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.isMesh === true && object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tvar scale;\n\n\t\t\t\t\tif ( outputArray.constructor === Int8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint8Array ) {\n\n\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t} else if ( outputArray.constructor == Int16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t} else if ( outputArray.constructor === Uint16Array ) {\n\n\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported output accessor component type.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( var j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tGLTFParser.prototype.loadNode = function ( nodeIndex ) {\n\n\t\tvar json = this.json;\n\t\tvar extensions = this.extensions;\n\t\tvar parser = this;\n\n\t\tvar nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tvar nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tvar pending = [];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\t\t\tvar node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\t\t\tfor ( var i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tvar node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( var i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tparser.associations.set( node, { type: 'nodes', index: nodeIndex } );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t};\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tGLTFParser.prototype.loadScene = function () {\n\n\t\t// scene node hierachy builder\n\n\t\tfunction buildNodeHierachy( nodeId, parentObject, json, parser ) {\n\n\t\t\tvar nodeDef = json.nodes[ nodeId ];\n\n\t\t\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\t\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t\t\t// build skeleton here as well\n\n\t\t\t\tvar skinEntry;\n\n\t\t\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\tfor ( var i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all( pendingJoints );\n\n\t\t\t\t} ).then( function ( jointNodes ) {\n\n\t\t\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar jointNode = jointNodes[ j ];\n\n\t\t\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn node;\n\n\t\t\t\t} );\n\n\t\t\t} ).then( function ( node ) {\n\n\t\t\t\t// build node hierachy\n\n\t\t\t\tparentObject.add( node );\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif ( nodeDef.children ) {\n\n\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\tfor ( var i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar child = children[ i ];\n\t\t\t\t\t\tpending.push( buildNodeHierachy( child, node, json, parser ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all( pending );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn function loadScene( sceneIndex ) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar sceneDef = this.json.scenes[ sceneIndex ];\n\t\t\tvar parser = this;\n\n\t\t\t// Loader returns Group, not Scene.\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\tvar scene = new Group();\n\t\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\tvar pending = [];\n\n\t\t\tfor ( var i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\t\tpending.push( buildNodeHierachy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t\treturn scene;\n\n\t\t\t} );\n\n\t\t};\n\n\t}();\n\n\treturn GLTFLoader;\n\n} )();\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$1, _b;\nconst $retainerCount = Symbol('retainerCount');\nconst $recentlyUsed = Symbol('recentlyUsed');\nconst $evict = Symbol('evict');\nconst $evictionThreshold = Symbol('evictionThreshold');\nconst $cache = Symbol('cache');\n/**\n * The CacheEvictionPolicy manages the lifecycle for items in a cache,\n * evicting any items outside some threshold bounds in \"recently used\" order,\n * if they are evictable.\n *\n * Items are considered cached as they are retained. When all retainers\n * of an item release it, that item is considered evictable.\n */\nclass CacheEvictionPolicy {\n    constructor(cache, evictionThreshold = 5) {\n        this[_a$1] = new Map();\n        this[_b] = [];\n        this[$cache] = cache;\n        this[$evictionThreshold] = evictionThreshold;\n    }\n    /**\n     * The eviction threshold is the maximum number of items to hold\n     * in cache indefinitely. Items within the threshold (in recently\n     * used order) will continue to be cached even if they have zero\n     * retainers.\n     */\n    set evictionThreshold(value) {\n        this[$evictionThreshold] = value;\n        this[$evict]();\n    }\n    get evictionThreshold() {\n        return this[$evictionThreshold];\n    }\n    /**\n     * A reference to the cache that operates under this policy\n     */\n    get cache() {\n        return this[$cache];\n    }\n    /**\n     * Given an item key, returns the number of retainers of that item\n     */\n    retainerCount(key) {\n        return this[$retainerCount].get(key) || 0;\n    }\n    /**\n     * Resets the internal tracking of cache item retainers. Use only in cases\n     * where it is certain that all retained cache items have been accounted for!\n     */\n    reset() {\n        this[$retainerCount].clear();\n        this[$recentlyUsed] = [];\n    }\n    /**\n     * Mark a given cache item as retained, where the item is represented\n     * by its key. An item can have any number of retainers.\n     */\n    retain(key) {\n        if (!this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, 0);\n        }\n        this[$retainerCount].set(key, this[$retainerCount].get(key) + 1);\n        const recentlyUsedIndex = this[$recentlyUsed].indexOf(key);\n        if (recentlyUsedIndex !== -1) {\n            this[$recentlyUsed].splice(recentlyUsedIndex, 1);\n        }\n        this[$recentlyUsed].unshift(key);\n        // Evict, in case retaining a new item pushed an evictable item beyond the\n        // eviction threshold\n        this[$evict]();\n    }\n    /**\n     * Mark a given cache item as released by one of its retainers, where the item\n     * is represented by its key. When all retainers of an item have released it,\n     * the item is considered evictable.\n     */\n    release(key) {\n        if (this[$retainerCount].has(key)) {\n            this[$retainerCount].set(key, Math.max(this[$retainerCount].get(key) - 1, 0));\n        }\n        this[$evict]();\n    }\n    [(_a$1 = $retainerCount, _b = $recentlyUsed, $evict)]() {\n        if (this[$recentlyUsed].length < this[$evictionThreshold]) {\n            return;\n        }\n        for (let i = this[$recentlyUsed].length - 1; i >= this[$evictionThreshold]; --i) {\n            const key = this[$recentlyUsed][i];\n            const retainerCount = this[$retainerCount].get(key);\n            if (retainerCount === 0) {\n                this[$cache].delete(key);\n                this[$recentlyUsed].splice(i, 1);\n            }\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$2, _b$1;\n/**\n * A helper to Promise-ify a Three.js GLTFLoader\n */\nconst loadWithLoader = (url, loader, progressCallback = () => { }) => {\n    const onProgress = (event) => {\n        const fraction = event.loaded / event.total;\n        progressCallback(Math.max(0, Math.min(1, isFinite(fraction) ? fraction : 1)));\n    };\n    return new Promise((resolve, reject) => {\n        loader.load(url, resolve, onProgress, reject);\n    });\n};\nconst cache = new Map();\nconst preloaded = new Map();\nlet dracoDecoderLocation;\nconst dracoLoader = new DRACOLoader();\nconst $loader = Symbol('loader');\nconst $evictionPolicy = Symbol('evictionPolicy');\nconst $GLTFInstance = Symbol('GLTFInstance');\nclass CachingGLTFLoader extends EventDispatcher {\n    constructor(GLTFInstance) {\n        super();\n        this[_b$1] = new GLTFLoader();\n        this[$GLTFInstance] = GLTFInstance;\n        this[$loader].setDRACOLoader(dracoLoader);\n    }\n    static setDRACODecoderLocation(url) {\n        dracoDecoderLocation = url;\n        dracoLoader.setDecoderPath(url);\n    }\n    static getDRACODecoderLocation() {\n        return dracoDecoderLocation;\n    }\n    static get cache() {\n        return cache;\n    }\n    /** @nocollapse */\n    static clearCache() {\n        cache.forEach((_value, url) => {\n            this.delete(url);\n        });\n        this[$evictionPolicy].reset();\n    }\n    static has(url) {\n        return cache.has(url);\n    }\n    /** @nocollapse */\n    static async delete(url) {\n        if (!this.has(url)) {\n            return;\n        }\n        const gltfLoads = cache.get(url);\n        preloaded.delete(url);\n        cache.delete(url);\n        const gltf = await gltfLoads;\n        // Dispose of the cached glTF's materials and geometries:\n        gltf.dispose();\n    }\n    /**\n     * Returns true if the model that corresponds to the specified url is\n     * available in our local cache.\n     */\n    static hasFinishedLoading(url) {\n        return !!preloaded.get(url);\n    }\n    get [(_a$2 = $evictionPolicy, _b$1 = $loader, $evictionPolicy)]() {\n        return this.constructor[$evictionPolicy];\n    }\n    /**\n     * Preloads a glTF, populating the cache. Returns a promise that resolves\n     * when the cache is populated.\n     */\n    async preload(url, element, progressCallback = () => { }) {\n        this.dispatchEvent({ type: 'preload', element: element, src: url });\n        if (!cache.has(url)) {\n            const rawGLTFLoads = loadWithLoader(url, this[$loader], (progress) => {\n                progressCallback(progress * 0.8);\n            });\n            const GLTFInstance = this[$GLTFInstance];\n            const gltfInstanceLoads = rawGLTFLoads\n                .then((rawGLTF) => {\n                return GLTFInstance.prepare(rawGLTF);\n            })\n                .then((preparedGLTF) => {\n                progressCallback(0.9);\n                return new GLTFInstance(preparedGLTF);\n            });\n            cache.set(url, gltfInstanceLoads);\n        }\n        await cache.get(url);\n        preloaded.set(url, true);\n        if (progressCallback) {\n            progressCallback(1.0);\n        }\n    }\n    /**\n     * Loads a glTF from the specified url and resolves a unique clone of the\n     * glTF. If the glTF has already been loaded, makes a clone of the cached\n     * copy.\n     */\n    async load(url, element, progressCallback = () => { }) {\n        await this.preload(url, element, progressCallback);\n        const gltf = await cache.get(url);\n        const clone = await gltf.clone();\n        this[$evictionPolicy].retain(url);\n        // Patch dispose so that we can properly account for instance use\n        // in the caching layer:\n        clone.dispose = (() => {\n            const originalDispose = clone.dispose;\n            let disposed = false;\n            return () => {\n                if (disposed) {\n                    return;\n                }\n                disposed = true;\n                originalDispose.apply(clone);\n                this[$evictionPolicy].release(url);\n            };\n        })();\n        return clone;\n    }\n}\nCachingGLTFLoader[_a$2] = new CacheEvictionPolicy(CachingGLTFLoader);\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$3;\nconst SETTLING_TIME = 10000; // plenty long enough\nconst DECAY_MILLISECONDS = 50;\nconst NATURAL_FREQUENCY = 1 / DECAY_MILLISECONDS;\nconst NIL_SPEED = 0.0002 * NATURAL_FREQUENCY;\nconst $velocity = Symbol('velocity');\n/**\n * The Damper class is a generic second-order critically damped system that does\n * one linear step of the desired length of time. The only parameter is\n * DECAY_MILLISECONDS, which should be adjustable: TODO(#580). This common\n * parameter makes all states converge at the same rate regardless of scale.\n * xNormalization is a number to provide the rough scale of x, such that\n * NIL_SPEED clamping also happens at roughly the same convergence for all\n * states.\n */\nclass Damper {\n    constructor() {\n        this[_a$3] = 0;\n    }\n    update(x, xGoal, timeStepMilliseconds, xNormalization) {\n        if (x == null || xNormalization === 0) {\n            return xGoal;\n        }\n        if (x === xGoal && this[$velocity] === 0) {\n            return xGoal;\n        }\n        if (timeStepMilliseconds < 0) {\n            return x;\n        }\n        // Exact solution to a critically damped second-order system, where:\n        // acceleration = NATURAL_FREQUENCY * NATURAL_FREQUENCY * (xGoal - x) -\n        // 2 * NATURAL_FREQUENCY * this[$velocity];\n        const deltaX = (x - xGoal);\n        const intermediateVelocity = this[$velocity] + NATURAL_FREQUENCY * deltaX;\n        const intermediateX = deltaX + timeStepMilliseconds * intermediateVelocity;\n        const decay = Math.exp(-NATURAL_FREQUENCY * timeStepMilliseconds);\n        const newVelocity = (intermediateVelocity - NATURAL_FREQUENCY * intermediateX) * decay;\n        const acceleration = -NATURAL_FREQUENCY * (newVelocity + intermediateVelocity * decay);\n        if (Math.abs(newVelocity) < NIL_SPEED * Math.abs(xNormalization) &&\n            acceleration * deltaX >= 0) {\n            // This ensures the controls settle and stop calling this function instead\n            // of asymptotically approaching their goal.\n            this[$velocity] = 0;\n            return xGoal;\n        }\n        else {\n            this[$velocity] = newVelocity;\n            return xGoal + intermediateX * decay;\n        }\n    }\n}\n_a$3 = $velocity;\n\nvar CSS2DObject = function ( element ) {\n\n\tObject3D.call( this );\n\n\tthis.element = element || document.createElement( 'div' );\n\n\tthis.element.style.position = 'absolute';\n\n\tthis.addEventListener( 'removed', function () {\n\n\t\tthis.traverse( function ( object ) {\n\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\n\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n};\n\nCSS2DObject.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: CSS2DObject,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.element = source.element.cloneNode( true );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n//\n\nvar CSS2DRenderer = function () {\n\n\tvar _this = this;\n\n\tvar _width, _height;\n\tvar _widthHalf, _heightHalf;\n\n\tvar vector = new Vector3();\n\tvar viewMatrix = new Matrix4();\n\tvar viewProjectionMatrix = new Matrix4();\n\n\tvar cache = {\n\t\tobjects: new WeakMap()\n\t};\n\n\tvar domElement = document.createElement( 'div' );\n\tdomElement.style.overflow = 'hidden';\n\n\tthis.domElement = domElement;\n\n\tthis.getSize = function () {\n\n\t\treturn {\n\t\t\twidth: _width,\n\t\t\theight: _height\n\t\t};\n\n\t};\n\n\tthis.setSize = function ( width, height ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_widthHalf = _width / 2;\n\t\t_heightHalf = _height / 2;\n\n\t\tdomElement.style.width = width + 'px';\n\t\tdomElement.style.height = height + 'px';\n\n\t};\n\n\tvar renderObject = function ( object, scene, camera ) {\n\n\t\tif ( object instanceof CSS2DObject ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera );\n\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\n\n\t\t\tvar element = object.element;\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\n\n\t\t\telement.style.WebkitTransform = style;\n\t\t\telement.style.MozTransform = style;\n\t\t\telement.style.oTransform = style;\n\t\t\telement.style.transform = style;\n\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\n\n\t\t\tvar objectData = {\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\n\t\t\t};\n\n\t\t\tcache.objects.set( object, objectData );\n\n\t\t\tif ( element.parentNode !== domElement ) {\n\n\t\t\t\tdomElement.appendChild( element );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera );\n\n\t\t}\n\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( object.children[ i ], scene, camera );\n\n\t\t}\n\n\t};\n\n\tvar getDistanceToSquared = function () {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\n\t\treturn function ( object1, object2 ) {\n\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\n\n\t\t\treturn a.distanceToSquared( b );\n\n\t\t};\n\n\t}();\n\n\tvar filterAndFlatten = function ( scene ) {\n\n\t\tvar result = [];\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object instanceof CSS2DObject ) result.push( object );\n\n\t\t} );\n\n\t\treturn result;\n\n\t};\n\n\tvar zOrder = function ( scene ) {\n\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\n\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\n\n\t\t\treturn distanceA - distanceB;\n\n\t\t} );\n\n\t\tvar zMax = sorted.length;\n\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\n\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\n\n\t\t}\n\n\t};\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\n\n\t\trenderObject( scene, scene, camera );\n\t\tzOrder( scene );\n\n\t};\n\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst numberNode = (value, unit) => ({ type: 'number', number: value, unit });\n/**\n * Given a string representing a comma-separated set of CSS-like expressions,\n * parses and returns an array of ASTs that correspond to those expressions.\n *\n * Currently supported syntax includes:\n *\n *  - functions (top-level and nested)\n *  - calc() arithmetic operators\n *  - numbers with units\n *  - hexidecimal-encoded colors in 3, 6 or 8 digit form\n *  - idents\n *\n * All syntax is intended to match the parsing rules and semantics of the actual\n * CSS spec as closely as possible.\n *\n * @see https://www.w3.org/TR/CSS2/\n * @see https://www.w3.org/TR/css-values-3/\n */\nconst parseExpressions = (() => {\n    const cache = {};\n    const MAX_PARSE_ITERATIONS = 1000; // Arbitrarily large\n    return (inputString) => {\n        const cacheKey = inputString;\n        if (cacheKey in cache) {\n            return cache[cacheKey];\n        }\n        const expressions = [];\n        let parseIterations = 0;\n        while (inputString) {\n            if (++parseIterations > MAX_PARSE_ITERATIONS) {\n                // Avoid a potentially infinite loop due to typos:\n                inputString = '';\n                break;\n            }\n            const expressionParseResult = parseExpression(inputString);\n            const expression = expressionParseResult.nodes[0];\n            if (expression == null || expression.terms.length === 0) {\n                break;\n            }\n            expressions.push(expression);\n            inputString = expressionParseResult.remainingInput;\n        }\n        return cache[cacheKey] = expressions;\n    };\n})();\n/**\n * Parse a single expression. For the purposes of our supported syntax, an\n * expression is the set of semantically meaningful terms that appear before the\n * next comma, or between the parens of a function invokation.\n */\nconst parseExpression = (() => {\n    const IS_IDENT_RE = /^(\\-\\-|[a-z\\u0240-\\uffff])/i;\n    const IS_OPERATOR_RE = /^([\\*\\+\\/]|[\\-]\\s)/i;\n    const IS_EXPRESSION_END_RE = /^[\\),]/;\n    const FUNCTION_ARGUMENTS_FIRST_TOKEN = '(';\n    const HEX_FIRST_TOKEN = '#';\n    return (inputString) => {\n        const terms = [];\n        while (inputString.length) {\n            inputString = inputString.trim();\n            if (IS_EXPRESSION_END_RE.test(inputString)) {\n                break;\n            }\n            else if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                inputString = remainingInput;\n                terms.push({\n                    type: 'function',\n                    name: { type: 'ident', value: 'calc' },\n                    arguments: nodes\n                });\n            }\n            else if (IS_IDENT_RE.test(inputString)) {\n                const identParseResult = parseIdent(inputString);\n                const identNode = identParseResult.nodes[0];\n                inputString = identParseResult.remainingInput;\n                if (inputString[0] === FUNCTION_ARGUMENTS_FIRST_TOKEN) {\n                    const { nodes, remainingInput } = parseFunctionArguments(inputString);\n                    terms.push({ type: 'function', name: identNode, arguments: nodes });\n                    inputString = remainingInput;\n                }\n                else {\n                    terms.push(identNode);\n                }\n            }\n            else if (IS_OPERATOR_RE.test(inputString)) {\n                // Operators are always a single character, so just pluck them out:\n                terms.push({ type: 'operator', value: inputString[0] });\n                inputString = inputString.slice(1);\n            }\n            else {\n                const { nodes, remainingInput } = inputString[0] === HEX_FIRST_TOKEN ?\n                    parseHex(inputString) :\n                    parseNumber(inputString);\n                // The remaining string may not have had any meaningful content. Exit\n                // early if this is the case:\n                if (nodes.length === 0) {\n                    break;\n                }\n                terms.push(nodes[0]);\n                inputString = remainingInput;\n            }\n        }\n        return { nodes: [{ type: 'expression', terms }], remainingInput: inputString };\n    };\n})();\n/**\n * An ident is something like a function name or the keyword \"auto\".\n */\nconst parseIdent = (() => {\n    const NOT_IDENT_RE = /[^a-z^0-9^_^\\-^\\u0240-\\uffff]/i;\n    return (inputString) => {\n        const match = inputString.match(NOT_IDENT_RE);\n        const ident = match == null ? inputString : inputString.substr(0, match.index);\n        const remainingInput = match == null ? '' : inputString.substr(match.index);\n        return { nodes: [{ type: 'ident', value: ident }], remainingInput };\n    };\n})();\n/**\n * Parses a number. A number value can be expressed with an integer or\n * non-integer syntax, and usually includes a unit (but does not strictly\n * require one for our purposes).\n */\nconst parseNumber = (() => {\n    // @see https://www.w3.org/TR/css-syntax/#number-token-diagram\n    const VALUE_RE = /[\\+\\-]?(\\d+[\\.]\\d+|\\d+|[\\.]\\d+)([eE][\\+\\-]?\\d+)?/;\n    const UNIT_RE = /^[a-z%]+/i;\n    const ALLOWED_UNITS = /^(m|mm|cm|rad|deg|[%])$/;\n    return (inputString) => {\n        const valueMatch = inputString.match(VALUE_RE);\n        const value = valueMatch == null ? '0' : valueMatch[0];\n        inputString = value == null ? inputString : inputString.slice(value.length);\n        const unitMatch = inputString.match(UNIT_RE);\n        let unit = unitMatch != null && unitMatch[0] !== '' ? unitMatch[0] : null;\n        const remainingInput = unitMatch == null ? inputString : inputString.slice(unit.length);\n        if (unit != null && !ALLOWED_UNITS.test(unit)) {\n            unit = null;\n        }\n        return {\n            nodes: [{\n                    type: 'number',\n                    number: parseFloat(value) || 0,\n                    unit: unit\n                }],\n            remainingInput\n        };\n    };\n})();\n/**\n * Parses a hexidecimal-encoded color in 3, 6 or 8 digit form.\n */\nconst parseHex = (() => {\n    // TODO(cdata): right now we don't actually enforce the number of digits\n    const HEX_RE = /^[a-f0-9]*/i;\n    return (inputString) => {\n        inputString = inputString.slice(1).trim();\n        const hexMatch = inputString.match(HEX_RE);\n        const nodes = hexMatch == null ? [] : [{ type: 'hex', value: hexMatch[0] }];\n        return {\n            nodes,\n            remainingInput: hexMatch == null ? inputString :\n                inputString.slice(hexMatch[0].length)\n        };\n    };\n})();\n/**\n * Parses arguments passed to a function invokation (e.g., the expressions\n * within a matched set of parens).\n */\nconst parseFunctionArguments = (inputString) => {\n    const expressionNodes = [];\n    // Consume the opening paren\n    inputString = inputString.slice(1).trim();\n    while (inputString.length) {\n        const expressionParseResult = parseExpression(inputString);\n        expressionNodes.push(expressionParseResult.nodes[0]);\n        inputString = expressionParseResult.remainingInput.trim();\n        if (inputString[0] === ',') {\n            inputString = inputString.slice(1).trim();\n        }\n        else if (inputString[0] === ')') {\n            // Consume the closing paren and stop parsing\n            inputString = inputString.slice(1);\n            break;\n        }\n    }\n    return { nodes: expressionNodes, remainingInput: inputString };\n};\nconst $visitedTypes = Symbol('visitedTypes');\n/**\n * An ASTWalker walks an array of ASTs such as the type produced by\n * parseExpressions and invokes a callback for a configured set of nodes that\n * the user wishes to \"visit\" during the walk.\n */\nclass ASTWalker {\n    constructor(visitedTypes) {\n        this[$visitedTypes] = visitedTypes;\n    }\n    /**\n     * Walk the given set of ASTs, and invoke the provided callback for nodes that\n     * match the filtered set that the ASTWalker was constructed with.\n     */\n    walk(ast, callback) {\n        const remaining = ast.slice();\n        while (remaining.length) {\n            const next = remaining.shift();\n            if (this[$visitedTypes].indexOf(next.type) > -1) {\n                callback(next);\n            }\n            switch (next.type) {\n                case 'expression':\n                    remaining.unshift(...next.terms);\n                    break;\n                case 'function':\n                    remaining.unshift(next.name, ...next.arguments);\n                    break;\n            }\n        }\n    }\n}\nconst ZERO = Object.freeze({ type: 'number', number: 0, unit: null });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Ensures that a given number is expressed in radians. If the number is already\n * in radians, does nothing. If the value is in degrees, converts it to radians.\n * If the value has no specified unit, the unit is assumed to be radians. If the\n * value is not in radians or degrees, the value is resolved as 0 radians.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst degreesToRadians = (numberNode, fallbackRadianValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackRadianValue;\n        unit = 'rad';\n    }\n    else if (numberNode.unit === 'rad' || numberNode.unit == null) {\n        return numberNode;\n    }\n    const valueIsDegrees = unit === 'deg' && number != null;\n    const value = valueIsDegrees ? number : 0;\n    const radians = value * Math.PI / 180;\n    return { type: 'number', number: radians, unit: 'rad' };\n};\n/**\n * Converts a given length to meters. Currently supported input units are\n * meters, centimeters and millimeters.\n *\n * Also accepts a second argument that is a default value to use if the input\n * numberNode number is NaN or Infinity.\n */\nconst lengthToBaseMeters = (numberNode, fallbackMeterValue = 0) => {\n    let { number, unit } = numberNode;\n    if (!isFinite(number)) {\n        number = fallbackMeterValue;\n        unit = 'm';\n    }\n    else if (numberNode.unit === 'm') {\n        return numberNode;\n    }\n    let scale;\n    switch (unit) {\n        default:\n            scale = 1;\n            break;\n        case 'cm':\n            scale = 1 / 100;\n            break;\n        case 'mm':\n            scale = 1 / 1000;\n            break;\n    }\n    const value = scale * number;\n    return { type: 'number', number: value, unit: 'm' };\n};\n/**\n * Normalizes the unit of a given input number so that it is expressed in a\n * preferred unit. For length nodes, the return value will be expressed in\n * meters. For angle nodes, the return value will be expressed in radians.\n *\n * Also takes a fallback number that is used when the number value is not a\n * valid number or when the unit of the given number cannot be normalized.\n */\nconst normalizeUnit = (() => {\n    const identity = (node) => node;\n    const unitNormalizers = {\n        'rad': identity,\n        'deg': degreesToRadians,\n        'm': identity,\n        'mm': lengthToBaseMeters,\n        'cm': lengthToBaseMeters\n    };\n    return (node, fallback = ZERO) => {\n        let { number, unit } = node;\n        if (!isFinite(number)) {\n            number = fallback.number;\n            unit = fallback.unit;\n        }\n        if (unit == null) {\n            return node;\n        }\n        const normalize = unitNormalizers[unit];\n        if (normalize == null) {\n            return fallback;\n        }\n        return normalize(node);\n    };\n})();\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The Hotspot object is a reference-counted slot. If decrement() returns true,\n * it should be removed from the tree so it can be garbage-collected.\n */\nclass Hotspot extends CSS2DObject {\n    constructor(config) {\n        super(document.createElement('div'));\n        this.normal = new Vector3(0, 1, 0);\n        this.initialized = false;\n        this.referenceCount = 1;\n        this.pivot = document.createElement('div');\n        this.slot = document.createElement('slot');\n        this.element.classList.add('annotation-wrapper');\n        this.slot.name = config.name;\n        this.element.appendChild(this.pivot);\n        this.pivot.appendChild(this.slot);\n        this.updatePosition(config.position);\n        this.updateNormal(config.normal);\n    }\n    get facingCamera() {\n        return !this.element.classList.contains('hide');\n    }\n    /**\n     * Sets the hotspot to be in the highly visible foreground state.\n     */\n    show() {\n        if (!this.facingCamera || !this.initialized) {\n            this.updateVisibility(true);\n        }\n    }\n    /**\n     * Sets the hotspot to be in the diminished background state.\n     */\n    hide() {\n        if (this.facingCamera || !this.initialized) {\n            this.updateVisibility(false);\n        }\n    }\n    /**\n     * Call this when adding elements to the same slot to keep track.\n     */\n    increment() {\n        this.referenceCount++;\n    }\n    /**\n     * Call this when removing elements from the slot; returns true when the slot\n     * is unused.\n     */\n    decrement() {\n        if (this.referenceCount > 0) {\n            --this.referenceCount;\n        }\n        return this.referenceCount === 0;\n    }\n    /**\n     * Change the position of the hotspot to the input string, in the same format\n     * as the data-position attribute.\n     */\n    updatePosition(position) {\n        if (position == null)\n            return;\n        const positionNodes = parseExpressions(position)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.position.setComponent(i, normalizeUnit(positionNodes[i]).number);\n        }\n    }\n    /**\n     * Change the hotspot's normal to the input string, in the same format as the\n     * data-normal attribute.\n     */\n    updateNormal(normal) {\n        if (normal == null)\n            return;\n        const normalNodes = parseExpressions(normal)[0].terms;\n        for (let i = 0; i < 3; ++i) {\n            this.normal.setComponent(i, normalizeUnit(normalNodes[i]).number);\n        }\n    }\n    orient(radians) {\n        this.pivot.style.transform = `rotate(${radians}rad)`;\n    }\n    updateVisibility(show) {\n        // NOTE: IE11 doesn't support a second arg for classList.toggle\n        if (show) {\n            this.element.classList.remove('hide');\n        }\n        else {\n            this.element.classList.add('hide');\n        }\n        // NOTE: ShadyDOM doesn't support slot.assignedElements, otherwise we could\n        // use that here.\n        this.slot.assignedNodes().forEach((node) => {\n            if (node.nodeType !== Node.ELEMENT_NODE) {\n                return;\n            }\n            const element = node;\n            // Visibility attribute can be configured per-node in the hotspot:\n            const visibilityAttribute = element.dataset.visibilityAttribute;\n            if (visibilityAttribute != null) {\n                const attributeName = `data-${visibilityAttribute}`;\n                // NOTE: IE11 doesn't support toggleAttribute\n                if (show) {\n                    element.setAttribute(attributeName, '');\n                }\n                else {\n                    element.removeAttribute(attributeName);\n                }\n            }\n            element.dispatchEvent(new CustomEvent('hotspot-visibility', {\n                detail: {\n                    visible: show,\n                },\n            }));\n        });\n        this.initialized = true;\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Performs a reduction across all the vertices of the input model and all its\n * children. The supplied function takes the reduced value and a vertex and\n * returns the newly reduced value. The value is initialized as zero.\n *\n * Adapted from Three.js, @see https://github.com/mrdoob/three.js/blob/7e0a78beb9317e580d7fa4da9b5b12be051c6feb/src/math/Box3.js#L241\n */\nconst reduceVertices = (model, func) => {\n    let value = 0;\n    const vector = new Vector3();\n    model.traverse((object) => {\n        let i, l;\n        object.updateWorldMatrix(false, false);\n        let geometry = object.geometry;\n        if (geometry !== undefined) {\n            if (geometry.isGeometry) {\n                let vertices = geometry.vertices;\n                for (i = 0, l = vertices.length; i < l; i++) {\n                    vector.copy(vertices[i]);\n                    vector.applyMatrix4(object.matrixWorld);\n                    value = func(value, vector);\n                }\n            }\n            else if (geometry.isBufferGeometry) {\n                let attribute = geometry.attributes.position;\n                if (attribute !== undefined) {\n                    for (i = 0, l = attribute.count; i < l; i++) {\n                        vector.fromBufferAttribute(attribute, i)\n                            .applyMatrix4(object.matrixWorld);\n                        value = func(value, vector);\n                    }\n                }\n            }\n        }\n    });\n    return value;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Nothing within Offset of the bottom of the model casts a shadow\n// (this is to avoid having a baked-in shadow plane cast its own shadow).\nconst OFFSET = 0.001;\n// The softness [0, 1] of the shadow is mapped to a resolution between\n// 2^LOG_MAX_RESOLUTION and 2^LOG_MIN_RESOLUTION.\nconst LOG_MAX_RESOLUTION = 9;\nconst LOG_MIN_RESOLUTION = 6;\n// Animated models are not in general contained in their bounding box, as this\n// is calculated only for their resting pose. We create a cubic shadow volume\n// for animated models sized to their largest bounding box dimesion multiplied\n// by this scale factor.\nconst ANIMATION_SCALING = 2;\n/**\n * The Shadow class creates a shadow that fits a given model and follows a\n * target. This shadow will follow the model without any updates needed so long\n * as the shadow and model are both parented to the same object (call it the\n * scene) and this scene is passed as the target parameter to the shadow's\n * constructor. We also must constrain the scene to motion within the horizontal\n * plane and call the setRotation() method whenever the model's Y-axis rotation\n * changes. For motion outside of the horizontal plane, this.needsUpdate must be\n * set to true.\n *\n * The softness of the shadow is controlled by changing its resolution, making\n * softer shadows faster, but less precise.\n */\nclass Shadow extends DirectionalLight {\n    constructor(model, softness) {\n        super();\n        this.shadowMaterial = new ShadowMaterial;\n        this.boundingBox = new Box3;\n        this.size = new Vector3;\n        this.isAnimated = false;\n        this.needsUpdate = false;\n        // We use the light only to cast a shadow, not to light the scene.\n        this.intensity = 0;\n        this.castShadow = true;\n        this.frustumCulled = false;\n        this.floor = new Mesh(new PlaneBufferGeometry, this.shadowMaterial);\n        this.floor.rotateX(-Math.PI / 2);\n        this.floor.receiveShadow = true;\n        this.floor.castShadow = false;\n        this.floor.frustumCulled = false;\n        this.add(this.floor);\n        this.shadow.camera.up.set(0, 0, 1);\n        model.add(this);\n        this.target = model;\n        this.setModel(model, softness);\n    }\n    /**\n     * Update the shadow's size and position for a new model. Softness is also\n     * needed, as this controls the shadow's resolution.\n     */\n    setModel(model, softness) {\n        this.isAnimated = model.animationNames.length > 0;\n        this.boundingBox.copy(model.boundingBox);\n        this.size.copy(model.size);\n        const { boundingBox, size } = this;\n        if (this.isAnimated) {\n            const maxDimension = Math.max(size.x, size.y, size.z) * ANIMATION_SCALING;\n            size.y = maxDimension;\n            boundingBox.expandByVector(size.subScalar(maxDimension).multiplyScalar(-0.5));\n            boundingBox.max.y = boundingBox.min.y + maxDimension;\n            size.set(maxDimension, maxDimension, maxDimension);\n        }\n        const shadowOffset = size.y * OFFSET;\n        this.position.y = boundingBox.max.y + shadowOffset;\n        boundingBox.getCenter(this.floor.position);\n        this.setSoftness(softness);\n    }\n    /**\n     * Update the shadow's resolution based on softness (between 0 and 1). Should\n     * not be called frequently, as this results in reallocation.\n     */\n    setSoftness(softness) {\n        const resolution = Math.pow(2, LOG_MAX_RESOLUTION -\n            softness * (LOG_MAX_RESOLUTION - LOG_MIN_RESOLUTION));\n        this.setMapSize(resolution);\n    }\n    /**\n     * Lower-level version of the above function.\n     */\n    setMapSize(maxMapSize) {\n        const { camera, mapSize, map } = this.shadow;\n        const { size, boundingBox } = this;\n        if (map != null) {\n            map.dispose();\n            this.shadow.map = null;\n        }\n        if (this.isAnimated) {\n            maxMapSize *= ANIMATION_SCALING;\n        }\n        const width = Math.floor(size.x > size.z ? maxMapSize : maxMapSize * size.x / size.z);\n        const height = Math.floor(size.x > size.z ? maxMapSize * size.z / size.x : maxMapSize);\n        mapSize.set(width, height);\n        // These pads account for the softening radius around the shadow.\n        const widthPad = 2.5 * size.x / width;\n        const heightPad = 2.5 * size.z / height;\n        camera.left = -boundingBox.max.x - widthPad;\n        camera.right = -boundingBox.min.x + widthPad;\n        camera.bottom = boundingBox.min.z - heightPad;\n        camera.top = boundingBox.max.z + heightPad;\n        this.setScaleAndOffset(camera.zoom, 0);\n        this.shadow.updateMatrices(this);\n        this.floor.scale.set(size.x + 2 * widthPad, size.z + 2 * heightPad, 1);\n        this.needsUpdate = true;\n    }\n    /**\n     * Set the shadow's intensity (0 to 1), which is just its opacity. Turns off\n     * shadow rendering if zero.\n     */\n    setIntensity(intensity) {\n        this.shadowMaterial.opacity = intensity;\n        if (intensity > 0) {\n            this.visible = true;\n            this.floor.visible = true;\n        }\n        else {\n            this.visible = false;\n            this.floor.visible = false;\n        }\n    }\n    getIntensity() {\n        return this.shadowMaterial.opacity;\n    }\n    /**\n     * The shadow does not rotate with its parent transforms, so the rotation must\n     * be manually updated here if it rotates in world space. The input is its\n     * absolute orientation about the Y-axis (other rotations are not supported).\n     */\n    setRotation(radiansY) {\n        this.shadow.camera.up.set(Math.sin(radiansY), 0, Math.cos(radiansY));\n        this.shadow.updateMatrices(this);\n    }\n    /**\n     * The scale is also not inherited from parents, so it must be set here in\n     * accordance with any transforms. An offset can also be specified to move the\n     * shadow vertically relative to the bottom of the model. Positive is up, so\n     * values are generally negative.\n     */\n    setScaleAndOffset(scale, offset) {\n        const sizeY = this.size.y;\n        const inverseScale = 1 / scale;\n        // Floor plane is up slightly from the bottom of the bounding box to avoid\n        // Z-fighting with baked-in shadows and to stay inside the shadow camera.\n        const shadowOffset = sizeY * OFFSET;\n        this.floor.position.y = 2 * shadowOffset - sizeY + offset * inverseScale;\n        const { camera } = this.shadow;\n        camera.zoom = scale;\n        camera.near = 0;\n        camera.far = sizeY * scale - offset;\n        camera.projectionMatrix.makeOrthographic(camera.left * scale, camera.right * scale, camera.top * scale, camera.bottom * scale, camera.near, camera.far);\n        camera.projectionMatrixInverse.getInverse(camera.projectionMatrix);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$4, _b$2;\nconst DEFAULT_FOV_DEG = 45;\nconst DEFAULT_HALF_FOV = (DEFAULT_FOV_DEG / 2) * Math.PI / 180;\nconst SAFE_RADIUS_RATIO = Math.sin(DEFAULT_HALF_FOV);\nconst DEFAULT_TAN_FOV = Math.tan(DEFAULT_HALF_FOV);\nconst $shadow = Symbol('shadow');\nconst $cancelPendingSourceChange = Symbol('cancelPendingSourceChange');\nconst $currentGLTF = Symbol('currentGLTF');\nconst view = new Vector3();\nconst target = new Vector3();\nconst normalWorld = new Vector3();\n/**\n * An Object3D that can swap out its underlying model.\n */\nclass Model extends Object3D {\n    /**\n     * Creates a model.\n     */\n    constructor() {\n        super();\n        this[_a$4] = null;\n        this[_b$2] = null;\n        this.animationsByName = new Map();\n        this.currentAnimationAction = null;\n        this.animations = [];\n        this.modelContainer = new Object3D();\n        this.animationNames = [];\n        this.boundingBox = new Box3();\n        this.size = new Vector3();\n        this.idealCameraDistance = 0;\n        this.fieldOfViewAspect = 0;\n        this.userData = { url: null };\n        this.url = null;\n        this.name = 'Model';\n        this.modelContainer.name = 'ModelContainer';\n        this.add(this.modelContainer);\n        this.mixer = new AnimationMixer(this.modelContainer);\n    }\n    get currentGLTF() {\n        return this[$currentGLTF];\n    }\n    /**\n     * Returns a boolean indicating whether or not there is a\n     * loaded model attached.\n     */\n    hasModel() {\n        return !!this.modelContainer.children.length;\n    }\n    /**\n     * Pass in a THREE.Object3D to be controlled\n     * by this model.\n     */\n    setObject(model) {\n        this.clear();\n        this.modelContainer.add(model);\n        this.updateFraming();\n        this.dispatchEvent({ type: 'model-load' });\n    }\n    async setSource(element, url, progressCallback) {\n        if (!url || url === this.url) {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n            return;\n        }\n        // If we have pending work due to a previous source change in progress,\n        // cancel it so that we do not incur a race condition:\n        if (this[$cancelPendingSourceChange] != null) {\n            this[$cancelPendingSourceChange]();\n            this[$cancelPendingSourceChange] = null;\n        }\n        this.url = url;\n        let gltf;\n        try {\n            gltf = await new Promise(async (resolve, reject) => {\n                this[$cancelPendingSourceChange] = () => reject();\n                try {\n                    const result = await element[$renderer].loader.load(url, element, progressCallback);\n                    resolve(result);\n                }\n                catch (error) {\n                    reject(error);\n                }\n            });\n        }\n        catch (error) {\n            if (error == null) {\n                // Loading was cancelled, so silently return\n                return;\n            }\n            throw error;\n        }\n        this.clear();\n        this[$currentGLTF] = gltf;\n        if (gltf != null) {\n            this.modelContainer.add(gltf.scene);\n        }\n        const { animations } = gltf;\n        const animationsByName = new Map();\n        const animationNames = [];\n        for (const animation of animations) {\n            animationsByName.set(animation.name, animation);\n            animationNames.push(animation.name);\n        }\n        this.animations = animations;\n        this.animationsByName = animationsByName;\n        this.animationNames = animationNames;\n        this.userData.url = url;\n        this.updateFraming();\n        this.dispatchEvent({ type: 'model-load', url });\n    }\n    set animationTime(value) {\n        this.mixer.setTime(value);\n    }\n    get animationTime() {\n        if (this.currentAnimationAction != null) {\n            return this.currentAnimationAction.time;\n        }\n        return 0;\n    }\n    get hasActiveAnimation() {\n        return this.currentAnimationAction != null;\n    }\n    /**\n     * Plays an animation if there are any associated with the current model.\n     * Accepts an optional string name of an animation to play. If no name is\n     * provided, or if no animation is found by the given name, always falls back\n     * to playing the first animation.\n     */\n    playAnimation(name = null, crossfadeTime = 0) {\n        const { animations } = this;\n        if (animations == null || animations.length === 0) {\n            console.warn(`Cannot play animation (model does not have any animations)`);\n            return;\n        }\n        let animationClip = null;\n        if (name != null) {\n            animationClip = this.animationsByName.get(name);\n        }\n        if (animationClip == null) {\n            animationClip = animations[0];\n        }\n        try {\n            const { currentAnimationAction: lastAnimationAction } = this;\n            this.currentAnimationAction =\n                this.mixer.clipAction(animationClip, this).play();\n            this.currentAnimationAction.enabled = true;\n            if (lastAnimationAction != null &&\n                this.currentAnimationAction !== lastAnimationAction) {\n                this.currentAnimationAction.crossFadeFrom(lastAnimationAction, crossfadeTime, false);\n            }\n        }\n        catch (error) {\n            console.error(error);\n        }\n    }\n    stopAnimation() {\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction.reset();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n    }\n    updateAnimation(step) {\n        this.mixer.update(step);\n    }\n    clear() {\n        this.url = null;\n        this.userData = { url: null };\n        const gltf = this[$currentGLTF];\n        // Remove all current children\n        if (gltf != null) {\n            for (const child of this.modelContainer.children) {\n                this.modelContainer.remove(child);\n            }\n            gltf.dispose();\n            this[$currentGLTF] = null;\n        }\n        if (this.currentAnimationAction != null) {\n            this.currentAnimationAction.stop();\n            this.currentAnimationAction = null;\n        }\n        this.mixer.stopAllAction();\n        this.mixer.uncacheRoot(this);\n    }\n    /**\n     * Calculates the idealCameraDistance and fieldOfViewAspect that allows the 3D\n     * object to be framed tightly in a 2D window of any aspect ratio without\n     * clipping at any camera orbit. The camera's center target point can be\n     * optionally specified. If no center is specified, it defaults to the center\n     * of the bounding box, which means asymmetric models will tend to be tight on\n     * one side instead of both. Proper choice of center can correct this.\n     */\n    updateFraming(center = null) {\n        this.remove(this.modelContainer);\n        if (center == null) {\n            this.boundingBox.setFromObject(this.modelContainer);\n            this.boundingBox.getSize(this.size);\n            center = this.boundingBox.getCenter(new Vector3);\n        }\n        const radiusSquared = (value, vertex) => {\n            return Math.max(value, center.distanceToSquared(vertex));\n        };\n        const framedRadius = Math.sqrt(reduceVertices(this.modelContainer, radiusSquared));\n        this.idealCameraDistance = framedRadius / SAFE_RADIUS_RATIO;\n        const horizontalFov = (value, vertex) => {\n            vertex.sub(center);\n            const radiusXZ = Math.sqrt(vertex.x * vertex.x + vertex.z * vertex.z);\n            return Math.max(value, radiusXZ / (this.idealCameraDistance - Math.abs(vertex.y)));\n        };\n        this.fieldOfViewAspect =\n            reduceVertices(this.modelContainer, horizontalFov) / DEFAULT_TAN_FOV;\n        this.add(this.modelContainer);\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity, shadowSoftness) {\n        let shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setIntensity(shadowIntensity);\n            shadow.setModel(this, shadowSoftness);\n        }\n        else if (shadowIntensity > 0) {\n            shadow = new Shadow(this, shadowSoftness);\n            shadow.setIntensity(shadowIntensity);\n            this[$shadow] = shadow;\n        }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setSoftness(softness);\n        }\n    }\n    /**\n     * The shadow must be rotated manually to match any global rotation applied to\n     * this model. The input is the global orientation about the Y axis.\n     */\n    setShadowRotation(radiansY) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setRotation(radiansY);\n        }\n    }\n    /**\n     * Call when updating the shadow; returns true if an update is needed and\n     * resets the state.\n     */\n    updateShadow() {\n        const shadow = this[$shadow];\n        if (shadow == null) {\n            return false;\n        }\n        else {\n            const { needsUpdate } = shadow;\n            shadow.needsUpdate = false;\n            return needsUpdate;\n        }\n    }\n    /**\n     * Shift the floor vertically from the bottom of the model's bounding box by\n     * offset (should generally be negative).\n     */\n    setShadowScaleAndOffset(scale, offset) {\n        const shadow = this[$shadow];\n        if (shadow != null) {\n            shadow.setScaleAndOffset(scale, offset);\n        }\n    }\n    /**\n     * The following methods are for operating on the set of Hotspot objects\n     * attached to the scene. These come from DOM elements, provided to slots by\n     * the Annotation Mixin.\n     */\n    addHotspot(hotspot) {\n        this.add(hotspot);\n    }\n    removeHotspot(hotspot) {\n        this.remove(hotspot);\n    }\n    /**\n     * Helper method to apply a function to all hotspots.\n     */\n    forHotspots(func) {\n        const { children } = this;\n        for (let i = 0, l = children.length; i < l; i++) {\n            const hotspot = children[i];\n            if (hotspot instanceof Hotspot) {\n                func(hotspot);\n            }\n        }\n    }\n    /**\n     * Update the CSS visibility of the hotspots based on whether their normals\n     * point toward the camera.\n     */\n    updateHotspots(viewerPosition) {\n        this.forHotspots((hotspot) => {\n            view.copy(viewerPosition);\n            target.setFromMatrixPosition(hotspot.matrixWorld);\n            view.sub(target);\n            normalWorld.copy(hotspot.normal).transformDirection(this.matrixWorld);\n            if (view.dot(normalWorld) < 0) {\n                hotspot.hide();\n            }\n            else {\n                hotspot.show();\n            }\n        });\n    }\n    /**\n     * Rotate all hotspots to an absolute orientation given by the input number of\n     * radians. Zero returns them to upright.\n     */\n    orientHotspots(radians) {\n        this.forHotspots((hotspot) => {\n            hotspot.orient(radians);\n        });\n    }\n    /**\n     * Set the rendering visibility of all hotspots. This is used to hide them\n     * during transitions and such.\n     */\n    setHotspotsVisibility(visible) {\n        this.forHotspots((hotspot) => {\n            hotspot.visible = visible;\n        });\n    }\n}\n_a$4 = $shadow, _b$2 = $currentGLTF;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_TAN_FOV$1 = Math.tan((DEFAULT_FOV_DEG / 2) * Math.PI / 180);\nconst raycaster = new Raycaster();\nconst vector3 = new Vector3();\n/**\n * A THREE.Scene object that takes a Model and CanvasHTMLElement and\n * constructs a framed scene based off of the canvas dimensions.\n * Provides lights and cameras to be used in a renderer.\n */\nclass ModelScene extends Scene {\n    constructor({ canvas, element, width, height }) {\n        super();\n        this.aspect = 1;\n        this.shadowIntensity = 0;\n        this.shadowSoftness = 1;\n        this.width = 1;\n        this.height = 1;\n        this.isDirty = false;\n        this.context = null;\n        this.exposure = 1;\n        this.canScale = true;\n        this.framedFieldOfView = DEFAULT_FOV_DEG;\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.goalTarget = new Vector3();\n        this.targetDamperX = new Damper();\n        this.targetDamperY = new Damper();\n        this.targetDamperZ = new Damper();\n        this.name = 'ModelScene';\n        this.element = element;\n        this.canvas = canvas;\n        this.model = new Model();\n        // These default camera values are never used, as they are reset once the\n        // model is loaded and framing is computed.\n        this.camera = new PerspectiveCamera(45, 1, 0.1, 100);\n        this.camera.name = 'MainCamera';\n        this.activeCamera = this.camera;\n        this.add(this.model);\n        this.setSize(width, height);\n        this.model.addEventListener('model-load', (event) => this.onModelLoad(event));\n    }\n    /**\n     * Function to create the context lazily, as when there is only one\n     * <model-viewer> element, the renderer's 3D context can be displayed\n     * directly. This extra context is necessary to copy the renderings into when\n     * there are more than one.\n     */\n    createContext() {\n        {\n            this.context = this.canvas.getContext('2d');\n        }\n    }\n    /**\n     * Sets the model via URL.\n     */\n    async setModelSource(source, progressCallback) {\n        try {\n            await this.model.setSource(this.element, source, progressCallback);\n        }\n        catch (e) {\n            throw new Error(`Could not set model source to '${source}': ${e.message}`);\n        }\n    }\n    /**\n     * Updates the ModelScene for a new container size in CSS pixels.\n     */\n    setSize(width, height) {\n        if (this.width === width && this.height === height) {\n            return;\n        }\n        this.width = Math.max(width, 1);\n        this.height = Math.max(height, 1);\n        this.aspect = this.width / this.height;\n        this.frameModel();\n        this.isDirty = true;\n    }\n    /**\n     * Set's the framedFieldOfView based on the aspect ratio of the window in\n     * order to keep the model fully visible at any camera orientation.\n     */\n    frameModel() {\n        const vertical = DEFAULT_TAN_FOV$1 *\n            Math.max(1, this.model.fieldOfViewAspect / this.aspect);\n        this.framedFieldOfView = 2 * Math.atan(vertical) * 180 / Math.PI;\n    }\n    /**\n     * Returns the size of the corresponding canvas element.\n     */\n    getSize() {\n        return { width: this.width, height: this.height };\n    }\n    /**\n     * Returns the current camera.\n     */\n    getCamera() {\n        return this.activeCamera;\n    }\n    /**\n     * Sets the passed in camera to be used for rendering.\n     */\n    setCamera(camera) {\n        this.activeCamera = camera;\n    }\n    /**\n     * Called when the model's contents have loaded, or changed.\n     */\n    onModelLoad(event) {\n        this.frameModel();\n        this.setShadowIntensity(this.shadowIntensity);\n        this.isDirty = true;\n        this.dispatchEvent({ type: 'model-load', url: event.url });\n    }\n    /**\n     * Sets the point in model coordinates the model should orbit/pivot around.\n     */\n    setTarget(modelX, modelY, modelZ) {\n        this.goalTarget.set(-modelX, -modelY, -modelZ);\n    }\n    /**\n     * Gets the point in model coordinates the model should orbit/pivot around.\n     */\n    getTarget() {\n        return vector3.copy(this.goalTarget).multiplyScalar(-1);\n    }\n    /**\n     * Shifts the model to the target point immediately instead of easing in.\n     */\n    jumpToGoal() {\n        this.updateTarget(SETTLING_TIME);\n    }\n    /**\n     * This should be called every frame with the frame delta to cause the target\n     * to transition to its set point.\n     */\n    updateTarget(delta) {\n        const goal = this.goalTarget;\n        const target = this.model.position;\n        if (!goal.equals(target)) {\n            const radius = this.model.idealCameraDistance;\n            let { x, y, z } = target;\n            x = this.targetDamperX.update(x, goal.x, delta, radius);\n            y = this.targetDamperY.update(y, goal.y, delta, radius);\n            z = this.targetDamperZ.update(z, goal.z, delta, radius);\n            this.model.position.set(x, y, z);\n            this.model.updateMatrixWorld();\n            this.model.setShadowRotation(this.yaw);\n            this.isDirty = true;\n        }\n    }\n    /**\n     * Yaw the +z (front) of the model toward the indicated world coordinates.\n     */\n    pointTowards(worldX, worldZ) {\n        const { x, z } = this.position;\n        this.yaw = Math.atan2(worldX - x, worldZ - z);\n    }\n    /**\n     * Yaw is the scene's orientation about the y-axis, around the rotation\n     * center.\n     */\n    set yaw(radiansY) {\n        this.rotation.y = radiansY;\n        this.model.setShadowRotation(radiansY);\n        this.isDirty = true;\n    }\n    get yaw() {\n        return this.rotation.y;\n    }\n    /**\n     * Sets the shadow's intensity, lazily creating the shadow as necessary.\n     */\n    setShadowIntensity(shadowIntensity) {\n        shadowIntensity = Math.max(shadowIntensity, 0);\n        this.shadowIntensity = shadowIntensity;\n        if (this.model.hasModel()) {\n            this.model.setShadowIntensity(shadowIntensity, this.shadowSoftness);\n        }\n    }\n    /**\n     * Sets the shadow's softness by mapping a [0, 1] softness parameter to the\n     * shadow's resolution. This involves reallocation, so it should not be\n     * changed frequently. Softer shadows are cheaper to render.\n     */\n    setShadowSoftness(softness) {\n        this.shadowSoftness = softness;\n        this.model.setShadowSoftness(softness);\n    }\n    /**\n     * This method returns the world position and model-space normal of the point\n     * on the mesh corresponding to the input pixel coordinates given relative to\n     * the model-viewer element. If the mesh is not hit, the result is null.\n     */\n    positionAndNormalFromPoint(pixelPosition, object = this) {\n        raycaster.setFromCamera(pixelPosition, this.getCamera());\n        const hits = raycaster.intersectObject(object, true);\n        if (hits.length === 0) {\n            return null;\n        }\n        const hit = hits[0];\n        if (hit.face == null) {\n            return null;\n        }\n        hit.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(hit.object.matrixWorld));\n        return { position: hit.point, normal: hit.face.normal };\n    }\n}\n\n/**\n * This class generates custom mipmaps for a roughness map by encoding the lost variation in the\n * normal map mip levels as increased roughness in the corresponding roughness mip levels. This\n * helps with rendering accuracy for MeshStandardMaterial, and also helps with anti-aliasing when\n * using PMREM. If the normal map is larger than the roughness map, the roughness map will be\n * enlarged to match the dimensions of the normal map.\n */\n\nvar _mipmapMaterial = _getMipmapMaterial();\n\nvar _mesh$1 = new Mesh( new PlaneBufferGeometry( 2, 2 ), _mipmapMaterial );\n\nvar _flatCamera$1 = new OrthographicCamera( 0, 1, 0, 1, 0, 1 );\n\nvar _tempTarget = null;\n\nvar _renderer = null;\n\nfunction RoughnessMipmapper( renderer ) {\n\n\t_renderer = renderer;\n\n\t_renderer.compile( _mesh$1, _flatCamera$1 );\n\n}\n\nRoughnessMipmapper.prototype = {\n\n\tconstructor: RoughnessMipmapper,\n\n\tgenerateMipmaps: function ( material ) {\n\n\t\tif ( 'roughnessMap' in material === false ) return;\n\n\t\tvar { roughnessMap, normalMap } = material;\n\n\t\tif ( roughnessMap === null || normalMap === null || ! roughnessMap.generateMipmaps || material.userData.roughnessUpdated ) return;\n\n\t\tmaterial.userData.roughnessUpdated = true;\n\n\t\tvar width = Math.max( roughnessMap.image.width, normalMap.image.width );\n\n\t\tvar height = Math.max( roughnessMap.image.height, normalMap.image.height );\n\n\t\tif ( ! MathUtils.isPowerOfTwo( width ) || ! MathUtils.isPowerOfTwo( height ) ) return;\n\n\t\tvar oldTarget = _renderer.getRenderTarget();\n\n\t\tvar autoClear = _renderer.autoClear;\n\n\t\t_renderer.autoClear = false;\n\n\t\tif ( _tempTarget === null || _tempTarget.width !== width || _tempTarget.height !== height ) {\n\n\t\t\tif ( _tempTarget !== null ) _tempTarget.dispose();\n\n\t\t\t_tempTarget = new WebGLRenderTarget( width, height, { depthBuffer: false } );\n\n\t\t\t_tempTarget.scissorTest = true;\n\n\t\t}\n\n\t\tif ( width !== roughnessMap.image.width || height !== roughnessMap.image.height ) {\n\n\t\t\tvar params = {\n\t\t\t\twrapS: roughnessMap.wrapS,\n\t\t\t\twrapT: roughnessMap.wrapT,\n\t\t\t\tmagFilter: roughnessMap.magFilter,\n\t\t\t\tminFilter: roughnessMap.minFilter,\n\t\t\t\tdepthBuffer: false\n\t\t\t};\n\n\t\t\tvar newRoughnessTarget = new WebGLRenderTarget( width, height, params );\n\n\t\t\tnewRoughnessTarget.texture.generateMipmaps = true;\n\n\t\t\t// Setting the render target causes the memory to be allocated.\n\n\t\t\t_renderer.setRenderTarget( newRoughnessTarget );\n\n\t\t\tmaterial.roughnessMap = newRoughnessTarget.texture;\n\n\t\t\tif ( material.metalnessMap == roughnessMap ) material.metalnessMap = material.roughnessMap;\n\n\t\t\tif ( material.aoMap == roughnessMap ) material.aoMap = material.roughnessMap;\n\n\t\t}\n\n\t\t_mipmapMaterial.uniforms.roughnessMap.value = roughnessMap;\n\n\t\t_mipmapMaterial.uniforms.normalMap.value = normalMap;\n\n\t\tvar position = new Vector2( 0, 0 );\n\n\t\tvar texelSize = _mipmapMaterial.uniforms.texelSize.value;\n\n\t\tfor ( var mip = 0; width >= 1 && height >= 1; ++ mip, width /= 2, height /= 2 ) {\n\n\t\t\t// Rendering to a mip level is not allowed in webGL1. Instead we must set\n\t\t\t// up a secondary texture to write the result to, then copy it back to the\n\t\t\t// proper mipmap level.\n\n\t\t\ttexelSize.set( 1.0 / width, 1.0 / height );\n\n\t\t\tif ( mip == 0 ) texelSize.set( 0.0, 0.0 );\n\n\t\t\t_tempTarget.viewport.set( position.x, position.y, width, height );\n\n\t\t\t_tempTarget.scissor.set( position.x, position.y, width, height );\n\n\t\t\t_renderer.setRenderTarget( _tempTarget );\n\n\t\t\t_renderer.render( _mesh$1, _flatCamera$1 );\n\n\t\t\t_renderer.copyFramebufferToTexture( position, material.roughnessMap, mip );\n\n\t\t\t_mipmapMaterial.uniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( roughnessMap !== material.roughnessMap ) roughnessMap.dispose();\n\n\t\t_renderer.setRenderTarget( oldTarget );\n\n\t\t_renderer.autoClear = autoClear;\n\n\t},\n\n\tdispose: function () {\n\n\t\t_mipmapMaterial.dispose();\n\n\t\t_mesh$1.geometry.dispose();\n\n\t\tif ( _tempTarget != null ) _tempTarget.dispose();\n\n\t}\n\n};\n\nfunction _getMipmapMaterial() {\n\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\troughnessMap: { value: null },\n\t\t\tnormalMap: { value: null },\n\t\t\ttexelSize: { value: new Vector2( 1, 1 ) }\n\t\t},\n\n\t\tvertexShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tfragmentShader: /* glsl */`\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'RoughnessMipmapper';\n\n\treturn shaderMaterial;\n\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst deserializeUrl = (url) => (!!url && url !== 'null') ? toFullUrl(url) : null;\nconst assertIsArCandidate = () => {\n    if (IS_WEBXR_AR_CANDIDATE) {\n        return;\n    }\n    const missingApis = [];\n    if (!HAS_WEBXR_DEVICE_API) {\n        missingApis.push('WebXR Device API');\n    }\n    if (!HAS_WEBXR_HIT_TEST_API) {\n        missingApis.push('WebXR Hit Test API');\n    }\n    throw new Error(`The following APIs are required for AR, but are missing in this browser: ${missingApis.join(', ')}`);\n};\n/**\n * Converts a partial URL string to a fully qualified URL string.\n *\n * @param {String} url\n * @return {String}\n */\nconst toFullUrl = (partialUrl) => {\n    const url = new URL(partialUrl, window.location.toString());\n    return url.toString();\n};\n/**\n * Returns a throttled version of a given function that is only invoked at most\n * once within a given threshold of time in milliseconds.\n *\n * The throttled version of the function has a \"flush\" property that resets the\n * threshold for cases when immediate invokation is desired.\n */\nconst throttle = (fn, ms) => {\n    let timer = null;\n    const throttled = (...args) => {\n        if (timer != null) {\n            return;\n        }\n        fn(...args);\n        timer = self.setTimeout(() => timer = null, ms);\n    };\n    throttled.flush = () => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n            timer = null;\n        }\n    };\n    return throttled;\n};\nconst debounce = (fn, ms) => {\n    let timer = null;\n    return (...args) => {\n        if (timer != null) {\n            self.clearTimeout(timer);\n        }\n        timer = self.setTimeout(() => {\n            timer = null;\n            fn(...args);\n        }, ms);\n    };\n};\n/**\n * @param {Number} value\n * @param {Number} lowerLimit\n * @param {Number} upperLimit\n * @return {Number} value clamped within lowerLimit..upperLimit\n */\nconst clamp = (value, lowerLimit, upperLimit) => Math.max(lowerLimit, Math.min(upperLimit, value));\n// The DPR we use for a \"capped\" scenario (see resolveDpr below):\nconst CAPPED_DEVICE_PIXEL_RATIO = 1;\n/**\n * This helper analyzes the layout of the current page to decide if we should\n * use the natural device pixel ratio, or a capped value.\n *\n * We cap DPR if there is no meta viewport (suggesting that user is not\n * consciously specifying how to scale the viewport relative to the device\n * screen size).\n *\n * The rationale is that this condition typically leads to a pathological\n * outcome on mobile devices. When the window dimensions are scaled up on a\n * device with a high DPR, we create a canvas that is much larger than\n * appropriate to accomodate for the pixel density if we naively use the\n * reported DPR.\n *\n * This value needs to be measured in real time, as device pixel ratio can\n * change over time (e.g., when a user zooms the page). Also, in some cases\n * (such as Firefox on Android), the window's innerWidth is initially reported\n * as the same as the screen's availWidth but changes later.\n *\n * A user who specifies a meta viewport, thereby consciously creating scaling\n * conditions where <model-viewer> is slow, will be encouraged to live their\n * best life.\n */\nconst resolveDpr = (() => {\n    // If true, implies that the user is conscious of the viewport scaling\n    // relative to the device screen size.\n    const HAS_META_VIEWPORT_TAG = (() => {\n        const metas = document.head != null ?\n            Array.from(document.head.querySelectorAll('meta')) :\n            [];\n        for (const meta of metas) {\n            if (meta.name === 'viewport') {\n                return true;\n            }\n        }\n        return false;\n    })();\n    if (!HAS_META_VIEWPORT_TAG) {\n        console.warn('No <meta name=\"viewport\"> detected; <model-viewer> will cap pixel density at 1.');\n    }\n    return () => HAS_META_VIEWPORT_TAG ? window.devicePixelRatio :\n        CAPPED_DEVICE_PIXEL_RATIO;\n})();\n/**\n * Debug mode is enabled when one of the two following conditions is true:\n *\n *  1. A 'model-viewer-debug-mode' query parameter is present in the current\n *     search string\n *  2. There is a global object ModelViewerElement with a debugMode property set\n *     to true\n */\nconst isDebugMode = (() => {\n    const debugQueryParameterName = 'model-viewer-debug-mode';\n    const debugQueryParameter = new RegExp(`[\\?&]${debugQueryParameterName}(&|$)`);\n    return () => (self.ModelViewerElement &&\n        self.ModelViewerElement.debugMode) ||\n        (self.location && self.location.search &&\n            self.location.search.match(debugQueryParameter));\n})();\n/**\n * Returns the first key in a Map in iteration order.\n *\n * NOTE(cdata): This is necessary because IE11 does not implement iterator\n * methods of Map, and polymer-build does not polyfill these methods for\n * compatibility and performance reasons. This helper proposes that it is\n * a reasonable compromise to sacrifice a very small amount of runtime\n * performance in IE11 for the sake of code clarity.\n */\nconst getFirstMapKey = (map) => {\n    if (map.keys != null) {\n        return map.keys().next().value || null;\n    }\n    let firstKey = null;\n    try {\n        map.forEach((_value, key, _map) => {\n            firstKey = key;\n            // Stop iterating the Map with forEach:\n            throw new Error();\n        });\n    }\n    catch (_error) {\n    }\n    return firstKey;\n};\n/**\n * @param {EventTarget|EventDispatcher} target\n * @param {string} eventName\n * @param {?Function} predicate\n */\nconst waitForEvent = (target, eventName, predicate = null) => new Promise(resolve => {\n    function handler(event) {\n        if (!predicate || predicate(event)) {\n            resolve(event);\n            target.removeEventListener(eventName, handler);\n        }\n    }\n    target.addEventListener(eventName, handler);\n});\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst RADIUS = 0.2;\nconst LINE_WIDTH = 0.03;\nconst MAX_OPACITY = 0.75;\nconst SEGMENTS = 12;\nconst DELTA_PHI = Math.PI / (2 * SEGMENTS);\nconst vector2 = new Vector2();\n/**\n * Adds a quarter-annulus of vertices to the array, centered on cornerX,\n * cornerY.\n */\nconst addCorner = (vertices, cornerX, cornerY) => {\n    let phi = cornerX > 0 ? (cornerY > 0 ? 0 : -Math.PI / 2) :\n        (cornerY > 0 ? Math.PI / 2 : Math.PI);\n    for (let i = 0; i <= SEGMENTS; ++i) {\n        vertices.push(cornerX + (RADIUS - LINE_WIDTH) * Math.cos(phi), cornerY + (RADIUS - LINE_WIDTH) * Math.sin(phi), 0, cornerX + RADIUS * Math.cos(phi), cornerY + RADIUS * Math.sin(phi), 0);\n        phi += DELTA_PHI;\n    }\n};\n/**\n * This class is a set of two coincident planes. The first is just a cute box\n * outline with rounded corners and damped opacity to indicate the floor extents\n * of a model. It is purposely larger than the model's bounding box by RADIUS on\n * all sides so that small models are still visible / selectable. Its center is\n * actually carved out by vertices to ensure its fragment shader doesn't add\n * much time.\n *\n * The child plane is a simple plane with the same extents for use in hit\n * testing (translation is triggered when the touch hits the plane, rotation\n * otherwise).\n */\nclass PlacementBox extends Mesh {\n    constructor(model) {\n        const geometry = new BufferGeometry();\n        const triangles = [];\n        const vertices = [];\n        const { size, boundingBox } = model;\n        const x = size.x / 2;\n        const y = size.z / 2;\n        addCorner(vertices, x, y);\n        addCorner(vertices, -x, y);\n        addCorner(vertices, -x, -y);\n        addCorner(vertices, x, -y);\n        const numVertices = vertices.length / 3;\n        for (let i = 0; i < numVertices - 2; i += 2) {\n            triangles.push(i, i + 1, i + 3, i, i + 3, i + 2);\n        }\n        const i = numVertices - 2;\n        triangles.push(i, i + 1, 1, i, 1, 0);\n        geometry.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        geometry.setIndex(triangles);\n        super(geometry);\n        const material = this.material;\n        material.side = DoubleSide;\n        material.transparent = true;\n        material.opacity = 0;\n        this.goalOpacity = 0;\n        this.opacityDamper = new Damper();\n        this.hitPlane = new Mesh(new PlaneBufferGeometry(size.x + 2 * RADIUS, size.z + 2 * RADIUS));\n        this.hitPlane.visible = false;\n        this.add(this.hitPlane);\n        this.rotateX(-Math.PI / 2);\n        boundingBox.getCenter(this.position);\n        this.shadowHeight = boundingBox.min.y;\n        this.position.y = this.shadowHeight;\n        model.add(this);\n    }\n    /**\n     * Get the world hit position if the touch coordinates hit the box, and null\n     * otherwise. Pass the scene in to get access to its raycaster.\n     */\n    getHit(scene, screenX, screenY) {\n        vector2.set(screenX, -screenY);\n        this.hitPlane.visible = true;\n        const hitResult = scene.positionAndNormalFromPoint(vector2, this.hitPlane);\n        this.hitPlane.visible = false;\n        return hitResult == null ? null : hitResult.position;\n    }\n    /**\n     * Offset the height of the box relative to the bottom of the model. Positive\n     * is up, so generally only negative values are used.\n     */\n    set offsetHeight(offset) {\n        this.position.y = this.shadowHeight + offset;\n    }\n    get offsetHeight() {\n        return this.position.y - this.shadowHeight;\n    }\n    /**\n     * Set the box's visibility; it will fade in and out.\n     */\n    set show(visible) {\n        this.goalOpacity = visible ? MAX_OPACITY : 0;\n    }\n    /**\n     * Call on each frame with the frame delta to fade the box.\n     */\n    updateOpacity(delta) {\n        const material = this.material;\n        material.opacity =\n            this.opacityDamper.update(material.opacity, this.goalOpacity, delta, 1);\n        this.visible = material.opacity > 0;\n    }\n    /**\n     * Call this to clean up Three's cache when you remove the box.\n     */\n    dispose() {\n        const { geometry, material } = this.hitPlane;\n        geometry.dispose();\n        material.dispose();\n        this.geometry.dispose();\n        this.material.dispose();\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$5, _b$3, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s, _t, _u, _v, _w, _x$1, _y$1, _z$1, _0, _1, _2, _3, _4, _5, _6, _7, _8, _9, _10, _11, _12;\n// AR shadow is not user-configurable. This is to pave the way for AR lighting\n// estimation, which will be used once available in WebXR.\nconst AR_SHADOW_INTENSITY = 0.3;\nconst ROTATION_RATE = 1.5;\n// Angle down (towards bottom of screen) from camera center ray to use for hit\n// testing against the floor. This makes placement faster and more intuitive\n// assuming the phone is in portrait mode. This seems to be a reasonable\n// assumption for the start of the session and UI will lack landscape mode to\n// encourage upright use.\nconst HIT_ANGLE_DEG = 20;\n// Slow down the dampers for initial placement.\nconst INTRO_DAMPER_RATE = 0.4;\nconst SCALE_SNAP_HIGH = 1.2;\nconst SCALE_SNAP_LOW = 1 / SCALE_SNAP_HIGH;\n// For automatic dynamic viewport scaling, don't let the scale drop below this limit.\nconst MIN_VIEWPORT_SCALE = 0.25;\nconst ARStatus = {\n    NOT_PRESENTING: 'not-presenting',\n    SESSION_STARTED: 'session-started',\n    OBJECT_PLACED: 'object-placed',\n    FAILED: 'failed'\n};\nconst $presentedScene = Symbol('presentedScene');\nconst $placementBox = Symbol('placementBox');\nconst $lastTick = Symbol('lastTick');\nconst $turntableRotation = Symbol('turntableRotation');\nconst $oldShadowIntensity = Symbol('oldShadowIntensity');\nconst $oldBackground = Symbol('oldBackground');\nconst $rafId = Symbol('rafId');\nconst $currentSession = Symbol('currentSession');\nconst $tick = Symbol('tick');\nconst $refSpace = Symbol('refSpace');\nconst $viewerRefSpace = Symbol('viewerRefSpace');\nconst $frame = Symbol('frame');\nconst $initialized = Symbol('initialized');\nconst $initialModelToWorld = Symbol('initialModelToWorld');\nconst $placementComplete = Symbol('placementComplete');\nconst $initialHitSource = Symbol('hitTestSource');\nconst $transientHitTestSource = Symbol('transiertHitTestSource');\nconst $inputSource = Symbol('inputSource');\nconst $isTranslating = Symbol('isTranslating');\nconst $isRotating = Symbol('isRotating');\nconst $isScaling = Symbol('isScaling');\nconst $lastDragPosition = Symbol('lastDragPosition');\nconst $lastScalar = Symbol('lastScalar');\nconst $goalPosition = Symbol('goalPosition');\nconst $goalYaw = Symbol('goalYaw');\nconst $goalScale = Symbol('goalScale');\nconst $xDamper = Symbol('xDamper');\nconst $yDamper = Symbol('yDamper');\nconst $zDamper = Symbol('zDamper');\nconst $yawDamper = Symbol('yawDamper');\nconst $scaleDamper = Symbol('scaleDamper');\nconst $damperRate = Symbol('damperRate');\nconst $resolveCleanup = Symbol('resolveCleanup');\nconst $exitWebXRButtonContainer = Symbol('exitWebXRButtonContainer');\nconst $onWebXRFrame = Symbol('onWebXRFrame');\nconst $postSessionCleanup = Symbol('postSessionCleanup');\nconst $updateCamera = Symbol('updateCamera');\nconst $placeInitially = Symbol('placeInitially');\nconst $getHitPoint = Symbol('getHitPoint');\nconst $onSelectStart = Symbol('onSelectStart');\nconst $onSelectEnd = Symbol('onSelect');\nconst $onUpdateScene = Symbol('onUpdateScene');\nconst $fingerSeparation = Symbol('fingerSeparation');\nconst $processInput = Symbol('processInput');\nconst $moveScene = Symbol('moveScene');\nconst $onExitWebXRButtonContainerClick = Symbol('onExitWebXRButtonContainerClick');\nconst vector3$1 = new Vector3();\nconst matrix4 = new Matrix4();\nconst hitPosition = new Vector3();\nclass ARRenderer extends EventDispatcher {\n    constructor(renderer) {\n        super();\n        this.renderer = renderer;\n        this.camera = new PerspectiveCamera();\n        this[_a$5] = null;\n        this[_b$3] = null;\n        this[_c] = null;\n        this[_d] = null;\n        this[_e] = null;\n        this[_f] = null;\n        this[_g] = null;\n        this[_h] = null;\n        this[_j] = null;\n        this[_k] = null;\n        this[_l] = null;\n        this[_m] = null;\n        this[_o] = null;\n        this[_p] = null;\n        this[_q] = null;\n        this[_r] = null;\n        this[_s] = false;\n        this[_t] = new Matrix4();\n        this[_u] = false;\n        this[_v] = false;\n        this[_w] = false;\n        this[_x$1] = false;\n        this[_y$1] = new Vector3();\n        this[_z$1] = 0;\n        this[_0] = new Vector3();\n        this[_1] = 0;\n        this[_2] = 1;\n        this[_3] = new Damper();\n        this[_4] = new Damper();\n        this[_5] = new Damper();\n        this[_6] = new Damper();\n        this[_7] = new Damper();\n        this[_8] = 1;\n        this[_9] = () => this.stopPresenting();\n        this[_10] = () => {\n            if (this[$placementBox] != null && this.isPresenting) {\n                this[$placementBox].dispose();\n                this[$placementBox] = new PlacementBox(this[$presentedScene].model);\n            }\n        };\n        this[_11] = (event) => {\n            const hitSource = this[$transientHitTestSource];\n            if (hitSource == null) {\n                return;\n            }\n            const fingers = this[$frame].getHitTestResultsForTransientInput(hitSource);\n            const scene = this[$presentedScene];\n            const box = this[$placementBox];\n            if (fingers.length === 1) {\n                this[$inputSource] = event.inputSource;\n                const { axes } = this[$inputSource].gamepad;\n                const hitPosition = box.getHit(this[$presentedScene], axes[0], axes[1]);\n                box.show = true;\n                if (hitPosition != null) {\n                    this[$isTranslating] = true;\n                    this[$lastDragPosition].copy(hitPosition);\n                }\n                else {\n                    this[$isRotating] = true;\n                    this[$lastScalar] = axes[0];\n                }\n            }\n            else if (fingers.length === 2 && scene.canScale) {\n                box.show = true;\n                this[$isScaling] = true;\n                this[$lastScalar] = this[$fingerSeparation](fingers) / scene.scale.x;\n            }\n        };\n        this[_12] = () => {\n            this[$isTranslating] = false;\n            this[$isRotating] = false;\n            this[$isScaling] = false;\n            this[$inputSource] = null;\n            this[$goalPosition].y +=\n                this[$placementBox].offsetHeight * this[$presentedScene].scale.x;\n            this[$placementBox].show = false;\n        };\n        this.threeRenderer = renderer.threeRenderer;\n        // Turn this off, as the matrix is set directly from webXR rather than using\n        // postion, rotation, scale.\n        this.camera.matrixAutoUpdate = false;\n    }\n    async resolveARSession(scene) {\n        assertIsArCandidate();\n        const session = await navigator.xr.requestSession('immersive-ar', {\n            requiredFeatures: ['hit-test'],\n            optionalFeatures: ['dom-overlay'],\n            domOverlay: { root: scene.element.shadowRoot.querySelector('div.default') }\n        });\n        const gl = this.threeRenderer.context;\n        // `makeXRCompatible` replaced `setCompatibleXRDevice` in Chrome M73 @TODO\n        // #293, handle WebXR API changes. WARNING: this can cause a GL context\n        // loss according to the spec, though current implementations don't do so.\n        await gl.makeXRCompatible();\n        session.updateRenderState({ baseLayer: new XRWebGLLayer(session, gl, { alpha: true }) });\n        // The render state update takes effect on the next animation frame. Wait\n        // for it so that we get a framebuffer.\n        let waitForXRAnimationFrame = new Promise((resolve, _reject) => {\n            session.requestAnimationFrame(() => resolve());\n        });\n        await waitForXRAnimationFrame;\n        scene.element[$onResize](window.screen);\n        const { framebuffer, framebufferWidth, framebufferHeight } = session.renderState.baseLayer;\n        // Redirect rendering to the WebXR offscreen framebuffer.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(framebuffer);\n        this.threeRenderer.setPixelRatio(1);\n        this.threeRenderer.setSize(framebufferWidth, framebufferHeight, false);\n        const exitButton = scene.element.shadowRoot.querySelector('.slot.exit-webxr-ar-button');\n        exitButton.classList.add('enabled');\n        exitButton.addEventListener('click', this[$onExitWebXRButtonContainerClick]);\n        this[$exitWebXRButtonContainer] = exitButton;\n        return session;\n    }\n    /**\n     * The currently presented scene, if any\n     */\n    get presentedScene() {\n        return this[$presentedScene];\n    }\n    /**\n     * Resolves to true if the renderer has detected all the necessary qualities\n     * to support presentation in AR.\n     */\n    async supportsPresentation() {\n        try {\n            assertIsArCandidate();\n            return await navigator.xr.isSessionSupported('immersive-ar');\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    /**\n     * Present a scene in AR\n     */\n    async present(scene) {\n        if (this.isPresenting) {\n            console.warn('Cannot present while a model is already presenting');\n        }\n        let waitForAnimationFrame = new Promise((resolve, _reject) => {\n            requestAnimationFrame(() => resolve());\n        });\n        scene.model.setHotspotsVisibility(false);\n        scene.isDirty = true;\n        // Render a frame to turn off the hotspots\n        await waitForAnimationFrame;\n        // This sets isPresenting to true\n        this[$presentedScene] = scene;\n        const currentSession = await this.resolveARSession(scene);\n        currentSession.addEventListener('end', () => {\n            this[$postSessionCleanup]();\n        }, { once: true });\n        this[$refSpace] = await currentSession.requestReferenceSpace('local');\n        this[$viewerRefSpace] =\n            await currentSession.requestReferenceSpace('viewer');\n        scene.setCamera(this.camera);\n        this[$initialized] = false;\n        this[$damperRate] = INTRO_DAMPER_RATE;\n        this[$turntableRotation] = scene.yaw;\n        scene.yaw = 0;\n        this[$goalYaw] = 0;\n        this[$goalScale] = 1;\n        this[$oldBackground] = scene.background;\n        scene.background = null;\n        this[$oldShadowIntensity] = scene.shadowIntensity;\n        scene.setShadowIntensity(0);\n        scene.addEventListener('model-load', this[$onUpdateScene]);\n        const radians = HIT_ANGLE_DEG * Math.PI / 180;\n        const ray = new XRRay(new DOMPoint(0, 0, 0), { x: 0, y: -Math.sin(radians), z: -Math.cos(radians) });\n        currentSession\n            .requestHitTestSource({ space: this[$viewerRefSpace], offsetRay: ray })\n            .then(hitTestSource => {\n            this[$initialHitSource] = hitTestSource;\n        });\n        this[$currentSession] = currentSession;\n        this[$placementBox] = new PlacementBox(scene.model);\n        this[$placementComplete] = false;\n        this[$lastTick] = performance.now();\n        // Start the event loop.\n        this[$tick]();\n    }\n    /**\n     * If currently presenting a scene in AR, stops presentation and exits AR.\n     */\n    async stopPresenting() {\n        if (!this.isPresenting) {\n            return;\n        }\n        const cleanupPromise = new Promise((resolve) => {\n            this[$resolveCleanup] = resolve;\n        });\n        try {\n            await this[$currentSession].end();\n            await cleanupPromise;\n        }\n        catch (error) {\n            console.warn('Error while trying to end AR session');\n            console.warn(error);\n            this[$postSessionCleanup]();\n        }\n    }\n    [(_a$5 = $placementBox, _b$3 = $lastTick, _c = $turntableRotation, _d = $oldShadowIntensity, _e = $oldBackground, _f = $rafId, _g = $currentSession, _h = $refSpace, _j = $viewerRefSpace, _k = $frame, _l = $initialHitSource, _m = $transientHitTestSource, _o = $inputSource, _p = $presentedScene, _q = $resolveCleanup, _r = $exitWebXRButtonContainer, _s = $initialized, _t = $initialModelToWorld, _u = $placementComplete, _v = $isTranslating, _w = $isRotating, _x$1 = $isScaling, _y$1 = $lastDragPosition, _z$1 = $lastScalar, _0 = $goalPosition, _1 = $goalYaw, _2 = $goalScale, _3 = $xDamper, _4 = $yDamper, _5 = $zDamper, _6 = $yawDamper, _7 = $scaleDamper, _8 = $damperRate, _9 = $onExitWebXRButtonContainerClick, $postSessionCleanup)]() {\n        // The offscreen WebXR framebuffer is now invalid, switch\n        // back to the default framebuffer for canvas output.\n        // TODO: this method should be added to three.js's exported interface.\n        this.threeRenderer.setFramebuffer(null);\n        const session = this[$currentSession];\n        if (session != null) {\n            session.removeEventListener('selectstart', this[$onSelectStart]);\n            session.removeEventListener('selectend', this[$onSelectEnd]);\n            session.cancelAnimationFrame(this[$rafId]);\n            this[$currentSession] = null;\n        }\n        const scene = this[$presentedScene];\n        if (scene != null) {\n            const { model, element } = scene;\n            scene.setCamera(scene.camera);\n            model.remove(this[$placementBox]);\n            scene.position.set(0, 0, 0);\n            scene.scale.set(1, 1, 1);\n            model.setShadowScaleAndOffset(1, 0);\n            const yaw = this[$turntableRotation];\n            if (yaw != null) {\n                scene.yaw = yaw;\n            }\n            const intensity = this[$oldShadowIntensity];\n            if (intensity != null) {\n                scene.setShadowIntensity(intensity);\n            }\n            const background = this[$oldBackground];\n            if (background != null) {\n                scene.background = background;\n            }\n            scene.removeEventListener('model-load', this[$onUpdateScene]);\n            model.orientHotspots(0);\n            element.requestUpdate('cameraTarget');\n            element[$onResize](element.getBoundingClientRect());\n        }\n        // Force the Renderer to update its size\n        this.renderer.height = 0;\n        const exitButton = this[$exitWebXRButtonContainer];\n        if (exitButton != null) {\n            exitButton.classList.remove('enabled');\n            exitButton.removeEventListener('click', this[$onExitWebXRButtonContainerClick]);\n            this[$exitWebXRButtonContainer] = null;\n        }\n        const hitSource = this[$transientHitTestSource];\n        if (hitSource != null) {\n            hitSource.cancel();\n            this[$transientHitTestSource] = null;\n        }\n        const hitSourceInitial = this[$initialHitSource];\n        if (hitSourceInitial != null) {\n            hitSourceInitial.cancel();\n            this[$initialHitSource] = null;\n        }\n        if (this[$placementBox] != null) {\n            this[$placementBox].dispose();\n            this[$placementBox] = null;\n        }\n        this[$lastTick] = null;\n        this[$turntableRotation] = null;\n        this[$oldShadowIntensity] = null;\n        this[$oldBackground] = null;\n        this[$rafId] = null;\n        this[$refSpace] = null;\n        this[$presentedScene] = null;\n        this[$viewerRefSpace] = null;\n        this[$frame] = null;\n        this[$inputSource] = null;\n        if (this[$resolveCleanup] != null) {\n            this[$resolveCleanup]();\n        }\n        this.dispatchEvent({ type: 'status', status: ARStatus.NOT_PRESENTING });\n    }\n    /**\n     * True if a scene is currently in the process of being presented in AR\n     */\n    get isPresenting() {\n        return this[$presentedScene] != null;\n    }\n    updateTarget() {\n        const scene = this[$presentedScene];\n        if (scene != null) {\n            // Move the scene's target to the model's floor height.\n            const target = scene.getTarget();\n            scene.setTarget(target.x, scene.model.boundingBox.min.y, target.z);\n        }\n    }\n    [(_10 = $onUpdateScene, $updateCamera)](view) {\n        const { camera } = this;\n        const { matrix: cameraMatrix } = camera;\n        cameraMatrix.fromArray(view.transform.matrix);\n        camera.updateMatrixWorld(true);\n        // position is not updated when matrix is updated.\n        camera.position.setFromMatrixPosition(cameraMatrix);\n        if (this[$initialHitSource] != null) {\n            // Target locked to screen center\n            const { position, model } = this[$presentedScene];\n            const radius = model.idealCameraDistance;\n            camera.getWorldDirection(position);\n            position.multiplyScalar(radius);\n            position.add(camera.position);\n        }\n        if (!this[$initialized]) {\n            camera.projectionMatrix.fromArray(view.projectionMatrix);\n            // Have to set the inverse manually when setting matrix directly. This is\n            // needed for raycasting.\n            camera.projectionMatrixInverse.getInverse(camera.projectionMatrix);\n            // Orient model toward camera on first frame.\n            const { x, z } = camera.position;\n            const scene = this[$presentedScene];\n            scene.pointTowards(x, z);\n            scene.model.updateMatrixWorld(true);\n            this[$goalYaw] = scene.yaw;\n            this[$initialModelToWorld].copy(scene.model.matrixWorld);\n            scene.model.setHotspotsVisibility(true);\n            this[$initialized] = true;\n            this.dispatchEvent({ type: 'status', status: ARStatus.SESSION_STARTED });\n        }\n        // Use automatic dynamic viewport scaling if supported.\n        if (view.requestViewportScale && view.recommendedViewportScale) {\n            const scale = view.recommendedViewportScale;\n            view.requestViewportScale(Math.max(scale, MIN_VIEWPORT_SCALE));\n        }\n        const layer = this[$currentSession].renderState.baseLayer;\n        const viewport = layer.getViewport(view);\n        this.threeRenderer.setViewport(viewport.x, viewport.y, viewport.width, viewport.height);\n        this[$presentedScene].model.orientHotspots(Math.atan2(cameraMatrix.elements[1], cameraMatrix.elements[5]));\n    }\n    [$placeInitially](frame) {\n        const hitSource = this[$initialHitSource];\n        if (hitSource == null) {\n            return;\n        }\n        const hitTestResults = frame.getHitTestResults(hitSource);\n        if (hitTestResults.length == 0) {\n            return;\n        }\n        const hit = hitTestResults[0];\n        const hitMatrix = this[$getHitPoint](hit);\n        if (hitMatrix == null) {\n            return;\n        }\n        this.placeModel(hitMatrix);\n        hitSource.cancel();\n        this[$initialHitSource] = null;\n        const { session } = frame;\n        session.addEventListener('selectstart', this[$onSelectStart]);\n        session.addEventListener('selectend', this[$onSelectEnd]);\n        session\n            .requestHitTestSourceForTransientInput({ profile: 'generic-touchscreen' })\n            .then(hitTestSource => {\n            this[$transientHitTestSource] = hitTestSource;\n        });\n    }\n    [$getHitPoint](hitResult) {\n        const pose = hitResult.getPose(this[$refSpace]);\n        if (pose == null) {\n            return null;\n        }\n        const hitMatrix = matrix4.fromArray(pose.transform.matrix);\n        // Check that the y-coordinate of the normal is large enough that the normal\n        // is pointing up.\n        return hitMatrix.elements[5] > 0.75 ?\n            hitPosition.setFromMatrixPosition(hitMatrix) :\n            null;\n    }\n    /**\n     * This sets the initial model placement based on the input hit point. The\n     * bottom of the model will be placed on the floor (the shadow will rest on\n     * the input's y-coordinate). The XZ placement is found by first putting the\n     * scene's target at the hit point, drawing a ray from the camera to the\n     * target, and finding the XZ-intersection of this ray with the model's\n     * bounding box. The scene is then translated on the XZ plane to position this\n     * intersection point at the input hit point. If the ray does not intersect,\n     * the target is left at the hit point.\n     *\n     * This ensures the model is placed according to the chosen target, is not\n     * reoriented, and does not intersect the camera even when the model\n     * is large (unless the target is chosen outside of the model's bounding box).\n     */\n    placeModel(hit) {\n        const scene = this[$presentedScene];\n        const { model } = scene;\n        const { min, max } = model.boundingBox;\n        this[$placementBox].show = true;\n        const goal = this[$goalPosition];\n        goal.copy(hit);\n        const floor = hit.y;\n        const origin = this.camera.position.clone();\n        const direction = hit.clone().sub(origin).normalize();\n        // Pull camera back enough to be outside of large models.\n        origin.sub(direction.multiplyScalar(model.idealCameraDistance));\n        const ray = new Ray(origin, direction.normalize());\n        const modelToWorld = this[$initialModelToWorld];\n        const modelPosition = new Vector3().setFromMatrixPosition(modelToWorld).add(hit);\n        modelToWorld.setPosition(modelPosition);\n        const world2Model = new Matrix4().getInverse(modelToWorld);\n        ray.applyMatrix4(world2Model);\n        // Make the box tall so that we don't intersect the top face.\n        max.y += 10;\n        ray.intersectBox(model.boundingBox, modelPosition);\n        max.y -= 10;\n        if (modelPosition != null) {\n            modelPosition.applyMatrix4(modelToWorld);\n            goal.add(hit).sub(modelPosition);\n        }\n        // Move the scene's target to the model's floor height.\n        const target = scene.getTarget();\n        scene.setTarget(target.x, min.y, target.z);\n        // Ignore the y-coordinate and set on the floor instead.\n        goal.y = floor;\n        this.dispatchEvent({ type: 'status', status: ARStatus.OBJECT_PLACED });\n    }\n    [(_11 = $onSelectStart, _12 = $onSelectEnd, $fingerSeparation)](fingers) {\n        const fingerOne = fingers[0].inputSource.gamepad.axes;\n        const fingerTwo = fingers[1].inputSource.gamepad.axes;\n        const deltaX = fingerTwo[0] - fingerOne[0];\n        const deltaY = fingerTwo[1] - fingerOne[1];\n        return Math.sqrt(deltaX * deltaX + deltaY * deltaY);\n    }\n    [$processInput](frame) {\n        const hitSource = this[$transientHitTestSource];\n        if (hitSource == null) {\n            return;\n        }\n        if (!this[$isTranslating] && !this[$isScaling] && !this[$isRotating]) {\n            return;\n        }\n        const fingers = frame.getHitTestResultsForTransientInput(hitSource);\n        const scene = this[$presentedScene];\n        const scale = scene.scale.x;\n        // Rotating, translating and scaling are mutually exclusive operations; only\n        // one can happen at a time, but we can switch during a gesture.\n        if (this[$isScaling]) {\n            if (fingers.length < 2) {\n                // If we lose the second finger, stop scaling (in fact, stop processing\n                // input altogether until a new gesture starts).\n                this[$isScaling] = false;\n            }\n            else {\n                const separation = this[$fingerSeparation](fingers);\n                const scale = separation / this[$lastScalar];\n                this[$goalScale] =\n                    (scale < SCALE_SNAP_HIGH && scale > SCALE_SNAP_LOW) ? 1 : scale;\n            }\n            return;\n        }\n        else if (fingers.length === 2 && scene.canScale) {\n            // If we were rotating or translating and we get a second finger, switch\n            // to scaling instead.\n            this[$isTranslating] = false;\n            this[$isRotating] = false;\n            this[$isScaling] = true;\n            this[$lastScalar] = this[$fingerSeparation](fingers) / scale;\n            return;\n        }\n        if (this[$isRotating]) {\n            const thisDragX = this[$inputSource].gamepad.axes[0];\n            this[$goalYaw] += (thisDragX - this[$lastScalar]) * ROTATION_RATE;\n            this[$lastScalar] = thisDragX;\n        }\n        else if (this[$isTranslating]) {\n            fingers.forEach(finger => {\n                if (finger.inputSource !== this[$inputSource] ||\n                    finger.results.length < 1) {\n                    return;\n                }\n                const hit = this[$getHitPoint](finger.results[0]);\n                if (hit == null) {\n                    return;\n                }\n                this[$goalPosition].sub(this[$lastDragPosition]);\n                const offset = hit.y - this[$lastDragPosition].y;\n                // When a lower floor is found, keep the model at the same height, but\n                // drop the placement box to the floor. The model falls on select end.\n                if (offset < 0) {\n                    this[$placementBox].offsetHeight = offset / scale;\n                    this[$presentedScene].model.setShadowScaleAndOffset(scale, offset);\n                    // Interpolate hit ray up to drag plane\n                    const cameraPosition = vector3$1.copy(this.camera.position);\n                    const alpha = -offset / (cameraPosition.y - hit.y);\n                    cameraPosition.multiplyScalar(alpha);\n                    hit.multiplyScalar(1 - alpha).add(cameraPosition);\n                }\n                this[$goalPosition].add(hit);\n                this[$lastDragPosition].copy(hit);\n            });\n        }\n    }\n    [$moveScene](delta) {\n        const scene = this[$presentedScene];\n        const { model, position, yaw } = scene;\n        const radius = model.idealCameraDistance;\n        const goal = this[$goalPosition];\n        const oldScale = scene.scale.x;\n        const box = this[$placementBox];\n        if (this[$initialHitSource] == null &&\n            (!goal.equals(position) || this[$goalScale] !== oldScale)) {\n            let { x, y, z } = position;\n            delta *= this[$damperRate];\n            x = this[$xDamper].update(x, goal.x, delta, radius);\n            y = this[$yDamper].update(y, goal.y, delta, radius);\n            z = this[$zDamper].update(z, goal.z, delta, radius);\n            position.set(x, y, z);\n            const newScale = this[$scaleDamper].update(oldScale, this[$goalScale], delta, 1);\n            scene.scale.set(newScale, newScale, newScale);\n            if (!this[$isTranslating]) {\n                const offset = goal.y - y;\n                if (this[$placementComplete]) {\n                    box.offsetHeight = offset / newScale;\n                    model.setShadowScaleAndOffset(newScale, offset);\n                }\n                else if (offset === 0) {\n                    this[$placementComplete] = true;\n                    box.show = false;\n                    scene.setShadowIntensity(AR_SHADOW_INTENSITY);\n                    this[$damperRate] = 1;\n                }\n            }\n        }\n        box.updateOpacity(delta);\n        scene.updateTarget(delta);\n        // This updates the model's position, which the shadow is based on.\n        scene.updateMatrixWorld(true);\n        // yaw must be updated last, since this also updates the shadow position.\n        scene.yaw = this[$yawDamper].update(yaw, this[$goalYaw], delta, Math.PI);\n    }\n    [$tick]() {\n        this[$rafId] = this[$currentSession].requestAnimationFrame((time, frame) => this[$onWebXRFrame](time, frame));\n    }\n    [$onWebXRFrame](time, frame) {\n        this[$frame] = frame;\n        const pose = frame.getViewerPose(this[$refSpace]);\n        // TODO: Notify external observers of tick\n        this[$tick]();\n        const scene = this[$presentedScene];\n        if (pose == null || scene == null) {\n            return;\n        }\n        // WebXR may return multiple views, i.e. for headset AR. This\n        // isn't really supported at this point, but make a best-effort\n        // attempt to render other views also, using the first view\n        // as the main viewpoint.\n        let isFirstView = true;\n        for (const view of pose.views) {\n            this[$updateCamera](view);\n            if (isFirstView) {\n                this[$placeInitially](frame);\n                this[$processInput](frame);\n                const delta = time - this[$lastTick];\n                this[$moveScene](delta);\n                this.renderer.preRender(scene, time, delta);\n                this[$lastTick] = time;\n            }\n            // NOTE: Clearing depth caused issues on Samsung devices\n            // @see https://github.com/googlecodelabs/ar-with-webxr/issues/8\n            // this.threeRenderer.clearDepth();\n            this.threeRenderer.render(scene, this.camera);\n            isFirstView = false;\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * This Debugger exposes internal details of the <model-viewer> rendering\n * substructure so that external tools can more easily inspect and operate on\n * them.\n *\n * It also activates shader debugging on the associated GL context. Shader\n * debugging trades performance for useful error information, so it is not\n * recommended to activate this unless needed.\n */\nclass Debugger {\n    constructor(renderer) {\n        // Force WebGL shader debugging on:\n        renderer.threeRenderer.debug = { checkShaderErrors: true };\n        // Announce debug details at microtask timing to give the `Renderer`\n        // constructor time to complete its initialization, just to be on the safe\n        // side:\n        Promise.resolve().then(() => {\n            self.dispatchEvent(new CustomEvent('model-viewer-renderer-debug', {\n                detail: {\n                    renderer,\n                    THREE: {\n                        ShaderMaterial,\n                        Texture,\n                        Mesh,\n                        Scene,\n                        PlaneBufferGeometry,\n                        OrthographicCamera,\n                        WebGLRenderTarget\n                    }\n                }\n            }));\n        });\n    }\n    addScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-added-debug', { detail: { scene } }));\n    }\n    removeScene(scene) {\n        self.dispatchEvent(new CustomEvent('model-viewer-scene-removed-debug', { detail: { scene } }));\n    }\n}\n\nconst $threeGLTF = Symbol('threeGLTF');\nconst $gltf = Symbol('gltf');\nconst $gltfElementMap = Symbol('gltfElementMap');\nconst $threeObjectMap = Symbol('threeObjectMap');\nconst $parallelTraverseThreeScene = Symbol('parallelTraverseThreeScene');\nconst $correlateOriginalThreeGLTF = Symbol('correlateOriginalThreeGLTF');\nconst $correlateCloneThreeGLTF = Symbol('correlateCloneThreeGLTF');\n/**\n * The Three.js GLTFLoader provides us with an in-memory representation\n * of a glTF in terms of Three.js constructs. It also provides us with a copy\n * of the deserialized glTF without any Three.js decoration, and a mapping of\n * glTF elements to their corresponding Three.js constructs.\n *\n * A CorrelatedSceneGraph exposes a synchronously available mapping of glTF\n * element references to their corresponding Three.js constructs.\n */\nclass CorrelatedSceneGraph {\n    constructor(threeGLTF, gltf, threeObjectMap, gltfElementMap) {\n        this[$threeGLTF] = threeGLTF;\n        this[$gltf] = gltf;\n        this[$gltfElementMap] = gltfElementMap;\n        this[$threeObjectMap] = threeObjectMap;\n    }\n    /**\n     * Produce a CorrelatedSceneGraph from a naturally generated Three.js GLTF.\n     * Such GLTFs are produced by Three.js' GLTFLoader, and contain cached\n     * details that expedite the correlation step.\n     *\n     * If a CorrelatedSceneGraph is provided as the second argument, re-correlates\n     * a cloned Three.js GLTF with a clone of the glTF hierarchy used to produce\n     * the upstream Three.js GLTF that the clone was created from. The result\n     * CorrelatedSceneGraph is representative of the cloned hierarchy.\n     */\n    static from(threeGLTF, upstreamCorrelatedSceneGraph) {\n        if (upstreamCorrelatedSceneGraph != null) {\n            return this[$correlateCloneThreeGLTF](threeGLTF, upstreamCorrelatedSceneGraph);\n        }\n        else {\n            return this[$correlateOriginalThreeGLTF](threeGLTF);\n        }\n    }\n    static [$correlateOriginalThreeGLTF](threeGLTF) {\n        const gltf = threeGLTF.parser.json;\n        const { associations } = threeGLTF.parser;\n        const gltfElementMap = new Map();\n        // NOTE: IE11 does not have Map iterator methods\n        associations.forEach((gltfElementReference, threeObject) => {\n            // Note: GLTFLoader creates a \"default\" material that has no corresponding\n            // glTF element in the case that no materials are specified in the source\n            // glTF. This means that for basic models without any of their own\n            // materials, we might accidentally try to present a configurable glTF\n            // material that doesn't exist. It might be valuable to make this default\n            // material configurable in the future, but for now we ignore it.\n            if (gltfElementReference == null) {\n                return;\n            }\n            const { type, index } = gltfElementReference;\n            const elementArray = gltf[type] || [];\n            const gltfElement = elementArray[index];\n            if (gltfElement == null) {\n                // TODO: Maybe throw here...\n                return;\n            }\n            let threeObjects = gltfElementMap.get(gltfElement);\n            if (threeObjects == null) {\n                threeObjects = new Set();\n                gltfElementMap.set(gltfElement, threeObjects);\n            }\n            threeObjects.add(threeObject);\n        });\n        return new CorrelatedSceneGraph(threeGLTF, gltf, associations, gltfElementMap);\n    }\n    /**\n     * Transfers the association between a raw glTF and a Three.js scene graph\n     * to a clone of the Three.js scene graph, resolved as a new\n     * CorrelatedsceneGraph instance.\n     */\n    static [$correlateCloneThreeGLTF](cloneThreeGLTF, upstreamCorrelatedSceneGraph) {\n        const originalThreeGLTF = upstreamCorrelatedSceneGraph.threeGLTF;\n        const originalGLTF = upstreamCorrelatedSceneGraph.gltf;\n        const cloneGLTF = JSON.parse(JSON.stringify(originalGLTF));\n        const cloneThreeObjectMap = new Map();\n        const cloneGLTFELementMap = new Map();\n        for (let i = 0; i < originalThreeGLTF.scenes.length; i++) {\n            this[$parallelTraverseThreeScene](originalThreeGLTF.scenes[i], cloneThreeGLTF.scenes[i], (object, cloneObject) => {\n                const elementReference = upstreamCorrelatedSceneGraph.threeObjectMap.get(object);\n                if (elementReference != null) {\n                    const { type, index } = elementReference;\n                    const cloneElement = cloneGLTF[type][index];\n                    cloneThreeObjectMap.set(cloneObject, { type, index });\n                    const cloneObjects = cloneGLTFELementMap.get(cloneElement) || new Set();\n                    cloneObjects.add(cloneObject);\n                    cloneGLTFELementMap.set(cloneElement, cloneObjects);\n                }\n            });\n        }\n        return new CorrelatedSceneGraph(cloneThreeGLTF, cloneGLTF, cloneThreeObjectMap, cloneGLTFELementMap);\n    }\n    /**\n     * Traverses two presumably identical Three.js scenes, and invokes a callback\n     * for each Object3D or Material encountered, including the initial scene.\n     * Adapted from\n     * https://github.com/mrdoob/three.js/blob/7c1424c5819ab622a346dd630ee4e6431388021e/examples/jsm/utils/SkeletonUtils.js#L586-L596\n     */\n    static [$parallelTraverseThreeScene](sceneOne, sceneTwo, callback) {\n        const isMesh = (object) => {\n            return object.isMesh;\n        };\n        const traverse = (a, b) => {\n            callback(a, b);\n            if (a.isObject3D) {\n                if (isMesh(a)) {\n                    if (Array.isArray(a.material)) {\n                        for (let i = 0; i < a.material.length; ++i) {\n                            traverse(a.material[i], b.material[i]);\n                        }\n                    }\n                    else {\n                        traverse(a.material, b.material);\n                    }\n                }\n                for (let i = 0; i < a.children.length; ++i) {\n                    traverse(a.children[i], b.children[i]);\n                }\n            }\n        };\n        traverse(sceneOne, sceneTwo);\n    }\n    /**\n     * The source Three.js GLTF result given to us by a Three.js GLTFLoader.\n     */\n    get threeGLTF() {\n        return this[$threeGLTF];\n    }\n    /**\n     * The in-memory deserialized source glTF.\n     */\n    get gltf() {\n        return this[$gltf];\n    }\n    /**\n     * A Map of glTF element references to arrays of corresponding Three.js\n     * object references. Three.js objects are kept in arrays to account for\n     * cases where more than one Three.js object corresponds to a single glTF\n     * element.\n     */\n    get gltfElementMap() {\n        return this[$gltfElementMap];\n    }\n    /**\n     * A map of individual Three.js objects to corresponding elements in the\n     * source glTF.\n     */\n    get threeObjectMap() {\n        return this[$threeObjectMap];\n    }\n}\n\nvar SkeletonUtils = {\n\n\tretarget: function () {\n\n\t\tvar pos = new Vector3(),\n\t\t\tquat = new Quaternion(),\n\t\t\tscale = new Vector3(),\n\t\t\tbindBoneMatrix = new Matrix4(),\n\t\t\trelativeMatrix = new Matrix4(),\n\t\t\tglobalMatrix = new Matrix4();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.preserveMatrix = options.preserveMatrix !== undefined ? options.preserveMatrix : true;\n\t\t\toptions.preservePosition = options.preservePosition !== undefined ? options.preservePosition : true;\n\t\t\toptions.preserveHipPosition = options.preserveHipPosition !== undefined ? options.preserveHipPosition : false;\n\t\t\toptions.useTargetMatrix = options.useTargetMatrix !== undefined ? options.useTargetMatrix : false;\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : \"hip\";\n\t\t\toptions.names = options.names || {};\n\n\t\t\tvar sourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\tbindBones,\n\t\t\t\tbone, name, boneTo,\n\t\t\t\tbonesPosition, i;\n\n\t\t\t// reset bones\n\n\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\ttarget.skeleton.pose();\n\n\t\t\t} else {\n\n\t\t\t\toptions.useTargetMatrix = true;\n\t\t\t\toptions.preserveMatrix = false;\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tbonesPosition = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; i ++ ) {\n\n\t\t\t\t\tbonesPosition.push( bones[ i ].position.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// reset matrix\n\n\t\t\t\ttarget.updateMatrixWorld();\n\n\t\t\t\ttarget.matrixWorld.identity();\n\n\t\t\t\t// reset children matrix\n\n\t\t\t\tfor ( i = 0; i < target.children.length; ++ i ) {\n\n\t\t\t\t\ttarget.children[ i ].updateMatrixWorld( true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.offsets ) {\n\n\t\t\t\tbindBones = [];\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( options.offsets && options.offsets[ name ] ) {\n\n\t\t\t\t\t\tbone.matrix.multiply( options.offsets[ name ] );\n\n\t\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindBones.push( bone.matrixWorld.clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tglobalMatrix.copy( bone.matrixWorld );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tboneTo.updateMatrixWorld();\n\n\t\t\t\t\tif ( options.useTargetMatrix ) {\n\n\t\t\t\t\t\trelativeMatrix.copy( boneTo.matrixWorld );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\trelativeMatrix.getInverse( target.matrixWorld );\n\t\t\t\t\t\trelativeMatrix.multiply( boneTo.matrixWorld );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// ignore scale to extract rotation\n\n\t\t\t\t\tscale.setFromMatrixScale( relativeMatrix );\n\t\t\t\t\trelativeMatrix.scale( scale.set( 1 / scale.x, 1 / scale.y, 1 / scale.z ) );\n\n\t\t\t\t\t// apply to global matrix\n\n\t\t\t\t\tglobalMatrix.makeRotationFromQuaternion( quat.setFromRotationMatrix( relativeMatrix ) );\n\n\t\t\t\t\tif ( target.isObject3D ) {\n\n\t\t\t\t\t\tvar boneIndex = bones.indexOf( bone ),\n\t\t\t\t\t\t\twBindMatrix = bindBones ? bindBones[ boneIndex ] : bindBoneMatrix.getInverse( target.skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\t\t\tglobalMatrix.multiply( wBindMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tglobalMatrix.copyPosition( relativeMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( globalMatrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( globalMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( options.preserveHipPosition && name === options.hip ) {\n\n\t\t\t\t\tbone.matrix.setPosition( pos.set( 0, bone.position.y, 0 ) );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t}\n\n\t\t\tif ( options.preservePosition ) {\n\n\t\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\t\tbone = bones[ i ];\n\t\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\t\tif ( name !== options.hip ) {\n\n\t\t\t\t\t\tbone.position.copy( bonesPosition[ i ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( options.preserveMatrix ) {\n\n\t\t\t\t// restore matrix\n\n\t\t\t\ttarget.updateMatrixWorld( true );\n\n\t\t\t}\n\n\t\t};\n\n\t}(),\n\n\tretargetClip: function ( target, source, clip, options ) {\n\n\t\toptions = options || {};\n\t\toptions.useFirstFramePosition = options.useFirstFramePosition !== undefined ? options.useFirstFramePosition : false;\n\t\toptions.fps = options.fps !== undefined ? options.fps : 30;\n\t\toptions.names = options.names || [];\n\n\t\tif ( ! source.isObject3D ) {\n\n\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t}\n\n\t\tvar numFrames = Math.round( clip.duration * ( options.fps / 1000 ) * 1000 ),\n\t\t\tdelta = 1 / options.fps,\n\t\t\tconvertedTracks = [],\n\t\t\tmixer = new AnimationMixer( source ),\n\t\t\tbones = this.getBones( target.skeleton ),\n\t\t\tboneDatas = [],\n\t\t\tpositionOffset,\n\t\t\tbone, boneTo, boneData,\n\t\t\tname, i, j;\n\n\t\tmixer.clipAction( clip ).play();\n\t\tmixer.update( 0 );\n\n\t\tsource.updateMatrixWorld();\n\n\t\tfor ( i = 0; i < numFrames; ++ i ) {\n\n\t\t\tvar time = i * delta;\n\n\t\t\tthis.retarget( target, source, options );\n\n\t\t\tfor ( j = 0; j < bones.length; ++ j ) {\n\n\t\t\t\tname = options.names[ bones[ j ].name ] || bones[ j ].name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, source.skeleton );\n\n\t\t\t\tif ( boneTo ) {\n\n\t\t\t\t\tbone = bones[ j ];\n\t\t\t\t\tboneData = boneDatas[ j ] = boneDatas[ j ] || { bone: bone };\n\n\t\t\t\t\tif ( options.hip === name ) {\n\n\t\t\t\t\t\tif ( ! boneData.pos ) {\n\n\t\t\t\t\t\t\tboneData.pos = {\n\t\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 3 )\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( options.useFirstFramePosition ) {\n\n\t\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\t\tpositionOffset = bone.position.clone();\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbone.position.sub( positionOffset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneData.pos.times[ i ] = time;\n\n\t\t\t\t\t\tbone.position.toArray( boneData.pos.values, i * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! boneData.quat ) {\n\n\t\t\t\t\t\tboneData.quat = {\n\t\t\t\t\t\t\ttimes: new Float32Array( numFrames ),\n\t\t\t\t\t\t\tvalues: new Float32Array( numFrames * 4 )\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tboneData.quat.times[ i ] = time;\n\n\t\t\t\t\tbone.quaternion.toArray( boneData.quat.values, i * 4 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmixer.update( delta );\n\n\t\t\tsource.updateMatrixWorld();\n\n\t\t}\n\n\t\tfor ( i = 0; i < boneDatas.length; ++ i ) {\n\n\t\t\tboneData = boneDatas[ i ];\n\n\t\t\tif ( boneData ) {\n\n\t\t\t\tif ( boneData.pos ) {\n\n\t\t\t\t\tconvertedTracks.push( new VectorKeyframeTrack(\n\t\t\t\t\t\t\".bones[\" + boneData.bone.name + \"].position\",\n\t\t\t\t\t\tboneData.pos.times,\n\t\t\t\t\t\tboneData.pos.values\n\t\t\t\t\t) );\n\n\t\t\t\t}\n\n\t\t\t\tconvertedTracks.push( new QuaternionKeyframeTrack(\n\t\t\t\t\t\".bones[\" + boneData.bone.name + \"].quaternion\",\n\t\t\t\t\tboneData.quat.times,\n\t\t\t\t\tboneData.quat.values\n\t\t\t\t) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tmixer.uncacheAction( clip );\n\n\t\treturn new AnimationClip( clip.name, - 1, convertedTracks );\n\n\t},\n\n\tgetHelperFromSkeleton: function ( skeleton ) {\n\n\t\tvar source = new SkeletonHelper( skeleton.bones[ 0 ] );\n\t\tsource.skeleton = skeleton;\n\n\t\treturn source;\n\n\t},\n\n\tgetSkeletonOffsets: function () {\n\n\t\tvar targetParentPos = new Vector3(),\n\t\t\ttargetPos = new Vector3(),\n\t\t\tsourceParentPos = new Vector3(),\n\t\t\tsourcePos = new Vector3(),\n\t\t\ttargetDir = new Vector2(),\n\t\t\tsourceDir = new Vector2();\n\n\t\treturn function ( target, source, options ) {\n\n\t\t\toptions = options || {};\n\t\t\toptions.hip = options.hip !== undefined ? options.hip : \"hip\";\n\t\t\toptions.names = options.names || {};\n\n\t\t\tif ( ! source.isObject3D ) {\n\n\t\t\t\tsource = this.getHelperFromSkeleton( source );\n\n\t\t\t}\n\n\t\t\tvar nameKeys = Object.keys( options.names ),\n\t\t\t\tnameValues = Object.values( options.names ),\n\t\t\t\tsourceBones = source.isObject3D ? source.skeleton.bones : this.getBones( source ),\n\t\t\t\tbones = target.isObject3D ? target.skeleton.bones : this.getBones( target ),\n\t\t\t\toffsets = [],\n\t\t\t\tbone, boneTo,\n\t\t\t\tname, i;\n\n\t\t\ttarget.skeleton.pose();\n\n\t\t\tfor ( i = 0; i < bones.length; ++ i ) {\n\n\t\t\t\tbone = bones[ i ];\n\t\t\t\tname = options.names[ bone.name ] || bone.name;\n\n\t\t\t\tboneTo = this.getBoneByName( name, sourceBones );\n\n\t\t\t\tif ( boneTo && name !== options.hip ) {\n\n\t\t\t\t\tvar boneParent = this.getNearestBone( bone.parent, nameKeys ),\n\t\t\t\t\t\tboneToParent = this.getNearestBone( boneTo.parent, nameValues );\n\n\t\t\t\t\tboneParent.updateMatrixWorld();\n\t\t\t\t\tboneToParent.updateMatrixWorld();\n\n\t\t\t\t\ttargetParentPos.setFromMatrixPosition( boneParent.matrixWorld );\n\t\t\t\t\ttargetPos.setFromMatrixPosition( bone.matrixWorld );\n\n\t\t\t\t\tsourceParentPos.setFromMatrixPosition( boneToParent.matrixWorld );\n\t\t\t\t\tsourcePos.setFromMatrixPosition( boneTo.matrixWorld );\n\n\t\t\t\t\ttargetDir.subVectors(\n\t\t\t\t\t\tnew Vector2( targetPos.x, targetPos.y ),\n\t\t\t\t\t\tnew Vector2( targetParentPos.x, targetParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tsourceDir.subVectors(\n\t\t\t\t\t\tnew Vector2( sourcePos.x, sourcePos.y ),\n\t\t\t\t\t\tnew Vector2( sourceParentPos.x, sourceParentPos.y )\n\t\t\t\t\t).normalize();\n\n\t\t\t\t\tvar laterialAngle = targetDir.angle() - sourceDir.angle();\n\n\t\t\t\t\tvar offset = new Matrix4().makeRotationFromEuler(\n\t\t\t\t\t\tnew Euler(\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tlaterialAngle\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\t\tbone.matrix.multiply( offset );\n\n\t\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t\t\tbone.updateMatrixWorld();\n\n\t\t\t\t\toffsets[ name ] = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn offsets;\n\n\t\t};\n\n\t}(),\n\n\trenameBones: function ( skeleton, names ) {\n\n\t\tvar bones = this.getBones( skeleton );\n\n\t\tfor ( var i = 0; i < bones.length; ++ i ) {\n\n\t\t\tvar bone = bones[ i ];\n\n\t\t\tif ( names[ bone.name ] ) {\n\n\t\t\t\tbone.name = names[ bone.name ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetBones: function ( skeleton ) {\n\n\t\treturn Array.isArray( skeleton ) ? skeleton : skeleton.bones;\n\n\t},\n\n\tgetBoneByName: function ( name, skeleton ) {\n\n\t\tfor ( var i = 0, bones = this.getBones( skeleton ); i < bones.length; i ++ ) {\n\n\t\t\tif ( name === bones[ i ].name )\n\n\t\t\t\treturn bones[ i ];\n\n\t\t}\n\n\t},\n\n\tgetNearestBone: function ( bone, names ) {\n\n\t\twhile ( bone.isBone ) {\n\n\t\t\tif ( names.indexOf( bone.name ) !== - 1 ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t\tbone = bone.parent;\n\n\t\t}\n\n\t},\n\n\tfindBoneTrackData: function ( name, tracks ) {\n\n\t\tvar regexp = /\\[(.*)\\]\\.(.*)/,\n\t\t\tresult = { name: name };\n\n\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t// 1 is track name\n\t\t\t// 2 is track type\n\t\t\tvar trackData = regexp.exec( tracks[ i ].name );\n\n\t\t\tif ( trackData && name === trackData[ 1 ] ) {\n\n\t\t\t\tresult[ trackData[ 2 ] ] = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\tgetEqualsBonesNames: function ( skeleton, targetSkeleton ) {\n\n\t\tvar sourceBones = this.getBones( skeleton ),\n\t\t\ttargetBones = this.getBones( targetSkeleton ),\n\t\t\tbones = [];\n\n\t\tsearch : for ( var i = 0; i < sourceBones.length; i ++ ) {\n\n\t\t\tvar boneName = sourceBones[ i ].name;\n\n\t\t\tfor ( var j = 0; j < targetBones.length; j ++ ) {\n\n\t\t\t\tif ( boneName === targetBones[ j ].name ) {\n\n\t\t\t\t\tbones.push( boneName );\n\n\t\t\t\t\tcontinue search;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bones;\n\n\t},\n\n\tclone: function ( source ) {\n\n\t\tvar sourceLookup = new Map();\n\t\tvar cloneLookup = new Map();\n\n\t\tvar clone = source.clone();\n\n\t\tparallelTraverse( source, clone, function ( sourceNode, clonedNode ) {\n\n\t\t\tsourceLookup.set( clonedNode, sourceNode );\n\t\t\tcloneLookup.set( sourceNode, clonedNode );\n\n\t\t} );\n\n\t\tclone.traverse( function ( node ) {\n\n\t\t\tif ( ! node.isSkinnedMesh ) return;\n\n\t\t\tvar clonedMesh = node;\n\t\t\tvar sourceMesh = sourceLookup.get( node );\n\t\t\tvar sourceBones = sourceMesh.skeleton.bones;\n\n\t\t\tclonedMesh.skeleton = sourceMesh.skeleton.clone();\n\t\t\tclonedMesh.bindMatrix.copy( sourceMesh.bindMatrix );\n\n\t\t\tclonedMesh.skeleton.bones = sourceBones.map( function ( bone ) {\n\n\t\t\t\treturn cloneLookup.get( bone );\n\n\t\t\t} );\n\n\t\t\tclonedMesh.bind( clonedMesh.skeleton, clonedMesh.bindMatrix );\n\n\t\t} );\n\n\t\treturn clone;\n\n\t}\n\n};\n\n\nfunction parallelTraverse( a, b, callback ) {\n\n\tcallback( a, b );\n\n\tfor ( var i = 0; i < a.children.length; i ++ ) {\n\n\t\tparallelTraverse( a.children[ i ], b.children[ i ], callback );\n\n\t}\n\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $prepared = Symbol('prepared');\nconst $prepare = Symbol('prepare');\nconst $preparedGLTF = Symbol('preparedGLTF');\nconst $clone = Symbol('clone');\n/**\n * Represents the preparation and enhancement of the output of a Three.js\n * GLTFLoader (a Three.js-flavor \"GLTF\"), to make it suitable for optimal,\n * correct viewing in a given presentation context and also make the cloning\n * process more explicit and legible.\n *\n * A GLTFInstance is API-compatible with a Three.js-flavor \"GLTF\", so it should\n * be considered to be interchangeable with the loaded result of a GLTFLoader.\n *\n * This basic implementation only implements trivial preparation and enhancement\n * of a GLTF. These operations are intended to be enhanced by inheriting\n * classes.\n */\nclass GLTFInstance {\n    constructor(preparedGLTF) {\n        this[$preparedGLTF] = preparedGLTF;\n    }\n    /**\n     * Prepares a given GLTF for presentation and future cloning. A GLTF that is\n     * prepared can safely have this method invoked on it multiple times; it will\n     * only be prepared once, including after being cloned.\n     */\n    static prepare(source) {\n        if (source.scene == null) {\n            throw new Error('Model does not have a scene');\n        }\n        if (source[$prepared]) {\n            return source;\n        }\n        const prepared = this[$prepare](source);\n        // NOTE: ES5 Symbol polyfill is not compatible with spread operator\n        // so {...prepared, [$prepared]: true} does not work\n        prepared[$prepared] = true;\n        return prepared;\n    }\n    /**\n     * Override in an inheriting class to apply specialty one-time preparations\n     * for a given input GLTF.\n     */\n    static [$prepare](source) {\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother preparing extra scenes for now:\n        const { scene } = source;\n        const scenes = [scene];\n        return Object.assign(Object.assign({}, source), { scene, scenes });\n    }\n    get parser() {\n        return this[$preparedGLTF].parser;\n    }\n    get animations() {\n        return this[$preparedGLTF].animations;\n    }\n    get scene() {\n        return this[$preparedGLTF].scene;\n    }\n    get scenes() {\n        return this[$preparedGLTF].scenes;\n    }\n    get cameras() {\n        return this[$preparedGLTF].cameras;\n    }\n    get asset() {\n        return this[$preparedGLTF].asset;\n    }\n    get userData() {\n        return this[$preparedGLTF].userData;\n    }\n    /**\n     * Creates and returns a copy of this instance.\n     */\n    clone() {\n        const GLTFInstanceConstructor = this.constructor;\n        const clonedGLTF = this[$clone]();\n        return new GLTFInstanceConstructor(clonedGLTF);\n    }\n    /**\n     * Cleans up any retained memory that might not otherwise be released when\n     * this instance is done being used.\n     */\n    dispose() {\n        this.scenes.forEach((scene) => {\n            scene.traverse((object) => {\n                if (!object.isMesh) {\n                    return;\n                }\n                const mesh = object;\n                const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n                materials.forEach(material => {\n                    material.dispose();\n                });\n                mesh.geometry.dispose();\n            });\n        });\n    }\n    /**\n     * Override in an inheriting class to implement specialized cloning strategies\n     */\n    [$clone]() {\n        const source = this[$preparedGLTF];\n        // TODO(#195,#1003): We don't currently support multiple scenes, so we don't\n        // bother cloning extra scenes for now:\n        const scene = SkeletonUtils.clone(this.scene);\n        const scenes = [scene];\n        const userData = source.userData ? Object.assign({}, source.userData) : {};\n        return Object.assign(Object.assign({}, source), { scene, scenes, userData });\n    }\n}\n\n/**\n * @license MIT\n * @see https://github.com/mrdoob/three.js/blob/dev/LICENSE\n */\nconst alphaChunk = /* glsl */ `\n#ifdef ALPHATEST\n\n    if ( diffuseColor.a < ALPHATEST ) discard;\n    diffuseColor.a = 1.0;\n\n#endif\n`;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $cloneAndPatchMaterial = Symbol('cloneAndPatchMaterial');\nconst $correlatedSceneGraph = Symbol('correlatedSceneGraph');\n/**\n * This specialization of GLTFInstance collects all of the processing needed\n * to prepare a model and to clone it making special considerations for\n * <model-viewer> use cases.\n */\nclass ModelViewerGLTFInstance extends GLTFInstance {\n    /**\n     * @override\n     */\n    static [$prepare](source) {\n        const prepared = super[$prepare](source);\n        if (prepared[$correlatedSceneGraph] == null) {\n            prepared[$correlatedSceneGraph] = CorrelatedSceneGraph.from(prepared);\n        }\n        const { scene } = prepared;\n        const meshesToDuplicate = [];\n        scene.traverse((node) => {\n            // Set a high renderOrder while we're here to ensure the model\n            // always renders on top of the skysphere\n            node.renderOrder = 1000;\n            // Three.js seems to cull some animated models incorrectly. Since we\n            // expect to view our whole scene anyway, we turn off the frustum\n            // culling optimization here.\n            node.frustumCulled = false;\n            // Animations for objects without names target their UUID instead. When\n            // objects are cloned, they get new UUIDs which the animation can't\n            // find. To fix this, we assign their UUID as their name.\n            if (!node.name) {\n                node.name = node.uuid;\n            }\n            if (!node.isMesh) {\n                return;\n            }\n            node.castShadow = true;\n            const mesh = node;\n            let transparent = false;\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            materials.forEach(material => {\n                if (material.isMeshStandardMaterial) {\n                    if (material.transparent && material.side === DoubleSide) {\n                        transparent = true;\n                        material.side = FrontSide;\n                    }\n                    Renderer.singleton.roughnessMipmapper.generateMipmaps(material);\n                }\n            });\n            if (transparent) {\n                meshesToDuplicate.push(mesh);\n            }\n        });\n        // We duplicate transparent, double-sided meshes and render the back face\n        // before the front face. This creates perfect triangle sorting for all\n        // convex meshes. Sorting artifacts can still appear when you can see\n        // through more than two layers of a given mesh, but this can usually be\n        // mitigated by the author splitting the mesh into mostly convex regions.\n        // The performance cost is not too great as the same shader is reused and\n        // the same number of fragments are processed; only the vertex shader is run\n        // twice. @see https://threejs.org/examples/webgl_materials_physical_transparency.html\n        for (const mesh of meshesToDuplicate) {\n            const materials = Array.isArray(mesh.material) ? mesh.material : [mesh.material];\n            const duplicateMaterials = materials.map((material) => {\n                const backMaterial = material.clone();\n                backMaterial.side = BackSide;\n                return backMaterial;\n            });\n            const duplicateMaterial = Array.isArray(mesh.material) ?\n                duplicateMaterials :\n                duplicateMaterials[0];\n            const meshBack = new Mesh(mesh.geometry, duplicateMaterial);\n            meshBack.renderOrder = -1;\n            mesh.add(meshBack);\n        }\n        return prepared;\n    }\n    get correlatedSceneGraph() {\n        return this[$preparedGLTF][$correlatedSceneGraph];\n    }\n    /**\n     * @override\n     */\n    [$clone]() {\n        const clone = super[$clone]();\n        const sourceUUIDToClonedMaterial = new Map();\n        clone.scene.traverse((node) => {\n            // Materials aren't cloned when cloning meshes; geometry\n            // and materials are copied by reference. This is necessary\n            // for the same model to be used twice with different\n            // environment maps.\n            if (node.isMesh) {\n                const mesh = node;\n                if (Array.isArray(mesh.material)) {\n                    mesh.material = mesh.material.map((material) => this[$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial));\n                }\n                else if (mesh.material != null) {\n                    mesh.material = this[$cloneAndPatchMaterial](mesh.material, sourceUUIDToClonedMaterial);\n                }\n            }\n        });\n        // Cross-correlate the scene graph by relying on information in the\n        // current scene graph; without this step, relationships between the\n        // Three.js object graph and the glTF scene graph will be lost.\n        clone[$correlatedSceneGraph] =\n            CorrelatedSceneGraph.from(clone, this.correlatedSceneGraph);\n        return clone;\n    }\n    /**\n     * Creates a clone of the given material, and applies a patch to the\n     * shader program.\n     */\n    [$cloneAndPatchMaterial](material, sourceUUIDToClonedMaterial) {\n        // If we already cloned this material (determined by tracking the UUID of\n        // source materials that have been cloned), then return that previously\n        // cloned instance:\n        if (sourceUUIDToClonedMaterial.has(material.uuid)) {\n            return sourceUUIDToClonedMaterial.get(material.uuid);\n        }\n        const clone = material.clone();\n        // This allows us to patch three's materials, on top of patches already\n        // made, for instance GLTFLoader patches SpecularGlossiness materials.\n        // Unfortunately, three's program cache differentiates SpecGloss materials\n        // via onBeforeCompile.toString(), so these two functions do the same\n        // thing but look different in order to force a proper recompile.\n        const oldOnBeforeCompile = material.onBeforeCompile;\n        clone.onBeforeCompile = material.isGLTFSpecularGlossinessMaterial ?\n            (shader) => {\n                oldOnBeforeCompile(shader, undefined);\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n            } :\n            (shader) => {\n                shader.fragmentShader = shader.fragmentShader.replace('#include <alphatest_fragment>', alphaChunk);\n                oldOnBeforeCompile(shader, undefined);\n            };\n        // This makes shadows better for non-manifold meshes\n        clone.shadowSide = FrontSide;\n        // This improves transparent rendering and can be removed whenever\n        // https://github.com/mrdoob/three.js/pull/18235 finally lands.\n        if (clone.transparent) {\n            clone.depthWrite = false;\n        }\n        // This little hack ignores alpha for opaque materials, in order to comply\n        // with the glTF spec.\n        if (!clone.alphaTest && !clone.transparent) {\n            clone.alphaTest = -0.5;\n        }\n        sourceUUIDToClonedMaterial.set(material.uuid, clone);\n        return clone;\n    }\n}\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar RGBELoader = function ( manager ) {\n\n\tDataTextureLoader.call( this, manager );\n\n\tthis.type = UnsignedByteType;\n\n};\n\nRGBELoader.prototype = Object.assign( Object.create( DataTextureLoader.prototype ), {\n\n\tconstructor: RGBELoader,\n\n\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\tparse: function ( buffer ) {\n\n\t\tvar\n\t\t\t/* return codes for rgbe routines */\n\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t/* default error routine.  change this to change error handling */\n\t\t\trgbe_read_error = 1,\n\t\t\trgbe_write_error = 2,\n\t\t\trgbe_format_error = 3,\n\t\t\trgbe_memory_error = 4,\n\t\t\trgbe_error = function ( rgbe_error_code, msg ) {\n\n\t\t\t\tswitch ( rgbe_error_code ) {\n\n\t\t\t\t\tcase rgbe_read_error: console.error( \"RGBELoader Read Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_write_error: console.error( \"RGBELoader Write Error: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase rgbe_format_error: console.error( \"RGBELoader Bad File Format: \" + ( msg || '' ) );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\tcase rgbe_memory_error: console.error( \"RGBELoader: Error: \" + ( msg || '' ) );\n\n\t\t\t\t}\n\n\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t},\n\n\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\tNEWLINE = \"\\n\",\n\n\t\t\tfgets = function ( buffer, lineLimit, consume ) {\n\n\t\t\t\tlineLimit = ! lineLimit ? 1024 : lineLimit;\n\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\tchunk = String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) )\n\t\t\t\t;\n\t\t\t\twhile ( ( 0 > ( i = chunk.indexOf( NEWLINE ) ) ) && ( len < lineLimit ) && ( p < buffer.byteLength ) ) {\n\n\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\tp += chunkSize;\n\t\t\t\t\tchunk += String.fromCharCode.apply( null, new Uint16Array( buffer.subarray( p, p + chunkSize ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( - 1 < i ) {\n\n\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t}*/\n\t\t\t\t\tif ( false !== consume ) buffer.pos += len + i + 1;\n\t\t\t\t\treturn s + chunk.slice( 0, i );\n\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\n\t\t\t},\n\n\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\tRGBE_ReadHeader = function ( buffer ) {\n\n\t\t\t\tvar line, match,\n\n\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)$/,\n\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\theader = {\n\n\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t};\n\n\t\t\t\tif ( buffer.pos >= buffer.byteLength || ! ( line = fgets( buffer ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_read_error, \"no header found\" );\n\n\t\t\t\t}\n\n\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\tif ( ! ( match = line.match( magic_token_re ) ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad initial token\" );\n\n\t\t\t\t}\n\n\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\theader.programtype = match[ 1 ];\n\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\twhile ( true ) {\n\n\t\t\t\t\tline = fgets( buffer );\n\t\t\t\t\tif ( false === line ) break;\n\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\tif ( '#' === line.charAt( 0 ) ) {\n\n\t\t\t\t\t\theader.comments += line + \"\\n\";\n\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( gamma_re ) ) {\n\n\t\t\t\t\t\theader.gamma = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( exposure_re ) ) {\n\n\t\t\t\t\t\theader.exposure = parseFloat( match[ 1 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( format_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\theader.format = match[ 1 ];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( match = line.match( dimensions_re ) ) {\n\n\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\theader.height = parseInt( match[ 1 ], 10 );\n\t\t\t\t\t\theader.width = parseInt( match[ 2 ], 10 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( header.valid & RGBE_VALID_FORMAT ) && ( header.valid & RGBE_VALID_DIMENSIONS ) ) break;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_FORMAT ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing format specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! ( header.valid & RGBE_VALID_DIMENSIONS ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"missing image size specifier\" );\n\n\t\t\t\t}\n\n\t\t\t\treturn header;\n\n\t\t\t},\n\n\t\t\tRGBE_ReadPixels_RLE = function ( buffer, w, h ) {\n\n\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t;\n\n\t\t\t\tif (\n\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t( ( scanline_width < 8 ) || ( scanline_width > 0x7fff ) ) ||\n\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t( ( 2 !== buffer[ 0 ] ) || ( 2 !== buffer[ 1 ] ) || ( buffer[ 2 ] & 0x80 ) )\n\t\t\t\t) {\n\n\t\t\t\t\t// return the flat buffer\n\t\t\t\t\treturn new Uint8Array( buffer );\n\n\t\t\t\t}\n\n\t\t\t\tif ( scanline_width !== ( ( buffer[ 2 ] << 8 ) | buffer[ 3 ] ) ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"wrong scanline width\" );\n\n\t\t\t\t}\n\n\t\t\t\tdata_rgba = new Uint8Array( 4 * w * h );\n\n\t\t\t\tif ( ! data_rgba.length ) {\n\n\t\t\t\t\treturn rgbe_error( rgbe_memory_error, \"unable to allocate buffer space\" );\n\n\t\t\t\t}\n\n\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\trgbeStart = new Uint8Array( 4 );\n\t\t\t\tscanline_buffer = new Uint8Array( ptr_end );\n\n\t\t\t\t// read in each successive scanline\n\t\t\t\twhile ( ( num_scanlines > 0 ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\tif ( pos + 4 > buffer.byteLength ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_read_error );\n\n\t\t\t\t\t}\n\n\t\t\t\t\trgbeStart[ 0 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 1 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 2 ] = buffer[ pos ++ ];\n\t\t\t\t\trgbeStart[ 3 ] = buffer[ pos ++ ];\n\n\t\t\t\t\tif ( ( 2 != rgbeStart[ 0 ] ) || ( 2 != rgbeStart[ 1 ] ) || ( ( ( rgbeStart[ 2 ] << 8 ) | rgbeStart[ 3 ] ) != scanline_width ) ) {\n\n\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad rgbe scanline format\" );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\tptr = 0;\n\t\t\t\t\twhile ( ( ptr < ptr_end ) && ( pos < buffer.byteLength ) ) {\n\n\t\t\t\t\t\tcount = buffer[ pos ++ ];\n\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\tif ( isEncodedRun ) count -= 128;\n\n\t\t\t\t\t\tif ( ( 0 === count ) || ( ptr + count > ptr_end ) ) {\n\n\t\t\t\t\t\t\treturn rgbe_error( rgbe_format_error, \"bad scanline data\" );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( isEncodedRun ) {\n\n\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\tbyteValue = buffer[ pos ++ ];\n\t\t\t\t\t\t\tfor ( i = 0; i < count; i ++ ) {\n\n\t\t\t\t\t\t\t\tscanline_buffer[ ptr ++ ] = byteValue;\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\tscanline_buffer.set( buffer.subarray( pos, pos + count ), ptr );\n\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\tfor ( i = 0; i < l; i ++ ) {\n\n\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\tdata_rgba[ offset ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 1 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 2 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\tdata_rgba[ offset + 3 ] = scanline_buffer[ i + off ];\n\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnum_scanlines --;\n\n\t\t\t\t}\n\n\t\t\t\treturn data_rgba;\n\n\t\t\t};\n\n\t\tvar RGBEByteToRGBFloat = function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\tdestArray[ destOffset + 0 ] = sourceArray[ sourceOffset + 0 ] * scale;\n\t\t\tdestArray[ destOffset + 1 ] = sourceArray[ sourceOffset + 1 ] * scale;\n\t\t\tdestArray[ destOffset + 2 ] = sourceArray[ sourceOffset + 2 ] * scale;\n\n\t\t};\n\n\t\tvar RGBEByteToRGBHalf = ( function () {\n\n\t\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t\tvar floatView = new Float32Array( 1 );\n\t\t\tvar int32View = new Int32Array( floatView.buffer );\n\n\t\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t\t * used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t\t * by James Tursa?s half-precision code. */\n\t\t\tfunction toHalf( val ) {\n\n\t\t\t\tfloatView[ 0 ] = val;\n\t\t\t\tvar x = int32View[ 0 ];\n\n\t\t\t\tvar bits = ( x >> 16 ) & 0x8000; /* Get the sign */\n\t\t\t\tvar m = ( x >> 12 ) & 0x07ff; /* Keep one extra bit for rounding */\n\t\t\t\tvar e = ( x >> 23 ) & 0xff; /* Using int is faster here */\n\n\t\t\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t\t * half, return signed zero. */\n\t\t\t\tif ( e < 103 ) return bits;\n\n\t\t\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\t\t\tif ( e > 142 ) {\n\n\t\t\t\t\tbits |= 0x7c00;\n\t\t\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t\t * not Inf, so make sure we set one mantissa bit too. */\n\t\t\t\t\tbits |= ( ( e == 255 ) ? 0 : 1 ) && ( x & 0x007fffff );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\t/* If exponent underflows but not too much, return a denormal */\n\t\t\t\tif ( e < 113 ) {\n\n\t\t\t\t\tm |= 0x0800;\n\t\t\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t\t * to 1, which is OK. */\n\t\t\t\t\tbits |= ( m >> ( 114 - e ) ) + ( ( m >> ( 113 - e ) ) & 1 );\n\t\t\t\t\treturn bits;\n\n\t\t\t\t}\n\n\t\t\t\tbits |= ( ( e - 112 ) << 10 ) | ( m >> 1 );\n\t\t\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t\t * the exponent, which is OK. */\n\t\t\t\tbits += m & 1;\n\t\t\t\treturn bits;\n\n\t\t\t}\n\n\t\t\treturn function ( sourceArray, sourceOffset, destArray, destOffset ) {\n\n\t\t\t\tvar e = sourceArray[ sourceOffset + 3 ];\n\t\t\t\tvar scale = Math.pow( 2.0, e - 128.0 ) / 255.0;\n\n\t\t\t\tdestArray[ destOffset + 0 ] = toHalf( sourceArray[ sourceOffset + 0 ] * scale );\n\t\t\t\tdestArray[ destOffset + 1 ] = toHalf( sourceArray[ sourceOffset + 1 ] * scale );\n\t\t\t\tdestArray[ destOffset + 2 ] = toHalf( sourceArray[ sourceOffset + 2 ] * scale );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tvar byteArray = new Uint8Array( buffer );\n\t\tbyteArray.pos = 0;\n\t\tvar rgbe_header_info = RGBE_ReadHeader( byteArray );\n\n\t\tif ( RGBE_RETURN_FAILURE !== rgbe_header_info ) {\n\n\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\th = rgbe_header_info.height,\n\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE( byteArray.subarray( byteArray.pos ), w, h );\n\n\t\t\tif ( RGBE_RETURN_FAILURE !== image_rgba_data ) {\n\n\t\t\t\tswitch ( this.type ) {\n\n\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\tvar data = image_rgba_data;\n\t\t\t\t\t\tvar format = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\tvar type = UnsignedByteType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar floatArray = new Float32Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBFloat( image_rgba_data, j * 4, floatArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = floatArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = FloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\tvar numElements = ( image_rgba_data.length / 4 ) * 3;\n\t\t\t\t\t\tvar halfArray = new Uint16Array( numElements );\n\n\t\t\t\t\t\tfor ( var j = 0; j < numElements; j ++ ) {\n\n\t\t\t\t\t\t\tRGBEByteToRGBHalf( image_rgba_data, j * 4, halfArray, j * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar data = halfArray;\n\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\tvar type = HalfFloatType;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.error( 'THREE.RGBELoader: unsupported type: ', this.type );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\tdata: data,\n\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\tformat: format,\n\t\t\t\t\ttype: type\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tsetDataType: function ( value ) {\n\n\t\tthis.type = value;\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tfunction onLoadCallback( texture, texData ) {\n\n\t\t\tswitch ( texture.type ) {\n\n\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase FloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}\n\n\t\treturn DataTextureLoader.prototype.load.call( this, url, onLoadCallback, onProgress, onError );\n\n\t}\n\n} );\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nclass EnvironmentScene extends Scene {\n    constructor() {\n        super();\n        this.position.y = -3.5;\n        const geometry = new BoxBufferGeometry();\n        geometry.deleteAttribute('uv');\n        const roomMaterial = new MeshStandardMaterial({ metalness: 0, side: BackSide });\n        const boxMaterial = new MeshStandardMaterial({ metalness: 0 });\n        const mainLight = new PointLight(0xffffff, 500.0, 28, 2);\n        mainLight.position.set(0.418, 16.199, 0.300);\n        this.add(mainLight);\n        const room = new Mesh(geometry, roomMaterial);\n        room.position.set(-0.757, 13.219, 0.717);\n        room.scale.set(31.713, 28.305, 28.591);\n        this.add(room);\n        const box1 = new Mesh(geometry, boxMaterial);\n        box1.position.set(-10.906, 2.009, 1.846);\n        box1.rotation.set(0, -0.195, 0);\n        box1.scale.set(2.328, 7.905, 4.651);\n        this.add(box1);\n        const box2 = new Mesh(geometry, boxMaterial);\n        box2.position.set(-5.607, -0.754, -0.758);\n        box2.rotation.set(0, 0.994, 0);\n        box2.scale.set(1.970, 1.534, 3.955);\n        this.add(box2);\n        const box3 = new Mesh(geometry, boxMaterial);\n        box3.position.set(6.167, 0.857, 7.803);\n        box3.rotation.set(0, 0.561, 0);\n        box3.scale.set(3.927, 6.285, 3.687);\n        this.add(box3);\n        const box4 = new Mesh(geometry, boxMaterial);\n        box4.position.set(-2.017, 0.018, 6.124);\n        box4.rotation.set(0, 0.333, 0);\n        box4.scale.set(2.002, 4.566, 2.064);\n        this.add(box4);\n        const box5 = new Mesh(geometry, boxMaterial);\n        box5.position.set(2.291, -0.756, -2.621);\n        box5.rotation.set(0, -0.286, 0);\n        box5.scale.set(1.546, 1.552, 1.496);\n        this.add(box5);\n        const box6 = new Mesh(geometry, boxMaterial);\n        box6.position.set(-2.193, -0.369, -5.547);\n        box6.rotation.set(0, 0.516, 0);\n        box6.scale.set(3.875, 3.487, 2.986);\n        this.add(box6);\n        // -x right\n        const light1 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light1.position.set(-16.116, 14.37, 8.208);\n        light1.scale.set(0.1, 2.428, 2.739);\n        this.add(light1);\n        // -x left\n        const light2 = new Mesh(geometry, this.createAreaLightMaterial(50));\n        light2.position.set(-16.109, 18.021, -8.207);\n        light2.scale.set(0.1, 2.425, 2.751);\n        this.add(light2);\n        // +x\n        const light3 = new Mesh(geometry, this.createAreaLightMaterial(17));\n        light3.position.set(14.904, 12.198, -1.832);\n        light3.scale.set(0.15, 4.265, 6.331);\n        this.add(light3);\n        // +z\n        const light4 = new Mesh(geometry, this.createAreaLightMaterial(43));\n        light4.position.set(-0.462, 8.89, 14.520);\n        light4.scale.set(4.38, 5.441, 0.088);\n        this.add(light4);\n        // -z\n        const light5 = new Mesh(geometry, this.createAreaLightMaterial(20));\n        light5.position.set(3.235, 11.486, -12.541);\n        light5.scale.set(2.5, 2.0, 0.1);\n        this.add(light5);\n        // +y\n        const light6 = new Mesh(geometry, this.createAreaLightMaterial(100));\n        light6.position.set(0.0, 20.0, 0.0);\n        light6.scale.set(1.0, 0.1, 1.0);\n        this.add(light6);\n    }\n    createAreaLightMaterial(intensity) {\n        const material = new MeshBasicMaterial();\n        material.color.setScalar(intensity);\n        return material;\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst GENERATED_SIGMA = 0.04;\n// Enable three's loader cache so we don't create redundant\n// Image objects to decode images fetched over the network.\nCache.enabled = true;\nconst HDR_FILE_RE = /\\.hdr(\\.js)?$/;\nconst ldrLoader = new TextureLoader();\nconst hdrLoader = new RGBELoader();\n// Attach a `userData` object for arbitrary data on textures that\n// originate from TextureUtils, similar to Object3D's userData,\n// for help debugging, providing metadata for tests, and semantically\n// describe the type of texture within the context of this application.\nconst userData = {\n    url: null,\n};\nclass TextureUtils extends EventDispatcher {\n    constructor(threeRenderer) {\n        super();\n        this.generatedEnvironmentMap = null;\n        this.skyboxCache = new Map();\n        this.environmentMapCache = new Map();\n        this.PMREMGenerator = new PMREMGenerator(threeRenderer);\n    }\n    async load(url, progressCallback = () => { }) {\n        try {\n            const isHDR = HDR_FILE_RE.test(url);\n            const loader = isHDR ? hdrLoader : ldrLoader;\n            const texture = await new Promise((resolve, reject) => loader.load(url, resolve, (event) => {\n                progressCallback(event.loaded / event.total * 0.9);\n            }, reject));\n            progressCallback(1.0);\n            this.addMetadata(texture, url);\n            texture.mapping = EquirectangularReflectionMapping;\n            if (isHDR) {\n                texture.encoding = RGBEEncoding;\n                texture.minFilter = NearestFilter;\n                texture.magFilter = NearestFilter;\n                texture.flipY = true;\n            }\n            else {\n                texture.encoding = GammaEncoding;\n            }\n            return texture;\n        }\n        finally {\n            if (progressCallback) {\n                progressCallback(1);\n            }\n        }\n    }\n    /**\n     * Returns a { skybox, environmentMap } object with the targets/textures\n     * accordingly. `skybox` is a WebGLRenderCubeTarget, and `environmentMap`\n     * is a Texture from a WebGLRenderCubeTarget.\n     */\n    async generateEnvironmentMapAndSkybox(skyboxUrl = null, environmentMapUrl = null, options = {}) {\n        const { progressTracker } = options;\n        const updateGenerationProgress = progressTracker != null ? progressTracker.beginActivity() : () => { };\n        try {\n            let skyboxLoads = Promise.resolve(null);\n            let environmentMapLoads;\n            // If we have a skybox URL, attempt to load it as a cubemap\n            if (!!skyboxUrl) {\n                skyboxLoads = this.loadSkyboxFromUrl(skyboxUrl, progressTracker);\n            }\n            if (!!environmentMapUrl) {\n                // We have an available environment map URL\n                environmentMapLoads =\n                    this.loadEnvironmentMapFromUrl(environmentMapUrl, progressTracker);\n            }\n            else if (!!skyboxUrl) {\n                // Fallback to deriving the environment map from an available skybox\n                environmentMapLoads =\n                    this.loadEnvironmentMapFromUrl(skyboxUrl, progressTracker);\n            }\n            else {\n                // Fallback to generating the environment map\n                environmentMapLoads = this.loadGeneratedEnvironmentMap();\n            }\n            let [environmentMap, skybox] = await Promise.all([environmentMapLoads, skyboxLoads]);\n            if (environmentMap == null) {\n                throw new Error('Failed to load environment map.');\n            }\n            return { environmentMap, skybox };\n        }\n        finally {\n            updateGenerationProgress(1.0);\n        }\n    }\n    addMetadata(texture, url) {\n        if (texture == null) {\n            return;\n        }\n        texture.userData = Object.assign(Object.assign({}, userData), ({\n            url: url,\n        }));\n    }\n    /**\n     * Loads an equirect Texture from a given URL, for use as a skybox.\n     */\n    loadSkyboxFromUrl(url, progressTracker) {\n        if (!this.skyboxCache.has(url)) {\n            const progressCallback = progressTracker ? progressTracker.beginActivity() : () => { };\n            const skyboxMapLoads = this.load(url, progressCallback);\n            this.skyboxCache.set(url, skyboxMapLoads);\n        }\n        return this.skyboxCache.get(url);\n    }\n    /**\n     * Loads a WebGLRenderTarget from a given URL. The render target in this\n     * case will be assumed to be used as an environment map.\n     */\n    loadEnvironmentMapFromUrl(url, progressTracker) {\n        if (!this.environmentMapCache.has(url)) {\n            const environmentMapLoads = this.loadSkyboxFromUrl(url, progressTracker).then((equirect) => {\n                const cubeUV = this.PMREMGenerator.fromEquirectangular(equirect);\n                this.addMetadata(cubeUV.texture, url);\n                return cubeUV;\n            });\n            this.PMREMGenerator.compileEquirectangularShader();\n            this.environmentMapCache.set(url, environmentMapLoads);\n        }\n        return this.environmentMapCache.get(url);\n    }\n    /**\n     * Loads a dynamically generated environment map.\n     */\n    loadGeneratedEnvironmentMap() {\n        if (this.generatedEnvironmentMap == null) {\n            const defaultScene = new EnvironmentScene;\n            this.generatedEnvironmentMap =\n                this.PMREMGenerator.fromScene(defaultScene, GENERATED_SIGMA);\n            this.addMetadata(this.generatedEnvironmentMap.texture, null);\n        }\n        return Promise.resolve(this.generatedEnvironmentMap);\n    }\n    async dispose() {\n        const allTargetsLoad = [];\n        // NOTE(cdata): We would use for-of iteration on the maps here, but\n        // IE11 doesn't have the necessary iterator-returning methods. So,\n        // disposal of these render targets is kind of convoluted as a result.\n        this.environmentMapCache.forEach((targetLoads) => {\n            allTargetsLoad.push(targetLoads);\n        });\n        this.environmentMapCache.clear();\n        for (const targetLoads of allTargetsLoad) {\n            try {\n                const target = await targetLoads;\n                target.dispose();\n            }\n            catch (e) {\n                // Suppress errors, so that all render targets will be disposed\n            }\n        }\n        if (this.generatedEnvironmentMap != null) {\n            this.generatedEnvironmentMap.dispose();\n            this.generatedEnvironmentMap = null;\n        }\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$6, _b$4;\n// Between 0 and 1: larger means the average responds faster and is less smooth.\nconst DURATION_DECAY = 0.2;\nconst LOW_FRAME_DURATION_MS = 18;\nconst HIGH_FRAME_DURATION_MS = 26;\nconst MAX_AVG_CHANGE_MS = 2;\nconst SCALE_STEP = 0.79;\nconst DEFAULT_MIN_SCALE = 0.5;\nconst $onWebGLContextLost = Symbol('onWebGLContextLost');\nconst $webGLContextLostHandler = Symbol('webGLContextLostHandler');\nconst $singleton = Symbol('singleton');\n/**\n * Registers canvases with Canvas2DRenderingContexts and renders them\n * all in the same WebGLRenderingContext, spitting out textures to apply\n * to the canvases. Creates a fullscreen WebGL canvas that is not added\n * to the DOM, and on each frame, renders each registered canvas on a portion\n * of the WebGL canvas, and applies the texture on the registered canvas.\n *\n * In the future, can use ImageBitmapRenderingContext instead of\n * Canvas2DRenderingContext if supported for cheaper transfering of\n * the texture.\n */\nclass Renderer extends EventDispatcher {\n    constructor(options) {\n        super();\n        this.loader = new CachingGLTFLoader(ModelViewerGLTFInstance);\n        this.width = 0;\n        this.height = 0;\n        this.dpr = 1;\n        this.minScale = DEFAULT_MIN_SCALE;\n        this.debugger = null;\n        this.scenes = new Set();\n        this.multipleScenesVisible = false;\n        this.scale = 1;\n        this.avgFrameDuration = (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        this[_b$4] = (event) => this[$onWebGLContextLost](event);\n        this.dpr = resolveDpr();\n        this.canvasElement = document.createElement('canvas');\n        this.canvasElement.id = 'webgl-canvas';\n        this.canvas3D = \n            this.canvasElement;\n        this.canvas3D.addEventListener('webglcontextlost', this[$webGLContextLostHandler]);\n        try {\n            this.threeRenderer = new WebGL1Renderer({\n                canvas: this.canvas3D,\n                alpha: true,\n                antialias: true,\n                powerPreference: 'high-performance',\n                preserveDrawingBuffer: true\n            });\n            this.threeRenderer.autoClear = true;\n            this.threeRenderer.outputEncoding = GammaEncoding;\n            this.threeRenderer.gammaFactor = 2.2;\n            this.threeRenderer.physicallyCorrectLights = true;\n            this.threeRenderer.setPixelRatio(1); // handle pixel ratio externally\n            this.threeRenderer.shadowMap.enabled = true;\n            this.threeRenderer.shadowMap.type = PCFSoftShadowMap;\n            this.threeRenderer.shadowMap.autoUpdate = false;\n            this.debugger =\n                options != null && !!options.debug ? new Debugger(this) : null;\n            this.threeRenderer.debug = { checkShaderErrors: !!this.debugger };\n            // ACESFilmicToneMapping appears to be the most \"saturated\",\n            // and similar to Filament's gltf-viewer.\n            this.threeRenderer.toneMapping = ACESFilmicToneMapping;\n        }\n        catch (error) {\n            console.warn(error);\n        }\n        this.arRenderer = new ARRenderer(this);\n        this.textureUtils =\n            this.canRender ? new TextureUtils(this.threeRenderer) : null;\n        this.roughnessMipmapper = new RoughnessMipmapper(this.threeRenderer);\n        this.updateRendererSize();\n        this.lastTick = performance.now();\n        this.avgFrameDuration = 0;\n    }\n    static get singleton() {\n        return this[$singleton];\n    }\n    static resetSingleton() {\n        this[$singleton].dispose();\n        this[$singleton] = new Renderer({ debug: isDebugMode() });\n    }\n    get canRender() {\n        return this.threeRenderer != null;\n    }\n    get scaleFactor() {\n        return this.scale;\n    }\n    /**\n     * Updates the renderer's size based on the largest scene and any changes to\n     * device pixel ratio.\n     */\n    updateRendererSize() {\n        const dpr = resolveDpr();\n        if (dpr !== this.dpr) {\n            // If the device pixel ratio has changed due to page zoom, elements\n            // specified by % width do not fire a resize event even though their CSS\n            // pixel dimensions change, so we force them to update their size here.\n            for (const scene of this.scenes) {\n                const { element } = scene;\n                element[$updateSize](element.getBoundingClientRect());\n            }\n        }\n        // Make the renderer the size of the largest scene\n        let width = 0;\n        let height = 0;\n        for (const scene of this.scenes) {\n            width = Math.max(width, scene.width);\n            height = Math.max(height, scene.height);\n        }\n        if (width === this.width && height === this.height && dpr === this.dpr) {\n            return;\n        }\n        this.width = width;\n        this.height = height;\n        this.dpr = dpr;\n        if (this.canRender) {\n            this.threeRenderer.setSize(width * dpr, height * dpr, false);\n        }\n        // Expand the canvas size to make up for shrinking the viewport.\n        const widthCSS = width / this.scale;\n        const heightCSS = height / this.scale;\n        // The canvas element must by styled outside of three due to the offscreen\n        // canvas not being directly stylable.\n        this.canvasElement.style.width = `${widthCSS}px`;\n        this.canvasElement.style.height = `${heightCSS}px`;\n        // Each scene's canvas must match the renderer size. In general they can be\n        // larger than the element that contains them, but the overflow is hidden\n        // and only the portion that is shown is copied over.\n        for (const scene of this.scenes) {\n            const { canvas } = scene;\n            canvas.width = Math.round(width * dpr);\n            canvas.height = Math.round(height * dpr);\n            canvas.style.width = `${widthCSS}px`;\n            canvas.style.height = `${heightCSS}px`;\n            scene.isDirty = true;\n        }\n    }\n    updateRendererScale() {\n        let { scale } = this;\n        if (this.avgFrameDuration > HIGH_FRAME_DURATION_MS &&\n            scale > this.minScale) {\n            scale *= SCALE_STEP;\n        }\n        else if (this.avgFrameDuration < LOW_FRAME_DURATION_MS && scale < 1) {\n            scale /= SCALE_STEP;\n            scale = Math.min(scale, 1);\n        }\n        scale = Math.max(scale, this.minScale);\n        if (scale == this.scale) {\n            return;\n        }\n        this.scale = scale;\n        this.avgFrameDuration =\n            (HIGH_FRAME_DURATION_MS + LOW_FRAME_DURATION_MS) / 2;\n        const width = this.width / scale;\n        const height = this.height / scale;\n        this.canvasElement.style.width = `${width}px`;\n        this.canvasElement.style.height = `${height}px`;\n        for (const scene of this.scenes) {\n            const { style } = scene.canvas;\n            style.width = `${width}px`;\n            style.height = `${height}px`;\n            scene.isDirty = true;\n        }\n    }\n    registerScene(scene) {\n        this.scenes.add(scene);\n        const { canvas } = scene;\n        canvas.width = Math.round(this.width * this.dpr);\n        canvas.height = Math.round(this.height * this.dpr);\n        canvas.style.width = `${this.width / this.scale}px`;\n        canvas.style.height = `${this.height / this.scale}px`;\n        if (this.multipleScenesVisible) {\n            canvas.classList.add('show');\n        }\n        scene.isDirty = true;\n        if (this.canRender && this.scenes.size > 0) {\n            this.threeRenderer.setAnimationLoop((time) => this.render(time));\n        }\n        if (this.debugger != null) {\n            this.debugger.addScene(scene);\n        }\n    }\n    unregisterScene(scene) {\n        this.scenes.delete(scene);\n        if (this.canRender && this.scenes.size === 0) {\n            this.threeRenderer.setAnimationLoop(null);\n        }\n        if (this.debugger != null) {\n            this.debugger.removeScene(scene);\n        }\n    }\n    displayCanvas(scene) {\n        return this.multipleScenesVisible ? scene.element[$canvas] :\n            this.canvasElement;\n    }\n    /**\n     * The function enables an optimization, where when there is only a single\n     * <model-viewer> element, we can use the renderer's 3D canvas directly for\n     * display. Otherwise we need to use the element's 2D canvas and copy the\n     * renderer's result into it.\n     */\n    selectCanvas() {\n        let visibleScenes = 0;\n        let visibleInput = null;\n        for (const scene of this.scenes) {\n            const { element } = scene;\n            if (element.modelIsVisible) {\n                ++visibleScenes;\n                visibleInput = element[$userInputElement];\n            }\n        }\n        const multipleScenesVisible = visibleScenes > 1 || USE_OFFSCREEN_CANVAS;\n        const { canvasElement } = this;\n        if (multipleScenesVisible === this.multipleScenesVisible &&\n            (multipleScenesVisible ||\n                canvasElement.parentElement === visibleInput)) {\n            return;\n        }\n        this.multipleScenesVisible = multipleScenesVisible;\n        if (multipleScenesVisible) {\n            canvasElement.classList.remove('show');\n        }\n        for (const scene of this.scenes) {\n            const userInputElement = scene.element[$userInputElement];\n            const canvas = scene.element[$canvas];\n            if (multipleScenesVisible) {\n                canvas.classList.add('show');\n                scene.isDirty = true;\n            }\n            else if (userInputElement === visibleInput) {\n                userInputElement.appendChild(canvasElement);\n                canvasElement.classList.add('show');\n                canvas.classList.remove('show');\n                scene.isDirty = true;\n            }\n        }\n    }\n    /**\n     * Returns an array version of this.scenes where the non-visible ones are\n     * first. This allows eager scenes to be rendered before they are visible,\n     * without needing the multi-canvas render path.\n     */\n    orderedScenes() {\n        const scenes = [];\n        for (const visible of [false, true]) {\n            for (const scene of this.scenes) {\n                if (scene.element.modelIsVisible === visible) {\n                    scenes.push(scene);\n                }\n            }\n        }\n        return scenes;\n    }\n    get isPresenting() {\n        return this.arRenderer.isPresenting;\n    }\n    /**\n     * This method takes care of updating the element and renderer state based on\n     * the time that has passed since the last rendered frame.\n     */\n    preRender(scene, t, delta) {\n        const { element, exposure, model } = scene;\n        element[$tick$1](t, delta);\n        const exposureIsNumber = typeof exposure === 'number' && !self.isNaN(exposure);\n        this.threeRenderer.toneMappingExposure = exposureIsNumber ? exposure : 1.0;\n        if (model.updateShadow()) {\n            this.threeRenderer.shadowMap.needsUpdate = true;\n        }\n    }\n    render(t) {\n        const delta = t - this.lastTick;\n        this.lastTick = t;\n        if (!this.canRender || this.isPresenting) {\n            return;\n        }\n        this.avgFrameDuration += clamp(DURATION_DECAY * (delta - this.avgFrameDuration), -MAX_AVG_CHANGE_MS, MAX_AVG_CHANGE_MS);\n        this.selectCanvas();\n        this.updateRendererSize();\n        this.updateRendererScale();\n        const { dpr, scale } = this;\n        for (const scene of this.orderedScenes()) {\n            if (!scene.element[$sceneIsReady]()) {\n                continue;\n            }\n            this.preRender(scene, t, delta);\n            if (!scene.isDirty) {\n                continue;\n            }\n            scene.isDirty = false;\n            if (!scene.element.modelIsVisible && !this.multipleScenesVisible) {\n                // Here we are pre-rendering on the visible canvas, so we must mark the\n                // visible scene dirty to ensure it overwrites us.\n                for (const scene of this.scenes) {\n                    if (scene.element.modelIsVisible) {\n                        scene.isDirty = true;\n                    }\n                }\n            }\n            // We avoid using the Three.js PixelRatio and handle it ourselves here so\n            // that we can do proper rounding and avoid white boundary pixels.\n            const width = Math.min(Math.ceil(scene.width * scale * dpr), this.canvas3D.width);\n            const height = Math.min(Math.ceil(scene.height * scale * dpr), this.canvas3D.height);\n            // Need to set the render target in order to prevent\n            // clearing the depth from a different buffer\n            this.threeRenderer.setRenderTarget(null);\n            this.threeRenderer.setViewport(0, Math.floor(this.height * dpr) - height, width, height);\n            this.threeRenderer.render(scene, scene.getCamera());\n            if (this.multipleScenesVisible) {\n                if (scene.context == null) {\n                    scene.createContext();\n                }\n                {\n                    const context2D = scene.context;\n                    context2D.clearRect(0, 0, width, height);\n                    context2D.drawImage(this.canvas3D, 0, 0, width, height, 0, 0, width, height);\n                }\n            }\n        }\n    }\n    dispose() {\n        if (this.textureUtils != null) {\n            this.textureUtils.dispose();\n        }\n        if (this.threeRenderer != null) {\n            this.threeRenderer.dispose();\n        }\n        this.textureUtils = null;\n        this.threeRenderer = null;\n        this.scenes.clear();\n        this.canvas3D.removeEventListener('webglcontextlost', this[$webGLContextLostHandler]);\n    }\n    [(_a$6 = $singleton, _b$4 = $webGLContextLostHandler, $onWebGLContextLost)](event) {\n        this.dispatchEvent({ type: 'contextlost', sourceEvent: event });\n    }\n}\nRenderer[_a$6] = new Renderer({ debug: isDebugMode() });\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Converts a base64 string which represents a data url\n * into a Blob of the same contents.\n */\nconst dataUrlToBlob = async (base64DataUrl) => {\n    return new Promise((resolve, reject) => {\n        const sliceSize = 512;\n        const typeMatch = base64DataUrl.match(/data:(.*);/);\n        if (!typeMatch) {\n            return reject(new Error(`${base64DataUrl} is not a valid data Url`));\n        }\n        const type = typeMatch[1];\n        const base64 = base64DataUrl.replace(/data:image\\/\\w+;base64,/, '');\n        const byteCharacters = atob(base64);\n        const byteArrays = [];\n        for (let offset = 0; offset < byteCharacters.length; offset += sliceSize) {\n            const slice = byteCharacters.slice(offset, offset + sliceSize);\n            const byteNumbers = new Array(slice.length);\n            for (let i = 0; i < slice.length; i++) {\n                byteNumbers[i] = slice.charCodeAt(i);\n            }\n            const byteArray = new Uint8Array(byteNumbers);\n            byteArrays.push(byteArray);\n        }\n        resolve(new Blob(byteArrays, { type }));\n    });\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$7, _b$5;\nconst $ongoingActivities = Symbol('ongoingActivities');\nconst $announceTotalProgress = Symbol('announceTotalProgress');\nconst $eventDelegate = Symbol('eventDelegate');\nconst ACTIVITY_PROGRESS_WEIGHT = 0.5;\n/**\n * ProgressTracker is an event emitter that helps to track the ongoing progress\n * of many simultaneous actions.\n *\n * ProgressTracker reports progress activity in the form of a progress event.\n * The event.detail.totalProgress value indicates the elapsed progress of all\n * activities being tracked by the ProgressTracker.\n *\n * The value of totalProgress is a number that progresses from 0 to 1. The\n * ProgressTracker allows for the lazy accumulation of tracked actions, so the\n * total progress represents a abstract, non-absolute progress towards the\n * completion of all currently tracked events.\n *\n * When all currently tracked activities are finished, the ProgressTracker\n * emits one final progress event and then resets the list of its currently\n * tracked activities. This means that from an observer's perspective,\n * ongoing activities will accumulate and collectively contribute to the notion\n * of total progress until all currently tracked ongoing activities have\n * completed.\n */\nclass ProgressTracker {\n    constructor() {\n        // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n        // EventTarget interface without implementing or requiring a full polyfill. We\n        // should remove this once EventTarget is inheritable everywhere.\n        this[_a$7] = document.createDocumentFragment();\n        // NOTE(cdata): We declare each of these methods independently here so that we\n        // can inherit the correct types from EventTarget's interface. Maybe there is\n        // a better way to do this dynamically so that we don't repeat ourselves?\n        this.addEventListener = (...args) => this[$eventDelegate].addEventListener(...args);\n        this.removeEventListener = (...args) => this[$eventDelegate].removeEventListener(...args);\n        this.dispatchEvent = (...args) => this[$eventDelegate].dispatchEvent(...args);\n        this[_b$5] = new Set();\n    }\n    /**\n     * The total number of activities currently being tracked.\n     */\n    get ongoingActivityCount() {\n        return this[$ongoingActivities].size;\n    }\n    /**\n     * Registers a new activity to be tracked by the progress tracker. The method\n     * returns a special callback that should be invoked whenever new progress is\n     * ready to be reported. The progress should be reported as a value between 0\n     * and 1, where 0 would represent the beginning of the action and 1 would\n     * represent its completion.\n     *\n     * There is no built-in notion of a time-out for ongoing activities, so once\n     * an ongoing activity is begun, it is up to the consumer of this API to\n     * update the progress until that activity is no longer ongoing.\n     *\n     * Progress is only allowed to move forward for any given activity. If a lower\n     * progress is reported than the previously reported progress, it will be\n     * ignored.\n     */\n    beginActivity() {\n        const activity = { progress: 0 };\n        this[$ongoingActivities].add(activity);\n        if (this.ongoingActivityCount === 1) {\n            // Announce the first progress event (which should always be 0 / 1\n            // total progress):\n            this[$announceTotalProgress]();\n        }\n        return (progress) => {\n            let nextProgress;\n            nextProgress = Math.max(clamp(progress, 0, 1), activity.progress);\n            if (nextProgress !== activity.progress) {\n                activity.progress = nextProgress;\n                this[$announceTotalProgress]();\n            }\n            return activity.progress;\n        };\n    }\n    [(_a$7 = $eventDelegate, _b$5 = $ongoingActivities, $announceTotalProgress)]() {\n        let totalProgress = 0;\n        let statusCount = 0;\n        let completedActivities = 0;\n        for (const activity of this[$ongoingActivities]) {\n            const { progress } = activity;\n            const compoundWeight = ACTIVITY_PROGRESS_WEIGHT / Math.pow(2, statusCount++);\n            totalProgress += progress * compoundWeight;\n            if (progress === 1.0) {\n                completedActivities++;\n            }\n        }\n        if (completedActivities === this.ongoingActivityCount) {\n            totalProgress = 1.0;\n            this[$ongoingActivities].clear();\n        }\n        this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress } }));\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar _a$8, _b$6, _c$1, _d$1, _e$1, _f$1, _g$1, _h$1, _j$1, _k$1;\nconst CLEAR_MODEL_TIMEOUT_MS = 1000;\nconst FALLBACK_SIZE_UPDATE_THRESHOLD_MS = 50;\nconst ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD = 0;\nconst UNSIZED_MEDIA_WIDTH = 300;\nconst UNSIZED_MEDIA_HEIGHT = 150;\nconst blobCanvas = document.createElement('canvas');\nlet blobContext = null;\nconst $template = Symbol('template');\nconst $fallbackResizeHandler = Symbol('fallbackResizeHandler');\nconst $defaultAriaLabel = Symbol('defaultAriaLabel');\nconst $resizeObserver = Symbol('resizeObserver');\nconst $intersectionObserver = Symbol('intersectionObserver');\nconst $clearModelTimeout = Symbol('clearModelTimeout');\nconst $onContextLost = Symbol('onContextLost');\nconst $contextLostHandler = Symbol('contextLostHandler');\nconst $loaded = Symbol('loaded');\nconst $updateSize = Symbol('updateSize');\nconst $isElementInViewport = Symbol('isElementInViewport');\nconst $announceModelVisibility = Symbol('announceModelVisibility');\nconst $ariaLabel = Symbol('ariaLabel');\nconst $loadedTime = Symbol('loadedTime');\nconst $updateSource = Symbol('updateSource');\nconst $markLoaded = Symbol('markLoaded');\nconst $container = Symbol('container');\nconst $userInputElement = Symbol('input');\nconst $canvas = Symbol('canvas');\nconst $scene = Symbol('scene');\nconst $needsRender = Symbol('needsRender');\nconst $tick$1 = Symbol('tick');\nconst $onModelLoad = Symbol('onModelLoad');\nconst $onResize = Symbol('onResize');\nconst $renderer = Symbol('renderer');\nconst $progressTracker = Symbol('progressTracker');\nconst $getLoaded = Symbol('getLoaded');\nconst $getModelIsVisible = Symbol('getModelIsVisible');\nconst $shouldAttemptPreload = Symbol('shouldAttemptPreload');\nconst $sceneIsReady = Symbol('sceneIsReady');\nconst $hasTransitioned = Symbol('hasTransitioned');\nconst toVector3D = (v) => {\n    return {\n        x: v.x,\n        y: v.y,\n        z: v.z,\n        toString() {\n            return `${this.x}m ${this.y}m ${this.z}m`;\n        }\n    };\n};\n/**\n * Definition for a basic <model-viewer> element.\n */\nclass ModelViewerElementBase extends UpdatingElement {\n    /**\n     * Creates a new ModelViewerElement.\n     */\n    constructor() {\n        super();\n        this.alt = null;\n        this.src = null;\n        this[_a$8] = false;\n        this[_b$6] = false;\n        this[_c$1] = 0;\n        this[_d$1] = null;\n        this[_e$1] = debounce(() => {\n            const boundingRect = this.getBoundingClientRect();\n            this[$updateSize](boundingRect);\n        }, FALLBACK_SIZE_UPDATE_THRESHOLD_MS);\n        this[_f$1] = debounce((oldVisibility) => {\n            const newVisibility = this.modelIsVisible;\n            if (newVisibility !== oldVisibility) {\n                this.dispatchEvent(new CustomEvent('model-visibility', { detail: { visible: newVisibility } }));\n            }\n        }, ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD);\n        this[_g$1] = null;\n        this[_h$1] = null;\n        this[_j$1] = new ProgressTracker();\n        this[_k$1] = (event) => this[$onContextLost](event);\n        // NOTE(cdata): It is *very important* to access this template first so that\n        // the ShadyCSS template preparation steps happen before element styling in\n        // IE11:\n        const template = this.constructor.template;\n        if (window.ShadyCSS) {\n            window.ShadyCSS.styleElement(this, {});\n        }\n        // NOTE(cdata): The canonical ShadyCSS examples suggest that the Shadow Root\n        // should be created after the invocation of ShadyCSS.styleElement\n        this.attachShadow({ mode: 'open' });\n        const shadowRoot = this.shadowRoot;\n        shadowRoot.appendChild(template.content.cloneNode(true));\n        this[$container] = shadowRoot.querySelector('.container');\n        this[$userInputElement] =\n            shadowRoot.querySelector('.userInput');\n        this[$canvas] = shadowRoot.querySelector('canvas');\n        this[$defaultAriaLabel] =\n            this[$userInputElement].getAttribute('aria-label');\n        // Because of potential race conditions related to invoking the constructor\n        // we only use the bounding rect to set the initial size if the element is\n        // already connected to the document:\n        let width, height;\n        if (this.isConnected) {\n            const rect = this.getBoundingClientRect();\n            width = rect.width;\n            height = rect.height;\n        }\n        else {\n            width = UNSIZED_MEDIA_WIDTH;\n            height = UNSIZED_MEDIA_HEIGHT;\n        }\n        // Create the underlying ModelScene.\n        this[$scene] =\n            new ModelScene({ canvas: this[$canvas], element: this, width, height });\n        this[$scene].addEventListener('model-load', (event) => {\n            this[$markLoaded]();\n            this[$onModelLoad]();\n            this.dispatchEvent(new CustomEvent('load', { detail: { url: event.url } }));\n        });\n        // Update initial size on microtask timing so that subclasses have a\n        // chance to initialize\n        Promise.resolve().then(() => {\n            this[$updateSize](this.getBoundingClientRect());\n        });\n        if (HAS_RESIZE_OBSERVER) {\n            // Set up a resize observer so we can scale our canvas\n            // if our <model-viewer> changes\n            this[$resizeObserver] = new ResizeObserver((entries) => {\n                // Don't resize anything if in AR mode; otherwise the canvas\n                // scaling to fullscreen on entering AR will clobber the flat/2d\n                // dimensions of the element.\n                if (this[$renderer].isPresenting) {\n                    return;\n                }\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        this[$updateSize](entry.contentRect);\n                    }\n                }\n            });\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver] = new IntersectionObserver(entries => {\n                for (let entry of entries) {\n                    if (entry.target === this) {\n                        const oldVisibility = this.modelIsVisible;\n                        this[$isElementInViewport] = entry.isIntersecting;\n                        this[$announceModelVisibility](oldVisibility);\n                        if (this[$isElementInViewport] && !this[$sceneIsReady]()) {\n                            this[$updateSource]();\n                        }\n                    }\n                }\n            }, {\n                root: null,\n                // We used to have margin here, but it was causing animated models below\n                // the fold to steal the frame budget. Weirder still, it would also\n                // cause input events to be swallowed, sometimes for seconds on the\n                // model above the fold, but only when the animated model was completely\n                // below. Setting this margin to zero fixed it.\n                rootMargin: '0px',\n                threshold: 0,\n            });\n        }\n        else {\n            // If there is no intersection obsever, then all models should be visible\n            // at all times:\n            this[$isElementInViewport] = true;\n        }\n    }\n    static get is() {\n        return 'model-viewer';\n    }\n    /** @nocollapse */\n    static get template() {\n        if (!this.hasOwnProperty($template)) {\n            this[$template] = makeTemplate(this.is);\n        }\n        return this[$template];\n    }\n    /** @export */\n    static set modelCacheSize(value) {\n        CachingGLTFLoader[$evictionPolicy].evictionThreshold = value;\n    }\n    /** @export */\n    static get modelCacheSize() {\n        return CachingGLTFLoader[$evictionPolicy].evictionThreshold;\n    }\n    /** @export */\n    static set minimumRenderScale(value) {\n        if (value > 1) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a maximum value of 1.');\n        }\n        if (value <= 0) {\n            console.warn('<model-viewer> minimumRenderScale has been clamped to a minimum value of 0. This could result in single-pixel renders on some devices; consider increasing.');\n        }\n        Renderer.singleton.minScale = Math.max(0, Math.min(1, value));\n    }\n    /** @export */\n    static get minimumRenderScale() {\n        return Renderer.singleton.minScale;\n    }\n    /** @export */\n    get loaded() {\n        return this[$getLoaded]();\n    }\n    get [(_a$8 = $isElementInViewport, _b$6 = $loaded, _c$1 = $loadedTime, _d$1 = $clearModelTimeout, _e$1 = $fallbackResizeHandler, _f$1 = $announceModelVisibility, _g$1 = $resizeObserver, _h$1 = $intersectionObserver, _j$1 = $progressTracker, _k$1 = $contextLostHandler, $renderer)]() {\n        return Renderer.singleton;\n    }\n    /** @export */\n    get modelIsVisible() {\n        return this[$getModelIsVisible]();\n    }\n    connectedCallback() {\n        super.connectedCallback && super.connectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].observe(this);\n        }\n        else {\n            self.addEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].observe(this);\n        }\n        const renderer = this[$renderer];\n        renderer.addEventListener('contextlost', this[$contextLostHandler]);\n        renderer.registerScene(this[$scene]);\n        if (this[$clearModelTimeout] != null) {\n            self.clearTimeout(this[$clearModelTimeout]);\n            this[$clearModelTimeout] = null;\n            // Force an update in case the model has been evicted from our GLTF cache\n            // @see https://lit-element.polymer-project.org/guide/lifecycle#requestupdate\n            this.requestUpdate('src', null);\n        }\n    }\n    disconnectedCallback() {\n        super.disconnectedCallback && super.disconnectedCallback();\n        if (HAS_RESIZE_OBSERVER) {\n            this[$resizeObserver].unobserve(this);\n        }\n        else {\n            self.removeEventListener('resize', this[$fallbackResizeHandler]);\n        }\n        if (HAS_INTERSECTION_OBSERVER) {\n            this[$intersectionObserver].unobserve(this);\n        }\n        const renderer = this[$renderer];\n        renderer.removeEventListener('contextlost', this[$contextLostHandler]);\n        renderer.unregisterScene(this[$scene]);\n        this[$clearModelTimeout] = self.setTimeout(() => {\n            this[$scene].model.clear();\n        }, CLEAR_MODEL_TIMEOUT_MS);\n    }\n    updated(changedProperties) {\n        super.updated(changedProperties);\n        // NOTE(cdata): If a property changes from values A -> B -> A in the space\n        // of a microtask, LitElement/UpdatingElement will notify of a change even\n        // though the value has effectively not changed, so we need to check to make\n        // sure that the value has actually changed before changing the loaded flag.\n        if (changedProperties.has('src') &&\n            (this.src == null || this.src !== this[$scene].model.url)) {\n            this[$loaded] = false;\n            this[$loadedTime] = 0;\n            this[$updateSource]();\n        }\n        if (changedProperties.has('alt')) {\n            const ariaLabel = this.alt == null ? this[$defaultAriaLabel] : this.alt;\n            this[$userInputElement].setAttribute('aria-label', ariaLabel);\n        }\n    }\n    /** @export */\n    toDataURL(type, encoderOptions) {\n        return this[$renderer]\n            .displayCanvas(this[$scene])\n            .toDataURL(type, encoderOptions);\n    }\n    /** @export */\n    async toBlob(options) {\n        const mimeType = options ? options.mimeType : undefined;\n        const qualityArgument = options ? options.qualityArgument : undefined;\n        const idealAspect = options ? options.idealAspect : undefined;\n        const { width, height, model, aspect } = this[$scene];\n        const { dpr, scaleFactor } = this[$renderer];\n        let outputWidth = width * scaleFactor * dpr;\n        let outputHeight = height * scaleFactor * dpr;\n        let offsetX = 0;\n        let offsetY = 0;\n        if (idealAspect === true) {\n            if (model.fieldOfViewAspect > aspect) {\n                const oldHeight = outputHeight;\n                outputHeight = Math.round(outputWidth / model.fieldOfViewAspect);\n                offsetY = (oldHeight - outputHeight) / 2;\n            }\n            else {\n                const oldWidth = outputWidth;\n                outputWidth = Math.round(outputHeight * model.fieldOfViewAspect);\n                offsetX = (oldWidth - outputWidth) / 2;\n            }\n        }\n        blobCanvas.width = outputWidth;\n        blobCanvas.height = outputHeight;\n        try {\n            return new Promise(async (resolve, reject) => {\n                if (blobContext == null) {\n                    blobContext = blobCanvas.getContext('2d');\n                }\n                blobContext.drawImage(this[$renderer].displayCanvas(this[$scene]), offsetX, offsetY, outputWidth, outputHeight, 0, 0, outputWidth, outputHeight);\n                if (blobCanvas.msToBlob) {\n                    // NOTE: msToBlob only returns image/png\n                    // so ensure mimeType is not specified (defaults to image/png)\n                    // or is image/png, otherwise fallback to using toDataURL on IE.\n                    if (!mimeType || mimeType === 'image/png') {\n                        return resolve(blobCanvas.msToBlob());\n                    }\n                }\n                if (!blobCanvas.toBlob) {\n                    return resolve(await dataUrlToBlob(blobCanvas.toDataURL(mimeType, qualityArgument)));\n                }\n                blobCanvas.toBlob((blob) => {\n                    if (!blob) {\n                        return reject(new Error('Unable to retrieve canvas blob'));\n                    }\n                    resolve(blob);\n                }, mimeType, qualityArgument);\n            });\n        }\n        finally {\n            this[$updateSize]({ width, height });\n        }\n    }\n    get [$ariaLabel]() {\n        return (this.alt == null || this.alt === 'null') ? this[$defaultAriaLabel] :\n            this.alt;\n    }\n    // NOTE(cdata): Although this may seem extremely redundant, it is required in\n    // order to support overloading when TypeScript is compiled to ES5\n    // @see https://github.com/Polymer/lit-element/pull/745\n    // @see https://github.com/microsoft/TypeScript/issues/338\n    [$getLoaded]() {\n        return this[$loaded];\n    }\n    // @see [$getLoaded]\n    [$getModelIsVisible]() {\n        return this.loaded && this[$isElementInViewport];\n    }\n    [$hasTransitioned]() {\n        return this.modelIsVisible;\n    }\n    [$shouldAttemptPreload]() {\n        return !!this.src && this[$isElementInViewport];\n    }\n    [$sceneIsReady]() {\n        return this[$loaded];\n    }\n    /**\n     * Called on initialization and when the resize observer fires.\n     */\n    [$updateSize]({ width, height }) {\n        this[$container].style.width = `${width}px`;\n        this[$container].style.height = `${height}px`;\n        this[$onResize]({ width: parseFloat(width), height: parseFloat(height) });\n    }\n    [$tick$1](_time, _delta) {\n    }\n    [$markLoaded]() {\n        if (this[$loaded]) {\n            return;\n        }\n        this[$loaded] = true;\n        this[$loadedTime] = performance.now();\n    }\n    [$needsRender]() {\n        this[$scene].isDirty = true;\n    }\n    [$onModelLoad]() {\n    }\n    [$onResize](e) {\n        this[$scene].setSize(e.width, e.height);\n    }\n    [$onContextLost](event) {\n        this.dispatchEvent(new CustomEvent('error', { detail: { type: 'webglcontextlost', sourceError: event.sourceEvent } }));\n    }\n    /**\n     * Parses the element for an appropriate source URL and\n     * sets the views to use the new model based off of the `preload`\n     * attribute.\n     */\n    async [$updateSource]() {\n        if (this.loaded || !this[$shouldAttemptPreload]()) {\n            return;\n        }\n        const updateSourceProgress = this[$progressTracker].beginActivity();\n        const source = this.src;\n        try {\n            await this[$scene].setModelSource(source, (progress) => updateSourceProgress(progress * 0.8));\n            const detail = { url: source };\n            this.dispatchEvent(new CustomEvent('preload', { detail }));\n        }\n        catch (error) {\n            this.dispatchEvent(new CustomEvent('error', { detail: error }));\n        }\n        finally {\n            updateSourceProgress(0.9);\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    updateSourceProgress(1.0);\n                });\n            });\n        }\n    }\n}\n__decorate([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"alt\", void 0);\n__decorate([\n    property({ type: String })\n], ModelViewerElementBase.prototype, \"src\", void 0);\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$1 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst MILLISECONDS_PER_SECOND = 1000.0;\nconst $changeAnimation = Symbol('changeAnimation');\nconst $paused = Symbol('paused');\nconst AnimationMixin = (ModelViewerElement) => {\n    var _a;\n    class AnimationModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoplay = false;\n            this.animationName = undefined;\n            this.animationCrossfadeDuration = 300;\n            this[_a] = true;\n        }\n        /**\n         * Returns an array\n         */\n        get availableAnimations() {\n            if (this.loaded) {\n                return this[$scene].model.animationNames;\n            }\n            return [];\n        }\n        get paused() {\n            return this[$paused];\n        }\n        get currentTime() {\n            return this[$scene].model.animationTime;\n        }\n        set currentTime(value) {\n            this[$scene].model.animationTime = value;\n            this[$renderer].threeRenderer.shadowMap.needsUpdate = true;\n            this[$needsRender]();\n        }\n        pause() {\n            if (this[$paused]) {\n                return;\n            }\n            this[$paused] = true;\n            this[$renderer].threeRenderer.shadowMap.autoUpdate = false;\n            this.dispatchEvent(new CustomEvent('pause'));\n        }\n        play() {\n            if (this[$paused] && this.availableAnimations.length > 0) {\n                this[$paused] = false;\n                this[$renderer].threeRenderer.shadowMap.autoUpdate = true;\n                if (!this[$scene].model.hasActiveAnimation) {\n                    this[$changeAnimation]();\n                }\n                this.dispatchEvent(new CustomEvent('play'));\n            }\n        }\n        [(_a = $paused, $onModelLoad)]() {\n            super[$onModelLoad]();\n            this[$paused] = true;\n            if (this.autoplay) {\n                this[$changeAnimation]();\n                this.play();\n            }\n        }\n        [$tick$1](_time, delta) {\n            super[$tick$1](_time, delta);\n            if (this[$paused] || !this[$hasTransitioned]()) {\n                return;\n            }\n            const { model } = this[$scene];\n            model.updateAnimation(delta / MILLISECONDS_PER_SECOND);\n            this[$needsRender]();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoplay') && this.autoplay) {\n                this.play();\n            }\n            if (changedProperties.has('animationName')) {\n                this[$changeAnimation]();\n            }\n        }\n        async [$updateSource]() {\n            // If we are loading a new model, we need to stop the animation of\n            // the current one (if any is playing). Otherwise, we might lose\n            // the reference to the scene root and running actions start to\n            // throw exceptions and/or behave in unexpected ways:\n            this[$scene].model.stopAnimation();\n            return super[$updateSource]();\n        }\n        [$changeAnimation]() {\n            const { model } = this[$scene];\n            model.playAnimation(this.animationName, this.animationCrossfadeDuration / MILLISECONDS_PER_SECOND);\n            // If we are currently paused, we need to force a render so that\n            // the model updates to the first frame of the new animation\n            if (this[$paused]) {\n                model.updateAnimation(0);\n                this[$needsRender]();\n            }\n        }\n    }\n    __decorate$1([\n        property({ type: Boolean })\n    ], AnimationModelViewerElement.prototype, \"autoplay\", void 0);\n    __decorate$1([\n        property({ type: String, attribute: 'animation-name' })\n    ], AnimationModelViewerElement.prototype, \"animationName\", void 0);\n    __decorate$1([\n        property({ type: Number, attribute: 'animation-crossfade-duration' })\n    ], AnimationModelViewerElement.prototype, \"animationCrossfadeDuration\", void 0);\n    return AnimationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $annotationRenderer = Symbol('annotationRenderer');\nconst $hotspotMap = Symbol('hotspotMap');\nconst $mutationCallback = Symbol('mutationCallback');\nconst $observer = Symbol('observer');\nconst $addHotspot = Symbol('addHotspot');\nconst $removeHotspot = Symbol('removeHotspot');\n// Used internally by positionAndNormalFromPoint()\nconst pixelPosition = new Vector2();\nconst worldToModel = new Matrix4();\nconst worldToModelNormal = new Matrix3();\n/**\n * AnnotationMixin implements a declarative API to add hotspots and annotations.\n * Child elements of the <model-viewer> element that have a slot name that\n * begins with \"hotspot\" and data-position and data-normal attributes in\n * the format of the camera-target attribute will be added to the scene and\n * track the specified model coordinates.\n */\nconst AnnotationMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d;\n    class AnnotationModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            this[_a] = new CSS2DRenderer();\n            this[_b] = new Map();\n            this[_c] = (mutations) => {\n                mutations.forEach((mutation) => {\n                    // NOTE: Be wary that in ShadyDOM cases, the MutationRecord\n                    // only has addedNodes and removedNodes (and no other details).\n                    if (!(mutation instanceof MutationRecord) ||\n                        mutation.type === 'childList') {\n                        mutation.addedNodes.forEach((node) => {\n                            this[$addHotspot](node);\n                        });\n                        mutation.removedNodes.forEach((node) => {\n                            this[$removeHotspot](node);\n                        });\n                        this[$needsRender]();\n                    }\n                });\n            };\n            this[_d] = new MutationObserver(this[$mutationCallback]);\n            const { domElement } = this[$annotationRenderer];\n            const { style } = domElement;\n            style.display = 'none';\n            style.pointerEvents = 'none';\n            style.position = 'absolute';\n            style.top = '0';\n            this.shadowRoot.querySelector('.default').appendChild(domElement);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            for (let i = 0; i < this.children.length; ++i) {\n                this[$addHotspot](this.children[i]);\n            }\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].observe(this, { childList: true });\n            }\n            else {\n                this[$observer] =\n                    ShadyDOM.observeChildren(this, this[$mutationCallback]);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            const { ShadyDOM } = self;\n            if (ShadyDOM == null) {\n                this[$observer].disconnect();\n            }\n            else {\n                ShadyDOM.unobserveChildren(this[$observer]);\n            }\n        }\n        /**\n         * Since the data-position and data-normal attributes are not observed, use\n         * this method to move a hotspot. Keep in mind that all hotspots with the\n         * same slot name use a single location and the first definition takes\n         * precedence, until updated with this method.\n         */\n        updateHotspot(config) {\n            const hotspot = this[$hotspotMap].get(config.name);\n            if (hotspot == null) {\n                return;\n            }\n            hotspot.updatePosition(config.position);\n            hotspot.updateNormal(config.normal);\n        }\n        /**\n         * This method returns the model position and normal of the point on the\n         * mesh corresponding to the input pixel coordinates given relative to the\n         * model-viewer element. The position and normal are returned as strings in\n         * the format suitable for putting in a hotspot's data-position and\n         * data-normal attributes. If the mesh is not hit, the result is null.\n         */\n        positionAndNormalFromPoint(pixelX, pixelY) {\n            const scene = this[$scene];\n            const { width, height, model } = scene;\n            pixelPosition.set(pixelX / width, pixelY / height)\n                .multiplyScalar(2)\n                .subScalar(1);\n            pixelPosition.y *= -1;\n            const hit = scene.positionAndNormalFromPoint(pixelPosition);\n            if (hit == null) {\n                return null;\n            }\n            worldToModel.getInverse(model.matrixWorld);\n            const position = toVector3D(hit.position.applyMatrix4(worldToModel));\n            worldToModelNormal.getNormalMatrix(worldToModel);\n            const normal = toVector3D(hit.normal.applyNormalMatrix(worldToModelNormal));\n            return { position: position, normal: normal };\n        }\n        [(_a = $annotationRenderer, _b = $hotspotMap, _c = $mutationCallback, _d = $observer, $tick$1)](time, delta) {\n            super[$tick$1](time, delta);\n            const scene = this[$scene];\n            const camera = scene.getCamera();\n            if (scene.isDirty) {\n                scene.model.updateHotspots(camera.position);\n                this[$annotationRenderer].domElement.style.display = '';\n                this[$annotationRenderer].render(scene, camera);\n            }\n        }\n        [$onResize](e) {\n            super[$onResize](e);\n            this[$annotationRenderer].setSize(e.width, e.height);\n        }\n        [$addHotspot](node) {\n            if (!(node instanceof HTMLElement &&\n                node.slot.indexOf('hotspot') === 0)) {\n                return;\n            }\n            let hotspot = this[$hotspotMap].get(node.slot);\n            if (hotspot != null) {\n                hotspot.increment();\n            }\n            else {\n                hotspot = new Hotspot({\n                    name: node.slot,\n                    position: node.dataset.position,\n                    normal: node.dataset.normal,\n                });\n                this[$hotspotMap].set(node.slot, hotspot);\n                this[$scene].model.addHotspot(hotspot);\n                // This happens automatically in render(), but we do it early so that\n                // the slots appear in the shadow DOM and the elements get attached,\n                // allowing us to dispatch events on them.\n                this[$annotationRenderer].domElement.appendChild(hotspot.element);\n            }\n            this[$scene].isDirty = true;\n        }\n        [$removeHotspot](node) {\n            if (!(node instanceof HTMLElement)) {\n                return;\n            }\n            const hotspot = this[$hotspotMap].get(node.slot);\n            if (!hotspot) {\n                return;\n            }\n            if (hotspot.decrement()) {\n                this[$scene].model.removeHotspot(hotspot);\n                this[$hotspotMap].delete(node.slot);\n            }\n            this[$scene].isDirty = true;\n        }\n    }\n    return AnnotationModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * For our purposes, an enumeration is a fixed set of CSS-expression-compatible\n * names. When serialized, a selected subset of the members may be specified as\n * whitespace-separated strings. An enumeration deserializer is a function that\n * parses a serialized subset of an enumeration and returns any members that are\n * found as a Set.\n *\n * The following example will produce a deserializer for the days of the\n * week:\n *\n * const deserializeDaysOfTheWeek = enumerationDeserializer([\n *   'Monday',\n *   'Tuesday',\n *   'Wednesday',\n *   'Thursday',\n *   'Friday',\n *   'Saturday',\n *   'Sunday'\n * ]);\n */\nconst enumerationDeserializer = (allowedNames) => (valueString) => {\n    try {\n        const expressions = parseExpressions(valueString);\n        const names = (expressions.length ? expressions[0].terms : [])\n            .filter((valueNode) => valueNode && valueNode.type === 'ident')\n            .map(valueNode => valueNode.value)\n            .filter(name => allowedNames.indexOf(name) > -1);\n        // NOTE(cdata): IE11 does not support constructing a Set directly from\n        // an iterable, so we need to manually add all the items:\n        const result = new Set();\n        for (const name of names) {\n            result.add(name);\n        }\n        return result;\n    }\n    catch (_error) {\n    }\n    return new Set();\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$2 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nlet isWebXRBlocked = false;\nlet isSceneViewerBlocked = false;\nconst noArViewerSigil = '#model-viewer-no-ar-fallback';\nconst deserializeQuickLookBrowsers = enumerationDeserializer(['safari', 'chrome']);\nconst deserializeARModes = enumerationDeserializer(['quick-look', 'scene-viewer', 'webxr', 'none']);\nconst DEFAULT_AR_MODES = 'webxr scene-viewer quick-look';\nconst ARMode = {\n    QUICK_LOOK: 'quick-look',\n    SCENE_VIEWER: 'scene-viewer',\n    WEBXR: 'webxr',\n    NONE: 'none'\n};\nconst $arButtonContainer = Symbol('arButtonContainer');\nconst $enterARWithWebXR = Symbol('enterARWithWebXR');\nconst $openSceneViewer = Symbol('openSceneViewer');\nconst $openIOSARQuickLook = Symbol('openIOSARQuickLook');\nconst $canActivateAR = Symbol('canActivateAR');\nconst $arMode = Symbol('arMode');\nconst $arModes = Symbol('arModes');\nconst $canLaunchQuickLook = Symbol('canLaunchQuickLook');\nconst $quickLookBrowsers = Symbol('quickLookBrowsers');\nconst $arAnchor = Symbol('arAnchor');\nconst $preload = Symbol('preload');\nconst $onARButtonContainerClick = Symbol('onARButtonContainerClick');\nconst $onARStatus = Symbol('onARStatus');\nconst $onARTap = Symbol('onARTap');\nconst $selectARMode = Symbol('selectARMode');\nconst ARMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    class ARModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.ar = false;\n            this.arScale = 'auto';\n            this.arModes = DEFAULT_AR_MODES;\n            this.iosSrc = null;\n            this.quickLookBrowsers = 'safari';\n            this[_a] = false;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_b] = this.shadowRoot.querySelector('.ar-button');\n            this[_c] = document.createElement('a');\n            this[_d] = new Set();\n            this[_e] = ARMode.NONE;\n            this[_f] = false;\n            this[_g] = new Set();\n            this[_h] = (event) => {\n                event.preventDefault();\n                this.activateAR();\n            };\n            this[_j] = ({ status }) => {\n                if (status === ARStatus.NOT_PRESENTING ||\n                    this[$renderer].arRenderer.presentedScene === this[$scene]) {\n                    this.setAttribute('ar-status', status);\n                    this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n                }\n            };\n            this[_k] = (event) => {\n                if (event.data == '_apple_ar_quicklook_button_tapped') {\n                    this.dispatchEvent(new CustomEvent('quick-look-button-tapped'));\n                }\n            };\n        }\n        get canActivateAR() {\n            return this[$arMode] !== ARMode.NONE;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].arRenderer.addEventListener('status', this[$onARStatus]);\n            this.setAttribute('ar-status', ARStatus.NOT_PRESENTING);\n            this[$arAnchor].addEventListener('message', this[$onARTap]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].arRenderer.removeEventListener('status', this[$onARStatus]);\n            this[$arAnchor].removeEventListener('message', this[$onARTap]);\n        }\n        async update(changedProperties) {\n            super.update(changedProperties);\n            if (changedProperties.has('quickLookBrowsers')) {\n                this[$quickLookBrowsers] =\n                    deserializeQuickLookBrowsers(this.quickLookBrowsers);\n            }\n            if (!changedProperties.has('ar') && !changedProperties.has('arModes') &&\n                !changedProperties.has('iosSrc')) {\n                return;\n            }\n            if (changedProperties.has('arModes')) {\n                this[$arModes] = deserializeARModes(this.arModes);\n            }\n            if (changedProperties.has('arScale')) {\n                this[$scene].canScale = this.arScale !== 'fixed';\n            }\n            this[$selectARMode]();\n        }\n        /**\n         * Activates AR. Note that for any mode that is not WebXR-based, this\n         * method most likely has to be called synchronous from a user\n         * interaction handler. Otherwise, attempts to activate modes that\n         * require user interaction will most likely be ignored.\n         */\n        async activateAR() {\n            switch (this[$arMode]) {\n                case ARMode.QUICK_LOOK:\n                    this[$openIOSARQuickLook]();\n                    break;\n                case ARMode.WEBXR:\n                    await this[$enterARWithWebXR]();\n                    break;\n                case ARMode.SCENE_VIEWER:\n                    this[$openSceneViewer]();\n                    break;\n                default:\n                    console.warn('No AR Mode can be activated. This is probably due to missing \\\nconfiguration or device capabilities');\n                    break;\n            }\n        }\n        async [(_a = $canActivateAR, _b = $arButtonContainer, _c = $arAnchor, _d = $arModes, _e = $arMode, _f = $preload, _g = $quickLookBrowsers, _h = $onARButtonContainerClick, _j = $onARStatus, _k = $onARTap, $selectARMode)]() {\n            this[$arMode] = ARMode.NONE;\n            if (this.ar) {\n                const arModes = [];\n                this[$arModes].forEach((value) => {\n                    arModes.push(value);\n                });\n                for (const value of arModes) {\n                    if (value === 'webxr' && IS_WEBXR_AR_CANDIDATE && !isWebXRBlocked &&\n                        await this[$renderer].arRenderer.supportsPresentation()) {\n                        this[$arMode] = ARMode.WEBXR;\n                        break;\n                    }\n                    else if (value === 'scene-viewer' && IS_SCENEVIEWER_CANDIDATE &&\n                        !isSceneViewerBlocked) {\n                        this[$arMode] = ARMode.SCENE_VIEWER;\n                        break;\n                    }\n                    else if (value === 'quick-look' && !!this.iosSrc &&\n                        this[$canLaunchQuickLook] && IS_AR_QUICKLOOK_CANDIDATE) {\n                        this[$arMode] = ARMode.QUICK_LOOK;\n                        break;\n                    }\n                }\n            }\n            if (this.canActivateAR) {\n                this[$arButtonContainer].classList.add('enabled');\n                this[$arButtonContainer].addEventListener('click', this[$onARButtonContainerClick]);\n            }\n            else if (this[$arButtonContainer].classList.contains('enabled')) {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                this[$arButtonContainer].classList.remove('enabled');\n                // If AR went from working to not, notify the element.\n                const status = ARStatus.FAILED;\n                this.setAttribute('ar-status', status);\n                this.dispatchEvent(new CustomEvent('ar-status', { detail: { status } }));\n            }\n        }\n        get [$canLaunchQuickLook]() {\n            if (IS_IOS_CHROME) {\n                return this[$quickLookBrowsers].has('chrome');\n            }\n            else if (IS_IOS_SAFARI) {\n                return this[$quickLookBrowsers].has('safari');\n            }\n            return false;\n        }\n        async [$enterARWithWebXR]() {\n            console.log('Attempting to present in AR...');\n            if (!this[$loaded]) {\n                this[$preload] = true;\n                this[$updateSource]();\n                await waitForEvent(this, 'load');\n                this[$preload] = false;\n            }\n            try {\n                this[$arButtonContainer].removeEventListener('click', this[$onARButtonContainerClick]);\n                await this[$renderer].arRenderer.present(this[$scene]);\n            }\n            catch (error) {\n                console.warn('Error while trying to present to AR');\n                console.error(error);\n                await this[$renderer].arRenderer.stopPresenting();\n                isWebXRBlocked = true;\n                await this[$selectARMode]();\n                this.activateAR();\n            }\n            finally {\n                this[$selectARMode]();\n            }\n        }\n        [$shouldAttemptPreload]() {\n            return super[$shouldAttemptPreload]() || this[$preload];\n        }\n        /**\n         * Takes a URL and a title string, and attempts to launch Scene Viewer on\n         * the current device.\n         */\n        [$openSceneViewer]() {\n            // This is necessary because the original URL might have query\n            // parameters. Since we're appending the whole URL as query parameter,\n            // ? needs to be turned into & to not lose any of them.\n            const gltfSrc = this.src.replace('?', '&');\n            const location = self.location.toString();\n            const locationUrl = new URL(location);\n            const modelUrl = new URL(gltfSrc, location);\n            locationUrl.hash = noArViewerSigil;\n            // modelUrl can contain title/link/sound etc.\n            // These are already URL-encoded, so we shouldn't do that again here.\n            let intentParams = `?file=${modelUrl.toString()}&mode=ar_only`;\n            if (!gltfSrc.includes('&link=')) {\n                intentParams += `&link=${location}`;\n            }\n            if (!gltfSrc.includes('&title=')) {\n                intentParams += `&title=${encodeURIComponent(this.alt || '')}`;\n            }\n            if (this.arScale === 'fixed') {\n                intentParams += `&resizable=false`;\n            }\n            const intent = `intent://arvr.google.com/scene-viewer/1.0${intentParams}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(locationUrl.toString())};end;`;\n            const undoHashChange = () => {\n                if (self.location.hash === noArViewerSigil) {\n                    isSceneViewerBlocked = true;\n                    // The new history will be the current URL with a new hash.\n                    // Go back one step so that we reset to the expected URL.\n                    // NOTE(cdata): this should not invoke any browser-level navigation\n                    // because hash-only changes modify the URL in-place without\n                    // navigating:\n                    self.history.back();\n                    this[$selectARMode]();\n                    // Would be nice to activateAR() here, but webXR fails due to not\n                    // seeing a user activation.\n                }\n            };\n            self.addEventListener('hashchange', undoHashChange, { once: true });\n            this[$arAnchor].setAttribute('href', intent);\n            this[$arAnchor].click();\n        }\n        /**\n         * Takes a URL to a USDZ file and sets the appropriate fields so that Safari\n         * iOS can intent to their AR Quick Look.\n         */\n        [$openIOSARQuickLook]() {\n            const modelUrl = new URL(this.iosSrc, self.location.toString());\n            if (this.arScale === 'fixed') {\n                modelUrl.hash = 'allowsContentScaling=0';\n            }\n            const anchor = this[$arAnchor];\n            anchor.setAttribute('rel', 'ar');\n            const img = document.createElement('img');\n            anchor.appendChild(img);\n            anchor.setAttribute('href', modelUrl.toString());\n            anchor.click();\n            anchor.removeChild(img);\n        }\n    }\n    __decorate$2([\n        property({ type: Boolean, attribute: 'ar' })\n    ], ARModelViewerElement.prototype, \"ar\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ar-scale' })\n    ], ARModelViewerElement.prototype, \"arScale\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ar-modes' })\n    ], ARModelViewerElement.prototype, \"arModes\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'ios-src' })\n    ], ARModelViewerElement.prototype, \"iosSrc\", void 0);\n    __decorate$2([\n        property({ type: String, attribute: 'quick-look-browsers' })\n    ], ARModelViewerElement.prototype, \"quickLookBrowsers\", void 0);\n    return ARModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$9, _b$7, _c$2;\nconst $evaluate = Symbol('evaluate');\nconst $lastValue = Symbol('lastValue');\n/**\n * An Evaluator is used to derive a computed style from part (or all) of a CSS\n * expression AST. This construct is particularly useful for complex ASTs\n * containing function calls such as calc, var and env. Such styles could be\n * costly to re-evaluate on every frame (and in some cases we may try to do\n * that). The Evaluator construct allows us to mark sub-trees of the AST as\n * constant, so that only the dynamic parts are re-evaluated. It also separates\n * one-time AST preparation work from work that necessarily has to happen upon\n * each evaluation.\n */\nclass Evaluator {\n    constructor() {\n        this[_a$9] = null;\n    }\n    /**\n     * An Evaluatable is a NumberNode or an Evaluator that evaluates a NumberNode\n     * as the result of invoking its evaluate method. This is mainly used to\n     * ensure that CSS function nodes are cast to the corresponding Evaluators\n     * that will resolve the result of the function, but is also used to ensure\n     * that a percentage nested at arbitrary depth in the expression will always\n     * be evaluated against the correct basis.\n     */\n    static evaluatableFor(node, basis = ZERO) {\n        if (node instanceof Evaluator) {\n            return node;\n        }\n        if (node.type === 'number') {\n            if (node.unit === '%') {\n                return new PercentageEvaluator(node, basis);\n            }\n            return node;\n        }\n        switch (node.name.value) {\n            case 'calc':\n                return new CalcEvaluator(node, basis);\n            case 'env':\n                return new EnvEvaluator(node);\n        }\n        return ZERO;\n    }\n    /**\n     * If the input is an Evaluator, returns the result of evaluating it.\n     * Otherwise, returns the input.\n     *\n     * This is a helper to aide in resolving a NumberNode without conditionally\n     * checking if the Evaluatable is an Evaluator everywhere.\n     */\n    static evaluate(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.evaluate();\n        }\n        return evaluatable;\n    }\n    /**\n     * If the input is an Evaluator, returns the value of its isConstant property.\n     * Returns true for all other input values.\n     */\n    static isConstant(evaluatable) {\n        if (evaluatable instanceof Evaluator) {\n            return evaluatable.isConstant;\n        }\n        return true;\n    }\n    /**\n     * This method applies a set of structured intrinsic metadata to an evaluated\n     * result from a parsed CSS-like string of expressions. Intrinsics provide\n     * sufficient metadata (e.g., basis values, analogs for keywords) such that\n     * omitted values in the input string can be backfilled, and keywords can be\n     * converted to concrete numbers.\n     *\n     * The result of applying intrinsics is a tuple of NumberNode values whose\n     * units match the units used by the basis of the intrinsics.\n     *\n     * The following is a high-level description of how intrinsics are applied:\n     *\n     *  1. Determine the value of 'auto' for the current term\n     *  2. If there is no corresponding input value for this term, substitute the\n     *     'auto' value.\n     *  3. If the term is an IdentNode, treat it as a keyword and perform the\n     *     appropriate substitution.\n     *  4. If the term is still null, fallback to the 'auto' value\n     *  5. If the term is a percentage, apply it to the basis and return that\n     *     value\n     *  6. Normalize the unit of the term\n     *  7. If the term's unit does not match the basis unit, return the basis\n     *     value\n     *  8. Return the term as is\n     */\n    static applyIntrinsics(evaluated, intrinsics) {\n        const { basis, keywords } = intrinsics;\n        const { auto } = keywords;\n        return basis.map((basisNode, index) => {\n            // Use an auto value if we have it, otherwise the auto value is the basis:\n            const autoSubstituteNode = auto[index] == null ? basisNode : auto[index];\n            // If the evaluated nodes do not have a node at the current\n            // index, fallback to the \"auto\" substitute right away:\n            let evaluatedNode = evaluated[index] ? evaluated[index] : autoSubstituteNode;\n            // Any ident node is considered a keyword:\n            if (evaluatedNode.type === 'ident') {\n                const keyword = evaluatedNode.value;\n                // Substitute any keywords for concrete values first:\n                if (keyword in keywords) {\n                    evaluatedNode = keywords[keyword][index];\n                }\n            }\n            // If we don't have a NumberNode at this point, fall back to whatever\n            // is specified for auto:\n            if (evaluatedNode == null || evaluatedNode.type === 'ident') {\n                evaluatedNode = autoSubstituteNode;\n            }\n            // For percentages, we always apply the percentage to the basis value:\n            if (evaluatedNode.unit === '%') {\n                return numberNode(evaluatedNode.number / 100 * basisNode.number, basisNode.unit);\n            }\n            // Otherwise, normalize whatever we have:\n            evaluatedNode = normalizeUnit(evaluatedNode, basisNode);\n            // If the normalized units do not match, return the basis as a fallback:\n            if (evaluatedNode.unit !== basisNode.unit) {\n                return basisNode;\n            }\n            // Finally, return the evaluated node with intrinsics applied:\n            return evaluatedNode;\n        });\n    }\n    /**\n     * If true, the Evaluator will only evaluate its AST one time. If false, the\n     * Evaluator will re-evaluate the AST each time that the public evaluate\n     * method is invoked.\n     */\n    get isConstant() {\n        return false;\n    }\n    /**\n     * Evaluate the Evaluator and return the result. If the Evaluator is constant,\n     * the corresponding AST will only be evaluated once, and the result of\n     * evaluating it the first time will be returned on all subsequent\n     * evaluations.\n     */\n    evaluate() {\n        if (!this.isConstant || this[$lastValue] == null) {\n            this[$lastValue] = this[$evaluate]();\n        }\n        return this[$lastValue];\n    }\n}\n_a$9 = $lastValue;\nconst $percentage = Symbol('percentage');\nconst $basis = Symbol('basis');\n/**\n * A PercentageEvaluator scales a given basis value by a given percentage value.\n * The evaluated result is always considered to be constant.\n */\nclass PercentageEvaluator extends Evaluator {\n    constructor(percentage, basis) {\n        super();\n        this[$percentage] = percentage;\n        this[$basis] = basis;\n    }\n    get isConstant() {\n        return true;\n    }\n    [$evaluate]() {\n        return numberNode(this[$percentage].number / 100 * this[$basis].number, this[$basis].unit);\n    }\n}\nconst $identNode = Symbol('identNode');\n/**\n * Evaluator for CSS-like env() functions. Currently, only one environment\n * variable is accepted as an argument for such functions: window-scroll-y.\n *\n * The env() Evaluator is explicitly dynamic because it always refers to\n * external state that changes as the user scrolls, so it should always be\n * re-evaluated to ensure we get the most recent value.\n *\n * Some important notes about this feature include:\n *\n *  - There is no such thing as a \"window-scroll-y\" CSS environment variable in\n *    any stable browser at the time that this comment is being written.\n *  - The actual CSS env() function accepts a second argument as a fallback for\n *    the case that the specified first argument isn't set; our syntax does not\n *    support this second argument.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/env\n */\nclass EnvEvaluator extends Evaluator {\n    constructor(envFunction) {\n        super();\n        this[_b$7] = null;\n        const identNode = envFunction.arguments.length ? envFunction.arguments[0].terms[0] : null;\n        if (identNode != null && identNode.type === 'ident') {\n            this[$identNode] = identNode;\n        }\n    }\n    get isConstant() {\n        return false;\n    }\n    ;\n    [(_b$7 = $identNode, $evaluate)]() {\n        if (this[$identNode] != null) {\n            switch (this[$identNode].value) {\n                case 'window-scroll-y':\n                    const verticalScrollPosition = window.pageYOffset;\n                    const verticalScrollMax = Math.max(document.body.scrollHeight, document.body.offsetHeight, document.documentElement.clientHeight, document.documentElement.scrollHeight, document.documentElement.offsetHeight);\n                    const scrollY = verticalScrollPosition /\n                        (verticalScrollMax - window.innerHeight) ||\n                        0;\n                    return { type: 'number', number: scrollY, unit: null };\n            }\n        }\n        return ZERO;\n    }\n}\nconst IS_MULTIPLICATION_RE = /[\\*\\/]/;\nconst $evaluator = Symbol('evalutor');\n/**\n * Evaluator for CSS-like calc() functions. Our implementation of calc()\n * evaluation currently support nested function calls, an unlimited number of\n * terms, and all four algebraic operators (+, -, * and /).\n *\n * The Evaluator is marked as constant unless the calc expression contains an\n * internal env expression at any depth, in which case it will be marked as\n * dynamic.\n *\n * @see https://www.w3.org/TR/css-values-3/#calc-syntax\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass CalcEvaluator extends Evaluator {\n    constructor(calcFunction, basis = ZERO) {\n        super();\n        this[_c$2] = null;\n        if (calcFunction.arguments.length !== 1) {\n            return;\n        }\n        const terms = calcFunction.arguments[0].terms.slice();\n        const secondOrderTerms = [];\n        while (terms.length) {\n            const term = terms.shift();\n            if (secondOrderTerms.length > 0) {\n                const previousTerm = secondOrderTerms[secondOrderTerms.length - 1];\n                if (previousTerm.type === 'operator' &&\n                    IS_MULTIPLICATION_RE.test(previousTerm.value)) {\n                    const operator = secondOrderTerms.pop();\n                    const leftValue = secondOrderTerms.pop();\n                    if (leftValue == null) {\n                        return;\n                    }\n                    secondOrderTerms.push(new OperatorEvaluator(operator, Evaluator.evaluatableFor(leftValue, basis), Evaluator.evaluatableFor(term, basis)));\n                    continue;\n                }\n            }\n            secondOrderTerms.push(term.type === 'operator' ? term :\n                Evaluator.evaluatableFor(term, basis));\n        }\n        while (secondOrderTerms.length > 2) {\n            const [left, operator, right] = secondOrderTerms.splice(0, 3);\n            if (operator.type !== 'operator') {\n                return;\n            }\n            secondOrderTerms.unshift(new OperatorEvaluator(operator, Evaluator.evaluatableFor(left, basis), Evaluator.evaluatableFor(right, basis)));\n        }\n        // There should only be one combined evaluator at this point:\n        if (secondOrderTerms.length === 1) {\n            this[$evaluator] = secondOrderTerms[0];\n        }\n    }\n    get isConstant() {\n        return this[$evaluator] == null || Evaluator.isConstant(this[$evaluator]);\n    }\n    [(_c$2 = $evaluator, $evaluate)]() {\n        return this[$evaluator] != null ? Evaluator.evaluate(this[$evaluator]) :\n            ZERO;\n    }\n}\nconst $operator = Symbol('operator');\nconst $left = Symbol('left');\nconst $right = Symbol('right');\n/**\n * An Evaluator for the operators found inside CSS calc() functions.\n * The evaluator accepts an operator and left/right operands. The operands can\n * be any valid expression term typically allowed inside a CSS calc function.\n *\n * As detail of this implementation, the only supported unit types are angles\n * expressed as radians or degrees, and lengths expressed as meters, centimeters\n * or millimeters.\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/calc\n */\nclass OperatorEvaluator extends Evaluator {\n    constructor(operator, left, right) {\n        super();\n        this[$operator] = operator;\n        this[$left] = left;\n        this[$right] = right;\n    }\n    get isConstant() {\n        return Evaluator.isConstant(this[$left]) &&\n            Evaluator.isConstant(this[$right]);\n    }\n    [$evaluate]() {\n        const leftNode = normalizeUnit(Evaluator.evaluate(this[$left]));\n        const rightNode = normalizeUnit(Evaluator.evaluate(this[$right]));\n        const { number: leftValue, unit: leftUnit } = leftNode;\n        const { number: rightValue, unit: rightUnit } = rightNode;\n        // Disallow operations for mismatched normalized units e.g., m and rad:\n        if (rightUnit != null && leftUnit != null && rightUnit != leftUnit) {\n            return ZERO;\n        }\n        // NOTE(cdata): rules for calc type checking are defined here\n        // https://drafts.csswg.org/css-values-3/#calc-type-checking\n        // This is a simplification and may not hold up once we begin to support\n        // additional unit types:\n        const unit = leftUnit || rightUnit;\n        let value;\n        switch (this[$operator].value) {\n            case '+':\n                value = leftValue + rightValue;\n                break;\n            case '-':\n                value = leftValue - rightValue;\n                break;\n            case '/':\n                value = leftValue / rightValue;\n                break;\n            case '*':\n                value = leftValue * rightValue;\n                break;\n            default:\n                return ZERO;\n        }\n        return { type: 'number', number: value, unit };\n    }\n}\nconst $evaluatables = Symbol('evaluatables');\nconst $intrinsics = Symbol('intrinsics');\n/**\n * A VectorEvaluator evaluates a series of numeric terms that usually represent\n * a data structure such as a multi-dimensional vector or a spherical\n *\n * The form of the evaluator's result is determined by the Intrinsics that are\n * given to it when it is constructed. For example, spherical intrinsics would\n * establish two angle terms and a length term, so the result of evaluating the\n * evaluator that is configured with spherical intrinsics is a three element\n * array where the first two elements represent angles in radians and the third\n * element representing a length in meters.\n */\nclass StyleEvaluator extends Evaluator {\n    constructor(expressions, intrinsics) {\n        super();\n        this[$intrinsics] = intrinsics;\n        const firstExpression = expressions[0];\n        const terms = firstExpression != null ? firstExpression.terms : [];\n        this[$evaluatables] =\n            intrinsics.basis.map((basisNode, index) => {\n                const term = terms[index];\n                if (term == null) {\n                    return { type: 'ident', value: 'auto' };\n                }\n                if (term.type === 'ident') {\n                    return term;\n                }\n                return Evaluator.evaluatableFor(term, basisNode);\n            });\n    }\n    get isConstant() {\n        for (const evaluatable of this[$evaluatables]) {\n            if (!Evaluator.isConstant(evaluatable)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    [$evaluate]() {\n        const evaluated = this[$evaluatables].map(evaluatable => Evaluator.evaluate(evaluatable));\n        return Evaluator.applyIntrinsics(evaluated, this[$intrinsics])\n            .map(numberNode => numberNode.number);\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$a, _b$8, _c$3, _d$2;\nconst $instances = Symbol('instances');\nconst $activateListener = Symbol('activateListener');\nconst $deactivateListener = Symbol('deactivateListener');\nconst $notifyInstances = Symbol('notifyInstances');\nconst $notify = Symbol('notify');\nconst $scrollCallback = Symbol('callback');\n/**\n * This internal helper is intended to work as a reference-counting manager of\n * scroll event listeners. Only one scroll listener is ever registered for all\n * instances of the class, and when the last ScrollObserver \"disconnects\", that\n * event listener is removed. This spares us from thrashing\n * the {add,remove}EventListener API (the binding cost of these methods has been\n * known to show up in performance anlyses) as well as potential memory leaks.\n */\nclass ScrollObserver {\n    constructor(callback) {\n        this[$scrollCallback] = callback;\n    }\n    static [$notifyInstances]() {\n        for (const instance of ScrollObserver[$instances]) {\n            instance[$notify]();\n        }\n    }\n    static [(_a$a = $instances, $activateListener)]() {\n        window.addEventListener('scroll', this[$notifyInstances], { passive: true });\n    }\n    static [$deactivateListener]() {\n        window.removeEventListener('scroll', this[$notifyInstances]);\n    }\n    /**\n     * Listen for scroll events. The configured callback (passed to the\n     * constructor) will be invoked for subsequent global scroll events.\n     */\n    observe() {\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$activateListener]();\n        }\n        ScrollObserver[$instances].add(this);\n    }\n    /**\n     * Stop listening for scroll events.\n     */\n    disconnect() {\n        ScrollObserver[$instances].delete(this);\n        if (ScrollObserver[$instances].size === 0) {\n            ScrollObserver[$deactivateListener]();\n        }\n    }\n    [$notify]() {\n        this[$scrollCallback]();\n    }\n    ;\n}\nScrollObserver[_a$a] = new Set();\nconst $computeStyleCallback = Symbol('computeStyleCallback');\nconst $astWalker = Symbol('astWalker');\nconst $dependencies = Symbol('dependencies');\nconst $scrollHandler = Symbol('scrollHandler');\nconst $onScroll = Symbol('onScroll');\n/**\n * The StyleEffector is configured with a callback that will be invoked at the\n * optimal time that some array of CSS expression ASTs ought to be evaluated.\n *\n * For example, our CSS-like expression syntax supports usage of the env()\n * function to incorporate the current top-level scroll position into a CSS\n * expression: env(window-scroll-y).\n *\n * This \"environment variable\" will change dynamically as the user scrolls the\n * page. If an AST contains such a usage of env(), we would have to evaluate the\n * AST on every frame in order to be sure that the computed style stays up to\n * date.\n *\n * The StyleEffector spares us from evaluating the expressions on every frame by\n * correlating specific parts of an AST with observers of the external effects\n * that they refer to (if any). So, if the AST contains env(window-scroll-y),\n * the StyleEffector manages the lifetime of a global scroll event listener and\n * notifies the user at the optimal time to evaluate the computed style.\n */\nclass StyleEffector {\n    constructor(callback) {\n        this[_b$8] = {};\n        this[_c$3] = new ASTWalker(['function']);\n        this[_d$2] = () => this[$onScroll]();\n        this[$computeStyleCallback] = callback;\n    }\n    /**\n     * Sets the expressions that govern when the StyleEffector callback will be\n     * invoked.\n     */\n    observeEffectsFor(ast) {\n        const newDependencies = {};\n        const oldDependencies = this[$dependencies];\n        this[$astWalker].walk(ast, functionNode => {\n            const { name } = functionNode;\n            const firstArgument = functionNode.arguments[0];\n            const firstTerm = firstArgument.terms[0];\n            if (name.value !== 'env' || firstTerm == null ||\n                firstTerm.type !== 'ident') {\n                return;\n            }\n            switch (firstTerm.value) {\n                case 'window-scroll-y':\n                    if (newDependencies['window-scroll'] == null) {\n                        const observer = 'window-scroll' in oldDependencies ?\n                            oldDependencies['window-scroll'] :\n                            new ScrollObserver(this[$scrollHandler]);\n                        observer.observe();\n                        delete oldDependencies['window-scroll'];\n                        newDependencies['window-scroll'] = observer;\n                    }\n                    break;\n            }\n        });\n        for (const environmentState in oldDependencies) {\n            const observer = oldDependencies[environmentState];\n            observer.disconnect();\n        }\n        this[$dependencies] = newDependencies;\n    }\n    /**\n     * Disposes of the StyleEffector by disconnecting all observers of external\n     * effects.\n     */\n    dispose() {\n        for (const environmentState in this[$dependencies]) {\n            const observer = this[$dependencies][environmentState];\n            observer.disconnect();\n        }\n    }\n    [(_b$8 = $dependencies, _c$3 = $astWalker, _d$2 = $scrollHandler, $onScroll)]() {\n        this[$computeStyleCallback]({ relatedState: 'window-scroll' });\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The @style decorator is responsible for coordinating the conversion of a\n * CSS-like string property value into numbers that can be applied to\n * lower-level constructs. It also can optionally manage the lifecycle of a\n * StyleEffector which allows automatic updates for styles that use env() or\n * var() functions.\n *\n * The decorator is configured with Intrinsics and the property key for a\n * method that handles updates. The named update handler is invoked with the\n * result of parsing and evaluating the raw property string value. The format of\n * the evaluated result is derived from the basis of the configured Intrinsics,\n * and is always an array of numbers of fixed length.\n *\n * NOTE: This decorator depends on the property updating mechanism defined by\n * UpdatingElement as exported by the lit-element module. That means it *must*\n * be used in conjunction with the @property decorator, or equivalent\n * JavaScript.\n *\n * Supported configurations are:\n *\n *  - `intrinsics`: An Intrinsics struct that describes how to interpret a\n * serialized style attribute. For more detail on intrinsics see\n * ./styles/evaluators.ts\n *  - `updateHandler`: A string or Symbol that is the key of a method to be\n * invoked with the result of parsing and evaluating a serialized style string.\n *  - `observeEffects`: Optional, if set to true then styles that use env() will\n * cause their update handlers to be invoked every time the corresponding\n * environment variable changes (even if the style attribute itself remains\n * static).\n */\nconst style = (config) => {\n    const observeEffects = config.observeEffects || false;\n    const getIntrinsics = config.intrinsics instanceof Function ?\n        config.intrinsics :\n        (() => config.intrinsics);\n    return (proto, propertyName) => {\n        const originalUpdated = proto.updated;\n        const originalConnectedCallback = proto.connectedCallback;\n        const originalDisconnectedCallback = proto.disconnectedCallback;\n        const $styleEffector = Symbol(`${propertyName}StyleEffector`);\n        const $styleEvaluator = Symbol(`${propertyName}StyleEvaluator`);\n        const $updateEvaluator = Symbol(`${propertyName}UpdateEvaluator`);\n        const $evaluateAndSync = Symbol(`${propertyName}EvaluateAndSync`);\n        Object.defineProperties(proto, {\n            [$styleEffector]: { value: null, writable: true },\n            [$styleEvaluator]: { value: null, writable: true },\n            [$updateEvaluator]: {\n                value: function () {\n                    const ast = parseExpressions(this[propertyName]);\n                    this[$styleEvaluator] =\n                        new StyleEvaluator(ast, getIntrinsics(this));\n                    if (this[$styleEffector] == null && observeEffects) {\n                        this[$styleEffector] =\n                            new StyleEffector(() => this[$evaluateAndSync]());\n                    }\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].observeEffectsFor(ast);\n                    }\n                }\n            },\n            [$evaluateAndSync]: {\n                value: function () {\n                    if (this[$styleEvaluator] == null) {\n                        return;\n                    }\n                    const result = this[$styleEvaluator].evaluate();\n                    // @see https://github.com/microsoft/TypeScript/pull/30769\n                    // @see https://github.com/Microsoft/TypeScript/issues/1863\n                    this[config.updateHandler](result);\n                }\n            },\n            updated: {\n                value: function (changedProperties) {\n                    // Always invoke updates to styles first. This gives a class that\n                    // uses this decorator the opportunity to override the effect, or\n                    // respond to it, in its own implementation of `updated`.\n                    if (changedProperties.has(propertyName)) {\n                        this[$updateEvaluator]();\n                        this[$evaluateAndSync]();\n                    }\n                    originalUpdated.call(this, changedProperties);\n                }\n            },\n            connectedCallback: {\n                value: function () {\n                    originalConnectedCallback.call(this);\n                    this.requestUpdate(propertyName, this[propertyName]);\n                }\n            },\n            disconnectedCallback: {\n                value: function () {\n                    originalDisconnectedCallback.call(this);\n                    if (this[$styleEffector] != null) {\n                        this[$styleEffector].dispose();\n                        this[$styleEffector] = null;\n                    }\n                }\n            }\n        });\n    };\n};\n\n/* @license\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_OPTIONS = Object.freeze({\n    minimumRadius: 0,\n    maximumRadius: Infinity,\n    minimumPolarAngle: Math.PI / 8,\n    maximumPolarAngle: Math.PI - Math.PI / 8,\n    minimumAzimuthalAngle: -Infinity,\n    maximumAzimuthalAngle: Infinity,\n    minimumFieldOfView: 10,\n    maximumFieldOfView: 45,\n    interactionPolicy: 'always-allow',\n    touchAction: 'pan-y'\n});\n// Constants\nconst TOUCH_EVENT_RE = /^touch(start|end|move)$/;\nconst KEYBOARD_ORBIT_INCREMENT = Math.PI / 8;\nconst ZOOM_SENSITIVITY = 0.04;\nconst KeyCode = {\n    PAGE_UP: 33,\n    PAGE_DOWN: 34,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40\n};\nconst ChangeSource = {\n    USER_INTERACTION: 'user-interaction',\n    NONE: 'none'\n};\n/**\n * SmoothControls is a Three.js helper for adding delightful pointer and\n * keyboard-based input to a staged Three.js scene. Its API is very similar to\n * OrbitControls, but it offers more opinionated (subjectively more delightful)\n * defaults, easy extensibility and subjectively better out-of-the-box keyboard\n * support.\n *\n * One important change compared to OrbitControls is that the `update` method\n * of SmoothControls must be invoked on every frame, otherwise the controls\n * will not have an effect.\n *\n * Another notable difference compared to OrbitControls is that SmoothControls\n * does not currently support panning (but probably will in a future revision).\n *\n * Like OrbitControls, SmoothControls assumes that the orientation of the camera\n * has been set in terms of position, rotation and scale, so it is important to\n * ensure that the camera's matrixWorld is in sync before using SmoothControls.\n */\nclass SmoothControls extends EventDispatcher {\n    constructor(camera, element) {\n        super();\n        this.camera = camera;\n        this.element = element;\n        this.sensitivity = 1;\n        this._interactionEnabled = false;\n        this.isUserChange = false;\n        this.isUserPointing = false;\n        // Internal orbital position state\n        this.spherical = new Spherical();\n        this.goalSpherical = new Spherical();\n        this.thetaDamper = new Damper();\n        this.phiDamper = new Damper();\n        this.radiusDamper = new Damper();\n        this.logFov = Math.log(DEFAULT_OPTIONS.maximumFieldOfView);\n        this.goalLogFov = this.logFov;\n        this.fovDamper = new Damper();\n        // Pointer state\n        this.pointerIsDown = false;\n        this.lastPointerPosition = {\n            clientX: 0,\n            clientY: 0,\n        };\n        this.touchMode = 'rotate';\n        this.touchDecided = false;\n        this.onPointerMove = (event) => {\n            if (!this.pointerIsDown || !this.canInteract) {\n                return;\n            }\n            // NOTE(cdata): We test event.type as some browsers do not have a global\n            // TouchEvent contructor.\n            if (TOUCH_EVENT_RE.test(event.type)) {\n                const { touches } = event;\n                switch (this.touchMode) {\n                    case 'zoom':\n                        if (this.lastTouches.length > 1 && touches.length > 1) {\n                            const lastTouchDistance = this.twoTouchDistance(this.lastTouches[0], this.lastTouches[1]);\n                            const touchDistance = this.twoTouchDistance(touches[0], touches[1]);\n                            const deltaZoom = ZOOM_SENSITIVITY * (lastTouchDistance - touchDistance) / 10.0;\n                            this.userAdjustOrbit(0, 0, deltaZoom);\n                        }\n                        break;\n                    case 'rotate':\n                        const { touchAction } = this._options;\n                        if (!this.touchDecided && touchAction !== 'none') {\n                            this.touchDecided = true;\n                            const { clientX, clientY } = touches[0];\n                            const dx = Math.abs(clientX - this.lastPointerPosition.clientX);\n                            const dy = Math.abs(clientY - this.lastPointerPosition.clientY);\n                            // If motion is mostly vertical, assume scrolling is the intent,\n                            // unless scrolling is not possible. Use window.innerHeight\n                            // instead of body.clientHeight so that a full-screen element will\n                            // still scroll the URL bar out of the way before locking.\n                            if ((touchAction === 'pan-y' && dy > dx &&\n                                document.body.scrollHeight > window.innerHeight) ||\n                                (touchAction === 'pan-x' && dx > dy)) {\n                                this.touchMode = 'scroll';\n                                return;\n                            }\n                        }\n                        this.handleSinglePointerMove(touches[0]);\n                        break;\n                    case 'scroll':\n                        return;\n                }\n                this.lastTouches = touches;\n            }\n            else {\n                this.handleSinglePointerMove(event);\n            }\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this.onPointerDown = (event) => {\n            this.pointerIsDown = true;\n            this.isUserPointing = false;\n            if (TOUCH_EVENT_RE.test(event.type)) {\n                const { touches } = event;\n                this.touchDecided = false;\n                switch (touches.length) {\n                    default:\n                    case 1:\n                        this.touchMode = 'rotate';\n                        this.handleSinglePointerDown(touches[0]);\n                        break;\n                    case 2:\n                        this.touchMode = 'zoom';\n                        break;\n                }\n                this.lastTouches = touches;\n            }\n            else {\n                this.handleSinglePointerDown(event);\n            }\n        };\n        this.onPointerUp = (_event) => {\n            this.element.style.cursor = 'grab';\n            this.pointerIsDown = false;\n            if (this.isUserPointing) {\n                this.dispatchEvent({ type: 'pointer-change-end', pointer: Object.assign({}, this.lastPointerPosition) });\n            }\n        };\n        this.onWheel = (event) => {\n            if (!this.canInteract) {\n                return;\n            }\n            const deltaZoom = event.deltaY *\n                (event.deltaMode == 1 ? 18 : 1) * ZOOM_SENSITIVITY / 30;\n            this.userAdjustOrbit(0, 0, deltaZoom);\n            if (event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this.onKeyDown = (event) => {\n            // We track if the key is actually one we respond to, so as not to\n            // accidentally clober unrelated key inputs when the <model-viewer> has\n            // focus.\n            let relevantKey = false;\n            switch (event.keyCode) {\n                case KeyCode.PAGE_UP:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, 0, ZOOM_SENSITIVITY);\n                    break;\n                case KeyCode.PAGE_DOWN:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, 0, -1 * ZOOM_SENSITIVITY);\n                    break;\n                case KeyCode.UP:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, -KEYBOARD_ORBIT_INCREMENT, 0);\n                    break;\n                case KeyCode.DOWN:\n                    relevantKey = true;\n                    this.userAdjustOrbit(0, KEYBOARD_ORBIT_INCREMENT, 0);\n                    break;\n                case KeyCode.LEFT:\n                    relevantKey = true;\n                    this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                    break;\n                case KeyCode.RIGHT:\n                    relevantKey = true;\n                    this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT, 0, 0);\n                    break;\n            }\n            if (relevantKey && event.cancelable) {\n                event.preventDefault();\n            }\n        };\n        this._options = Object.assign({}, DEFAULT_OPTIONS);\n        this.setOrbit(0, Math.PI / 2, 1);\n        this.setFieldOfView(100);\n        this.jumpToGoal();\n    }\n    get interactionEnabled() {\n        return this._interactionEnabled;\n    }\n    enableInteraction() {\n        if (this._interactionEnabled === false) {\n            const { element } = this;\n            element.addEventListener('mousemove', this.onPointerMove);\n            element.addEventListener('mousedown', this.onPointerDown);\n            element.addEventListener('wheel', this.onWheel);\n            element.addEventListener('keydown', this.onKeyDown);\n            element.addEventListener('touchstart', this.onPointerDown, { passive: true });\n            element.addEventListener('touchmove', this.onPointerMove);\n            self.addEventListener('mouseup', this.onPointerUp);\n            self.addEventListener('touchend', this.onPointerUp);\n            this.element.style.cursor = 'grab';\n            this._interactionEnabled = true;\n        }\n    }\n    disableInteraction() {\n        if (this._interactionEnabled === true) {\n            const { element } = this;\n            element.removeEventListener('mousemove', this.onPointerMove);\n            element.removeEventListener('mousedown', this.onPointerDown);\n            element.removeEventListener('wheel', this.onWheel);\n            element.removeEventListener('keydown', this.onKeyDown);\n            element.removeEventListener('touchstart', this.onPointerDown);\n            element.removeEventListener('touchmove', this.onPointerMove);\n            self.removeEventListener('mouseup', this.onPointerUp);\n            self.removeEventListener('touchend', this.onPointerUp);\n            element.style.cursor = '';\n            this._interactionEnabled = false;\n        }\n    }\n    /**\n     * The options that are currently configured for the controls instance.\n     */\n    get options() {\n        return this._options;\n    }\n    /**\n     * Copy the spherical values that represent the current camera orbital\n     * position relative to the configured target into a provided Spherical\n     * instance. If no Spherical is provided, a new Spherical will be allocated\n     * to copy the values into. The Spherical that values are copied into is\n     * returned.\n     */\n    getCameraSpherical(target = new Spherical()) {\n        return target.copy(this.spherical);\n    }\n    /**\n     * Returns the camera's current vertical field of view in degrees.\n     */\n    getFieldOfView() {\n        return this.camera.fov;\n    }\n    /**\n     * Configure the _options of the controls. Configured _options will be\n     * merged with whatever _options have already been configured for this\n     * controls instance.\n     */\n    applyOptions(_options) {\n        Object.assign(this._options, _options);\n        // Re-evaluates clamping based on potentially new values for min/max\n        // polar, azimuth and radius:\n        this.setOrbit();\n        this.setFieldOfView(Math.exp(this.goalLogFov));\n    }\n    /**\n     * Sets the near and far planes of the camera.\n     */\n    updateNearFar(nearPlane, farPlane) {\n        this.camera.near = Math.max(nearPlane, farPlane / 1000);\n        this.camera.far = farPlane;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Sets the aspect ratio of the camera\n     */\n    updateAspect(aspect) {\n        this.camera.aspect = aspect;\n        this.camera.updateProjectionMatrix();\n    }\n    /**\n     * Set the absolute orbital goal of the camera. The change will be\n     * applied over a number of frames depending on configured acceleration and\n     * dampening _options.\n     *\n     * Returns true if invoking the method will result in the camera changing\n     * position and/or rotation, otherwise false.\n     */\n    setOrbit(goalTheta = this.goalSpherical.theta, goalPhi = this.goalSpherical.phi, goalRadius = this.goalSpherical.radius) {\n        const { minimumAzimuthalAngle, maximumAzimuthalAngle, minimumPolarAngle, maximumPolarAngle, minimumRadius, maximumRadius } = this._options;\n        const { theta, phi, radius } = this.goalSpherical;\n        const nextTheta = clamp(goalTheta, minimumAzimuthalAngle, maximumAzimuthalAngle);\n        if (!isFinite(minimumAzimuthalAngle) &&\n            !isFinite(maximumAzimuthalAngle)) {\n            this.spherical.theta =\n                this.wrapAngle(this.spherical.theta - nextTheta) + nextTheta;\n        }\n        const nextPhi = clamp(goalPhi, minimumPolarAngle, maximumPolarAngle);\n        const nextRadius = clamp(goalRadius, minimumRadius, maximumRadius);\n        if (nextTheta === theta && nextPhi === phi && nextRadius === radius) {\n            return false;\n        }\n        this.goalSpherical.theta = nextTheta;\n        this.goalSpherical.phi = nextPhi;\n        this.goalSpherical.radius = nextRadius;\n        this.goalSpherical.makeSafe();\n        this.isUserChange = false;\n        return true;\n    }\n    /**\n     * Subset of setOrbit() above, which only sets the camera's radius.\n     */\n    setRadius(radius) {\n        this.goalSpherical.radius = radius;\n        this.setOrbit();\n    }\n    /**\n     * Sets the goal field of view for the camera\n     */\n    setFieldOfView(fov) {\n        const { minimumFieldOfView, maximumFieldOfView } = this._options;\n        fov = clamp(fov, minimumFieldOfView, maximumFieldOfView);\n        this.goalLogFov = Math.log(fov);\n    }\n    /**\n     * Adjust the orbital position of the camera relative to its current orbital\n     * position. Does not let the theta goal get more than pi ahead of the current\n     * theta, which ensures interpolation continues in the direction of the delta.\n     * The deltaZoom parameter adjusts both the field of view and the orbit radius\n     * such that they progress across their allowed ranges in sync.\n     */\n    adjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        const { theta, phi, radius } = this.goalSpherical;\n        const { minimumRadius, maximumRadius, minimumFieldOfView, maximumFieldOfView } = this._options;\n        const dTheta = this.spherical.theta - theta;\n        const dThetaLimit = Math.PI - 0.001;\n        const goalTheta = theta - clamp(deltaTheta, -dThetaLimit - dTheta, dThetaLimit - dTheta);\n        const goalPhi = phi - deltaPhi;\n        const deltaRatio = deltaZoom === 0 ?\n            0 :\n            deltaZoom > 0 ? (maximumRadius - radius) /\n                (Math.log(maximumFieldOfView) - this.goalLogFov) :\n                (radius - minimumRadius) /\n                    (this.goalLogFov - Math.log(minimumFieldOfView));\n        const goalRadius = radius +\n            deltaZoom *\n                Math.min(isFinite(deltaRatio) ? deltaRatio : Infinity, maximumRadius - minimumRadius);\n        this.setOrbit(goalTheta, goalPhi, goalRadius);\n        if (deltaZoom !== 0) {\n            const goalLogFov = this.goalLogFov + deltaZoom;\n            this.setFieldOfView(Math.exp(goalLogFov));\n        }\n    }\n    /**\n     * Move the camera instantly instead of accelerating toward the goal\n     * parameters.\n     */\n    jumpToGoal() {\n        this.update(0, SETTLING_TIME);\n    }\n    /**\n     * Update controls. In most cases, this will result in the camera\n     * interpolating its position and rotation until it lines up with the\n     * designated goal orbital position.\n     *\n     * Time and delta are measured in milliseconds.\n     */\n    update(_time, delta) {\n        if (this.isStationary()) {\n            return;\n        }\n        const { maximumPolarAngle, maximumRadius } = this._options;\n        const dTheta = this.spherical.theta - this.goalSpherical.theta;\n        if (Math.abs(dTheta) > Math.PI &&\n            !isFinite(this._options.minimumAzimuthalAngle) &&\n            !isFinite(this._options.maximumAzimuthalAngle)) {\n            this.spherical.theta -= Math.sign(dTheta) * 2 * Math.PI;\n        }\n        this.spherical.theta = this.thetaDamper.update(this.spherical.theta, this.goalSpherical.theta, delta, Math.PI);\n        this.spherical.phi = this.phiDamper.update(this.spherical.phi, this.goalSpherical.phi, delta, maximumPolarAngle);\n        this.spherical.radius = this.radiusDamper.update(this.spherical.radius, this.goalSpherical.radius, delta, maximumRadius);\n        this.logFov = this.fovDamper.update(this.logFov, this.goalLogFov, delta, 1);\n        this.moveCamera();\n    }\n    isStationary() {\n        return this.goalSpherical.theta === this.spherical.theta &&\n            this.goalSpherical.phi === this.spherical.phi &&\n            this.goalSpherical.radius === this.spherical.radius &&\n            this.goalLogFov === this.logFov;\n    }\n    moveCamera() {\n        // Derive the new camera position from the updated spherical:\n        this.spherical.makeSafe();\n        this.camera.position.setFromSpherical(this.spherical);\n        this.camera.setRotationFromEuler(new Euler(this.spherical.phi - Math.PI / 2, this.spherical.theta, 0, 'YXZ'));\n        if (this.camera.fov !== Math.exp(this.logFov)) {\n            this.camera.fov = Math.exp(this.logFov);\n            this.camera.updateProjectionMatrix();\n        }\n        const source = this.isUserChange ? ChangeSource.USER_INTERACTION : ChangeSource.NONE;\n        this.dispatchEvent({ type: 'change', source });\n    }\n    get canInteract() {\n        if (this._options.interactionPolicy == 'allow-when-focused') {\n            const rootNode = this.element.getRootNode();\n            return rootNode.activeElement === this.element;\n        }\n        return this._options.interactionPolicy === 'always-allow';\n    }\n    userAdjustOrbit(deltaTheta, deltaPhi, deltaZoom) {\n        this.adjustOrbit(deltaTheta * this.sensitivity, deltaPhi * this.sensitivity, deltaZoom);\n        this.isUserChange = true;\n        // Always make sure that an initial event is triggered in case there is\n        // contention between user interaction and imperative changes. This initial\n        // event will give external observers that chance to observe that\n        // interaction occurred at all:\n        this.dispatchEvent({ type: 'change', source: ChangeSource.USER_INTERACTION });\n    }\n    // Wraps to bewteen -pi and pi\n    wrapAngle(radians) {\n        const normalized = (radians + Math.PI) / (2 * Math.PI);\n        const wrapped = normalized - Math.floor(normalized);\n        return wrapped * 2 * Math.PI - Math.PI;\n    }\n    pixelLengthToSphericalAngle(pixelLength) {\n        return 2 * Math.PI * pixelLength / this.element.clientHeight;\n    }\n    twoTouchDistance(touchOne, touchTwo) {\n        const { clientX: xOne, clientY: yOne } = touchOne;\n        const { clientX: xTwo, clientY: yTwo } = touchTwo;\n        const xDelta = xTwo - xOne;\n        const yDelta = yTwo - yOne;\n        return Math.sqrt(xDelta * xDelta + yDelta * yDelta);\n    }\n    handleSinglePointerMove(pointer) {\n        const { clientX, clientY } = pointer;\n        const deltaTheta = this.pixelLengthToSphericalAngle(clientX - this.lastPointerPosition.clientX);\n        const deltaPhi = this.pixelLengthToSphericalAngle(clientY - this.lastPointerPosition.clientY);\n        this.lastPointerPosition.clientX = clientX;\n        this.lastPointerPosition.clientY = clientY;\n        if (this.isUserPointing === false) {\n            this.isUserPointing = true;\n            this.dispatchEvent({ type: 'pointer-change-start', pointer: Object.assign({}, pointer) });\n        }\n        this.userAdjustOrbit(deltaTheta, deltaPhi, 0);\n    }\n    handleSinglePointerDown(pointer) {\n        this.lastPointerPosition.clientX = pointer.clientX;\n        this.lastPointerPosition.clientY = pointer.clientY;\n        this.element.style.cursor = 'grabbing';\n    }\n}\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Adapted from https://gist.github.com/gre/1650294\nconst easeInOutQuad = (t) => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n/**\n * Creates a TimingFunction that uses a given ease to interpolate between\n * two configured number values.\n */\nconst interpolate = (start, end, ease = easeInOutQuad) => (time) => start + (end - start) * ease(time);\n/**\n * Creates a TimingFunction that interpolates through a weighted list\n * of other TimingFunctions (\"tracks\"). Tracks are interpolated in order, and\n * allocated a percentage of the total time based on their relative weight.\n */\nconst sequence = (tracks, weights) => {\n    const totalWeight = weights.reduce((total, weight) => total + weight, 0);\n    const ratios = weights.map(weight => weight / totalWeight);\n    return (time) => {\n        let start = 0;\n        let ratio = Infinity;\n        let track = () => 0;\n        for (let i = 0; i < ratios.length; ++i) {\n            ratio = ratios[i];\n            track = tracks[i];\n            if (time <= (start + ratio)) {\n                break;\n            }\n            start += ratio;\n        }\n        return track((time - start) / ratio);\n    };\n};\n/**\n * Creates a \"timeline\" TimingFunction out of an initial value and a series of\n * Keyframes. The timeline function accepts value from 0-1 and returns the\n * current value based on keyframe interpolation across the total number of\n * frames. Frames are only used to indicate the relative length of each keyframe\n * transition, so interpolated values will be computed for fractional frames.\n */\nconst timeline = (initialValue, keyframes) => {\n    const tracks = [];\n    const weights = [];\n    let lastValue = initialValue;\n    for (let i = 0; i < keyframes.length; ++i) {\n        const keyframe = keyframes[i];\n        const { value, frames } = keyframe;\n        const ease = keyframe.ease || easeInOutQuad;\n        const track = interpolate(lastValue, value, ease);\n        tracks.push(track);\n        weights.push(frames);\n        lastValue = value;\n    }\n    return sequence(tracks, weights);\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$3 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// NOTE(cdata): The following \"animation\" timing functions are deliberately\n// being used in favor of CSS animations. In Safari 12.1 and 13, CSS animations\n// would cause the interaction prompt to glitch unexpectedly\n// @see https://github.com/google/model-viewer/issues/839\nconst PROMPT_ANIMATION_TIME = 5000;\n// For timing purposes, a \"frame\" is a timing agnostic relative unit of time\n// and a \"value\" is a target value for the keyframe.\nconst wiggle = timeline(0, [\n    { frames: 5, value: -1 },\n    { frames: 1, value: -1 },\n    { frames: 8, value: 1 },\n    { frames: 1, value: 1 },\n    { frames: 5, value: 0 },\n    { frames: 18, value: 0 }\n]);\nconst fade = timeline(0, [\n    { frames: 1, value: 1 },\n    { frames: 5, value: 1 },\n    { frames: 1, value: 0 },\n    { frames: 6, value: 0 }\n]);\nconst DEFAULT_CAMERA_ORBIT = '0deg 75deg 105%';\nconst DEFAULT_CAMERA_TARGET = 'auto auto auto';\nconst DEFAULT_FIELD_OF_VIEW = 'auto';\nconst MINIMUM_RADIUS_RATIO = 1.1 * SAFE_RADIUS_RATIO;\nconst AZIMUTHAL_QUADRANT_LABELS = ['front', 'right', 'back', 'left'];\nconst POLAR_TRIENT_LABELS = ['upper-', '', 'lower-'];\nconst DEFAULT_INTERACTION_PROMPT_THRESHOLD = 3000;\nconst INTERACTION_PROMPT = 'Use mouse, touch or arrow keys to control the camera!';\nconst InteractionPromptStrategy = {\n    AUTO: 'auto',\n    WHEN_FOCUSED: 'when-focused',\n    NONE: 'none'\n};\nconst InteractionPromptStyle = {\n    BASIC: 'basic',\n    WIGGLE: 'wiggle'\n};\nconst InteractionPolicy = {\n    ALWAYS_ALLOW: 'always-allow',\n    WHEN_FOCUSED: 'allow-when-focused'\n};\nconst TouchAction = {\n    PAN_Y: 'pan-y',\n    PAN_X: 'pan-x',\n    NONE: 'none'\n};\nconst fieldOfViewIntrinsics = (element) => {\n    return {\n        basis: [numberNode(element[$zoomAdjustedFieldOfView] * Math.PI / 180, 'rad')],\n        keywords: { auto: [null] }\n    };\n};\nconst minFieldOfViewIntrinsics = {\n    basis: [degreesToRadians(numberNode(25, 'deg'))],\n    keywords: { auto: [null] }\n};\nconst maxFieldOfViewIntrinsics = (element) => {\n    const scene = element[$scene];\n    return {\n        basis: [degreesToRadians(numberNode(45, 'deg'))],\n        keywords: { auto: [numberNode(scene.framedFieldOfView, 'deg')] }\n    };\n};\nconst cameraOrbitIntrinsics = (() => {\n    const defaultTerms = parseExpressions(DEFAULT_CAMERA_ORBIT)[0]\n        .terms;\n    const theta = normalizeUnit(defaultTerms[0]);\n    const phi = normalizeUnit(defaultTerms[1]);\n    return (element) => {\n        const radius = element[$scene].model.idealCameraDistance;\n        return {\n            basis: [theta, phi, numberNode(radius, 'm')],\n            keywords: { auto: [null, null, numberNode(105, '%')] }\n        };\n    };\n})();\nconst minCameraOrbitIntrinsics = (element) => {\n    const radius = MINIMUM_RADIUS_RATIO * element[$scene].model.idealCameraDistance;\n    return {\n        basis: [\n            numberNode(-Infinity, 'rad'),\n            numberNode(Math.PI / 8, 'rad'),\n            numberNode(radius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst maxCameraOrbitIntrinsics = (element) => {\n    const orbitIntrinsics = cameraOrbitIntrinsics(element);\n    const evaluator = new StyleEvaluator([], orbitIntrinsics);\n    const defaultRadius = evaluator.evaluate()[2];\n    return {\n        basis: [\n            numberNode(Infinity, 'rad'),\n            numberNode(Math.PI - Math.PI / 8, 'rad'),\n            numberNode(defaultRadius, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst cameraTargetIntrinsics = (element) => {\n    const center = element[$scene].model.boundingBox.getCenter(new Vector3);\n    return {\n        basis: [\n            numberNode(center.x, 'm'),\n            numberNode(center.y, 'm'),\n            numberNode(center.z, 'm')\n        ],\n        keywords: { auto: [null, null, null] }\n    };\n};\nconst HALF_PI = Math.PI / 2.0;\nconst THIRD_PI = Math.PI / 3.0;\nconst QUARTER_PI = HALF_PI / 2.0;\nconst TAU = 2.0 * Math.PI;\nconst $controls = Symbol('controls');\nconst $promptElement = Symbol('promptElement');\nconst $promptAnimatedContainer = Symbol('promptAnimatedContainer');\nconst $deferInteractionPrompt = Symbol('deferInteractionPrompt');\nconst $updateAria = Symbol('updateAria');\nconst $updateCameraForRadius = Symbol('updateCameraForRadius');\nconst $blurHandler = Symbol('blurHandler');\nconst $focusHandler = Symbol('focusHandler');\nconst $changeHandler = Symbol('changeHandler');\nconst $pointerChangeHandler = Symbol('pointerChangeHandler');\nconst $onBlur = Symbol('onBlur');\nconst $onFocus = Symbol('onFocus');\nconst $onChange = Symbol('onChange');\nconst $onPointerChange = Symbol('onPointerChange');\nconst $waitingToPromptUser = Symbol('waitingToPromptUser');\nconst $userHasInteracted = Symbol('userHasInteracted');\nconst $promptElementVisibleTime = Symbol('promptElementVisibleTime');\nconst $lastPromptOffset = Symbol('lastPromptOffset');\nconst $focusedTime = Symbol('focusedTime');\nconst $zoomAdjustedFieldOfView = Symbol('zoomAdjustedFieldOfView');\nconst $lastSpherical = Symbol('lastSpherical');\nconst $jumpCamera = Symbol('jumpCamera');\nconst $initialized$1 = Symbol('initialized');\nconst $maintainThetaPhi = Symbol('maintainThetaPhi');\nconst $syncCameraOrbit = Symbol('syncCameraOrbit');\nconst $syncFieldOfView = Symbol('syncFieldOfView');\nconst $syncCameraTarget = Symbol('syncCameraTarget');\nconst $syncMinCameraOrbit = Symbol('syncMinCameraOrbit');\nconst $syncMaxCameraOrbit = Symbol('syncMaxCameraOrbit');\nconst $syncMinFieldOfView = Symbol('syncMinFieldOfView');\nconst $syncMaxFieldOfView = Symbol('syncMaxFieldOfView');\nconst ControlsMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;\n    class ControlsModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.cameraControls = false;\n            this.cameraOrbit = DEFAULT_CAMERA_ORBIT;\n            this.cameraTarget = DEFAULT_CAMERA_TARGET;\n            this.fieldOfView = DEFAULT_FIELD_OF_VIEW;\n            this.minCameraOrbit = 'auto';\n            this.maxCameraOrbit = 'auto';\n            this.minFieldOfView = 'auto';\n            this.maxFieldOfView = 'auto';\n            this.interactionPromptThreshold = DEFAULT_INTERACTION_PROMPT_THRESHOLD;\n            this.interactionPromptStyle = InteractionPromptStyle.WIGGLE;\n            this.interactionPrompt = InteractionPromptStrategy.AUTO;\n            this.interactionPolicy = InteractionPolicy.ALWAYS_ALLOW;\n            this.orbitSensitivity = 1;\n            this.touchAction = TouchAction.PAN_Y;\n            this[_a] = this.shadowRoot.querySelector('.interaction-prompt');\n            this[_b] = this.shadowRoot.querySelector('.interaction-prompt > .animated-container');\n            this[_c] = Infinity;\n            this[_d] = 0;\n            this[_e] = Infinity;\n            this[_f] = false;\n            this[_g] = false;\n            this[_h] = new SmoothControls(this[$scene].camera, this[$userInputElement]);\n            this[_j] = 0;\n            this[_k] = new Spherical();\n            this[_l] = false;\n            this[_m] = false;\n            this[_o] = false;\n            this[_p] = (event) => this[$onChange](event);\n            this[_q] = (event) => this[$onPointerChange](event);\n            this[_r] = () => this[$onFocus]();\n            this[_s] = () => this[$onBlur]();\n        }\n        getCameraOrbit() {\n            const { theta, phi, radius } = this[$lastSpherical];\n            return { theta, phi, radius };\n        }\n        getCameraTarget() {\n            return toVector3D(this[$scene].getTarget());\n        }\n        getFieldOfView() {\n            return this[$controls].getFieldOfView();\n        }\n        // Provided so user code does not have to parse these from attributes.\n        getMinimumFieldOfView() {\n            return this[$controls].options.minimumFieldOfView;\n        }\n        getMaximumFieldOfView() {\n            return this[$controls].options.maximumFieldOfView;\n        }\n        jumpCameraToGoal() {\n            this[$jumpCamera] = true;\n            this.requestUpdate($jumpCamera, false);\n        }\n        resetInteractionPrompt() {\n            this[$lastPromptOffset] = 0;\n            this[$promptElementVisibleTime] = Infinity;\n            this[$userHasInteracted] = false;\n            this[$waitingToPromptUser] =\n                this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$controls].addEventListener('change', this[$changeHandler]);\n            this[$controls].addEventListener('pointer-change-start', this[$pointerChangeHandler]);\n            this[$controls].addEventListener('pointer-change-end', this[$pointerChangeHandler]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$controls].removeEventListener('change', this[$changeHandler]);\n            this[$controls].removeEventListener('pointer-change-start', this[$pointerChangeHandler]);\n            this[$controls].removeEventListener('pointer-change-end', this[$pointerChangeHandler]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            const controls = this[$controls];\n            const input = this[$userInputElement];\n            if (changedProperties.has('cameraControls')) {\n                if (this.cameraControls) {\n                    controls.enableInteraction();\n                    if (this.interactionPrompt === InteractionPromptStrategy.AUTO) {\n                        this[$waitingToPromptUser] = true;\n                    }\n                    input.addEventListener('focus', this[$focusHandler]);\n                    input.addEventListener('blur', this[$blurHandler]);\n                }\n                else {\n                    input.removeEventListener('focus', this[$focusHandler]);\n                    input.removeEventListener('blur', this[$blurHandler]);\n                    controls.disableInteraction();\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPrompt') ||\n                changedProperties.has('cameraControls') ||\n                changedProperties.has('src')) {\n                if (this.interactionPrompt === InteractionPromptStrategy.AUTO &&\n                    this.cameraControls && !this[$userHasInteracted]) {\n                    this[$waitingToPromptUser] = true;\n                }\n                else {\n                    this[$deferInteractionPrompt]();\n                }\n            }\n            if (changedProperties.has('interactionPromptStyle')) {\n                this[$promptElement].classList.toggle('wiggle', this.interactionPromptStyle === InteractionPromptStyle.WIGGLE);\n            }\n            if (changedProperties.has('interactionPolicy')) {\n                const interactionPolicy = this.interactionPolicy;\n                controls.applyOptions({ interactionPolicy });\n            }\n            if (changedProperties.has('touchAction')) {\n                const touchAction = this.touchAction;\n                controls.applyOptions({ touchAction });\n            }\n            if (changedProperties.has('orbitSensitivity')) {\n                this[$controls].sensitivity = this.orbitSensitivity;\n            }\n            if (this[$jumpCamera] === true) {\n                Promise.resolve().then(() => {\n                    this[$controls].jumpToGoal();\n                    this[$scene].jumpToGoal();\n                    this[$jumpCamera] = false;\n                });\n            }\n        }\n        [(_a = $promptElement, _b = $promptAnimatedContainer, _c = $focusedTime, _d = $lastPromptOffset, _e = $promptElementVisibleTime, _f = $userHasInteracted, _g = $waitingToPromptUser, _h = $controls, _j = $zoomAdjustedFieldOfView, _k = $lastSpherical, _l = $jumpCamera, _m = $initialized$1, _o = $maintainThetaPhi, _p = $changeHandler, _q = $pointerChangeHandler, _r = $focusHandler, _s = $blurHandler, $syncFieldOfView)](style) {\n            this[$controls].setFieldOfView(style[0] * 180 / Math.PI);\n        }\n        [$syncCameraOrbit](style) {\n            if (this[$maintainThetaPhi]) {\n                const { theta, phi } = this.getCameraOrbit();\n                style[0] = theta;\n                style[1] = phi;\n                this[$maintainThetaPhi] = false;\n            }\n            this[$controls].setOrbit(style[0], style[1], style[2]);\n        }\n        [$syncMinCameraOrbit](style) {\n            this[$controls].applyOptions({\n                minimumAzimuthalAngle: style[0],\n                minimumPolarAngle: style[1],\n                minimumRadius: style[2]\n            });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxCameraOrbit](style) {\n            this[$controls].applyOptions({\n                maximumAzimuthalAngle: style[0],\n                maximumPolarAngle: style[1],\n                maximumRadius: style[2]\n            });\n            this[$updateCameraForRadius](style[2]);\n            this.jumpCameraToGoal();\n        }\n        [$syncMinFieldOfView](style) {\n            this[$controls].applyOptions({ minimumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncMaxFieldOfView](style) {\n            this[$controls].applyOptions({ maximumFieldOfView: style[0] * 180 / Math.PI });\n            this.jumpCameraToGoal();\n        }\n        [$syncCameraTarget](style) {\n            const [x, y, z] = style;\n            this[$scene].setTarget(x, y, z);\n            this[$renderer].arRenderer.updateTarget();\n        }\n        [$tick$1](time, delta) {\n            super[$tick$1](time, delta);\n            if (this[$renderer].isPresenting || !this[$hasTransitioned]()) {\n                return;\n            }\n            const now = performance.now();\n            if (this[$waitingToPromptUser]) {\n                const thresholdTime = this.interactionPrompt === InteractionPromptStrategy.AUTO ?\n                    this[$loadedTime] :\n                    this[$focusedTime];\n                if (this.loaded &&\n                    now > thresholdTime + this.interactionPromptThreshold) {\n                    this[$userInputElement].setAttribute('aria-label', INTERACTION_PROMPT);\n                    this[$waitingToPromptUser] = false;\n                    this[$promptElementVisibleTime] = now;\n                    this[$promptElement].classList.add('visible');\n                }\n            }\n            if (isFinite(this[$promptElementVisibleTime]) &&\n                this.interactionPromptStyle === InteractionPromptStyle.WIGGLE) {\n                const scene = this[$scene];\n                const animationTime = ((now - this[$promptElementVisibleTime]) / PROMPT_ANIMATION_TIME) %\n                    1;\n                const offset = wiggle(animationTime);\n                const opacity = fade(animationTime);\n                this[$promptAnimatedContainer].style.opacity = `${opacity}`;\n                if (offset !== this[$lastPromptOffset]) {\n                    const xOffset = offset * scene.width * 0.05;\n                    const deltaTheta = (offset - this[$lastPromptOffset]) * Math.PI / 16;\n                    this[$promptAnimatedContainer].style.transform =\n                        `translateX(${xOffset}px)`;\n                    this[$controls].adjustOrbit(deltaTheta, 0, 0);\n                    this[$lastPromptOffset] = offset;\n                }\n            }\n            this[$controls].update(time, delta);\n            this[$scene].updateTarget(delta);\n        }\n        [$deferInteractionPrompt]() {\n            // Effectively cancel the timer waiting for user interaction:\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n        }\n        /**\n         * Updates the camera's near and far planes to enclose the scene when\n         * orbiting at the supplied radius.\n         */\n        [$updateCameraForRadius](radius) {\n            const { idealCameraDistance } = this[$scene].model;\n            const maximumRadius = Math.max(idealCameraDistance, radius);\n            const near = 0;\n            const far = 2 * maximumRadius;\n            this[$controls].updateNearFar(near, far);\n        }\n        [$updateAria]() {\n            // NOTE(cdata): It is possible that we might want to record the\n            // last spherical when the label actually changed. Right now, the\n            // side-effect the current implementation is that we will only\n            // announce the first view change that occurs after the element\n            // becomes focused.\n            const { theta: lastTheta, phi: lastPhi } = this[$lastSpherical];\n            const { theta, phi } = this[$controls].getCameraSpherical(this[$lastSpherical]);\n            const rootNode = this.getRootNode();\n            // Only change the aria-label if <model-viewer> is currently focused:\n            if (rootNode != null && rootNode.activeElement === this) {\n                const lastAzimuthalQuadrant = (4 + Math.floor(((lastTheta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const azimuthalQuadrant = (4 + Math.floor(((theta % TAU) + QUARTER_PI) / HALF_PI)) % 4;\n                const lastPolarTrient = Math.floor(lastPhi / THIRD_PI);\n                const polarTrient = Math.floor(phi / THIRD_PI);\n                if (azimuthalQuadrant !== lastAzimuthalQuadrant ||\n                    polarTrient !== lastPolarTrient) {\n                    const azimuthalQuadrantLabel = AZIMUTHAL_QUADRANT_LABELS[azimuthalQuadrant];\n                    const polarTrientLabel = POLAR_TRIENT_LABELS[polarTrient];\n                    const ariaLabel = `View from stage ${polarTrientLabel}${azimuthalQuadrantLabel}`;\n                    this[$userInputElement].setAttribute('aria-label', ariaLabel);\n                }\n            }\n        }\n        [$onResize](event) {\n            const controls = this[$controls];\n            const oldFramedFieldOfView = this[$scene].framedFieldOfView;\n            // The super of $onResize will update the scene's framedFieldOfView, so we\n            // compare the before and after to calculate the proper zoom.\n            super[$onResize](event);\n            const newFramedFieldOfView = this[$scene].framedFieldOfView;\n            const zoom = controls.getFieldOfView() / oldFramedFieldOfView;\n            this[$zoomAdjustedFieldOfView] = newFramedFieldOfView * zoom;\n            controls.updateAspect(this[$scene].aspect);\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.jumpCameraToGoal();\n        }\n        [$onModelLoad]() {\n            super[$onModelLoad]();\n            const { framedFieldOfView } = this[$scene];\n            this[$zoomAdjustedFieldOfView] = framedFieldOfView;\n            if (this[$initialized$1]) {\n                this[$maintainThetaPhi] = true;\n            }\n            else {\n                this[$initialized$1] = true;\n            }\n            this.requestUpdate('maxFieldOfView', this.maxFieldOfView);\n            this.requestUpdate('fieldOfView', this.fieldOfView);\n            this.requestUpdate('minCameraOrbit', this.minCameraOrbit);\n            this.requestUpdate('maxCameraOrbit', this.maxCameraOrbit);\n            this.requestUpdate('cameraOrbit', this.cameraOrbit);\n            this.requestUpdate('cameraTarget', this.cameraTarget);\n            this.jumpCameraToGoal();\n        }\n        [$onFocus]() {\n            const input = this[$userInputElement];\n            if (!isFinite(this[$focusedTime])) {\n                this[$focusedTime] = performance.now();\n            }\n            // NOTE(cdata): On every re-focus, we switch the aria-label back to\n            // the original, non-prompt label if appropriate. If the user has\n            // already interacted, they no longer need to hear the prompt.\n            // Otherwise, they will hear it again after the idle prompt threshold\n            // has been crossed.\n            const ariaLabel = this[$ariaLabel];\n            if (input.getAttribute('aria-label') !== ariaLabel) {\n                input.setAttribute('aria-label', ariaLabel);\n            }\n            if (this.interactionPrompt === InteractionPromptStrategy.WHEN_FOCUSED &&\n                !this[$userHasInteracted]) {\n                this[$waitingToPromptUser] = true;\n            }\n        }\n        [$onBlur]() {\n            if (this.interactionPrompt !== InteractionPromptStrategy.WHEN_FOCUSED) {\n                return;\n            }\n            this[$waitingToPromptUser] = false;\n            this[$promptElement].classList.remove('visible');\n            this[$promptElementVisibleTime] = Infinity;\n            this[$focusedTime] = Infinity;\n        }\n        [$onChange]({ source }) {\n            this[$updateAria]();\n            this[$needsRender]();\n            if (source === ChangeSource.USER_INTERACTION) {\n                this[$userHasInteracted] = true;\n                this[$deferInteractionPrompt]();\n            }\n            this.dispatchEvent(new CustomEvent('camera-change', { detail: { source } }));\n        }\n        [$onPointerChange](event) {\n            if (event.type === 'pointer-change-start') {\n                this[$container].classList.add('pointer-tumbling');\n            }\n            else {\n                this[$container].classList.remove('pointer-tumbling');\n            }\n        }\n    }\n    __decorate$3([\n        property({ type: Boolean, attribute: 'camera-controls' })\n    ], ControlsModelViewerElement.prototype, \"cameraControls\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: cameraOrbitIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraOrbit\n        }),\n        property({ type: String, attribute: 'camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: cameraTargetIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncCameraTarget\n        }),\n        property({ type: String, attribute: 'camera-target', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"cameraTarget\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: fieldOfViewIntrinsics,\n            observeEffects: true,\n            updateHandler: $syncFieldOfView\n        }),\n        property({ type: String, attribute: 'field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"fieldOfView\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: minCameraOrbitIntrinsics,\n            updateHandler: $syncMinCameraOrbit\n        }),\n        property({ type: String, attribute: 'min-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minCameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: maxCameraOrbitIntrinsics,\n            updateHandler: $syncMaxCameraOrbit\n        }),\n        property({ type: String, attribute: 'max-camera-orbit', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxCameraOrbit\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: minFieldOfViewIntrinsics,\n            updateHandler: $syncMinFieldOfView\n        }),\n        property({ type: String, attribute: 'min-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"minFieldOfView\", void 0);\n    __decorate$3([\n        style({\n            intrinsics: maxFieldOfViewIntrinsics,\n            updateHandler: $syncMaxFieldOfView\n        }),\n        property({ type: String, attribute: 'max-field-of-view', hasChanged: () => true })\n    ], ControlsModelViewerElement.prototype, \"maxFieldOfView\", void 0);\n    __decorate$3([\n        property({ type: Number, attribute: 'interaction-prompt-threshold' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptThreshold\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-prompt-style' })\n    ], ControlsModelViewerElement.prototype, \"interactionPromptStyle\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-prompt' })\n    ], ControlsModelViewerElement.prototype, \"interactionPrompt\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'interaction-policy' })\n    ], ControlsModelViewerElement.prototype, \"interactionPolicy\", void 0);\n    __decorate$3([\n        property({ type: Number, attribute: 'orbit-sensitivity' })\n    ], ControlsModelViewerElement.prototype, \"orbitSensitivity\", void 0);\n    __decorate$3([\n        property({ type: String, attribute: 'touch-action' })\n    ], ControlsModelViewerElement.prototype, \"touchAction\", void 0);\n    return ControlsModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$4 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst BASE_OPACITY = 0.1;\nconst DEFAULT_SHADOW_INTENSITY = 0.0;\nconst DEFAULT_SHADOW_SOFTNESS = 1.0;\nconst DEFAULT_EXPOSURE = 1.0;\nconst $currentEnvironmentMap = Symbol('currentEnvironmentMap');\nconst $applyEnvironmentMap = Symbol('applyEnvironmentMap');\nconst $updateEnvironment = Symbol('updateEnvironment');\nconst $cancelEnvironmentUpdate = Symbol('cancelEnvironmentUpdate');\nconst $onPreload = Symbol('onPreload');\nconst EnvironmentMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class EnvironmentModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.environmentImage = null;\n            this.skyboxImage = null;\n            this.shadowIntensity = DEFAULT_SHADOW_INTENSITY;\n            this.shadowSoftness = DEFAULT_SHADOW_SOFTNESS;\n            this.exposure = DEFAULT_EXPOSURE;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = (event) => {\n                if (event.element === this) {\n                    this[$updateEnvironment]();\n                }\n            };\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this[$renderer].loader.addEventListener('preload', this[$onPreload]);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$renderer].loader.removeEventListener('preload', this[$onPreload]);\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('shadowIntensity')) {\n                this[$scene].setShadowIntensity(this.shadowIntensity * BASE_OPACITY);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('shadowSoftness')) {\n                this[$scene].setShadowSoftness(this.shadowSoftness);\n                this[$needsRender]();\n            }\n            if (changedProperties.has('exposure')) {\n                this[$scene].exposure = this.exposure;\n                this[$needsRender]();\n            }\n            if ((changedProperties.has('environmentImage') ||\n                changedProperties.has('skyboxImage')) &&\n                this[$shouldAttemptPreload]()) {\n                this[$updateEnvironment]();\n            }\n        }\n        [(_a = $currentEnvironmentMap, _b = $cancelEnvironmentUpdate, _c = $onPreload, $onModelLoad)]() {\n            super[$onModelLoad]();\n            if (this[$currentEnvironmentMap] != null) {\n                this[$applyEnvironmentMap](this[$currentEnvironmentMap]);\n            }\n        }\n        async [$updateEnvironment]() {\n            const { skyboxImage, environmentImage } = this;\n            if (this[$cancelEnvironmentUpdate] != null) {\n                this[$cancelEnvironmentUpdate]();\n                this[$cancelEnvironmentUpdate] = null;\n            }\n            const { textureUtils } = this[$renderer];\n            if (textureUtils == null) {\n                return;\n            }\n            try {\n                const { environmentMap, skybox } = await new Promise(async (resolve, reject) => {\n                    const texturesLoad = textureUtils.generateEnvironmentMapAndSkybox(deserializeUrl(skyboxImage), deserializeUrl(environmentImage), { progressTracker: this[$progressTracker] });\n                    this[$cancelEnvironmentUpdate] = () => reject(texturesLoad);\n                    resolve(await texturesLoad);\n                });\n                const environment = environmentMap.texture;\n                if (skybox != null) {\n                    // When using the same environment and skybox, use the environment as\n                    // it gives HDR filtering.\n                    this[$scene].background = skybox.userData.url ===\n                        environment.userData.url ?\n                        environment :\n                        skybox;\n                }\n                else {\n                    this[$scene].background = null;\n                }\n                this[$applyEnvironmentMap](environmentMap.texture);\n                this[$scene].model.dispatchEvent({ type: 'envmap-update' });\n            }\n            catch (errorOrPromise) {\n                if (errorOrPromise instanceof Error) {\n                    this[$applyEnvironmentMap](null);\n                    throw errorOrPromise;\n                }\n            }\n        }\n        /**\n         * Sets the Model to use the provided environment map,\n         * or `null` if the Model should remove its' environment map.\n         */\n        [$applyEnvironmentMap](environmentMap) {\n            this[$currentEnvironmentMap] = environmentMap;\n            this[$scene].environment = this[$currentEnvironmentMap];\n            this.dispatchEvent(new CustomEvent('environment-change'));\n            this[$needsRender]();\n        }\n    }\n    __decorate$4([\n        property({ type: String, attribute: 'environment-image' })\n    ], EnvironmentModelViewerElement.prototype, \"environmentImage\", void 0);\n    __decorate$4([\n        property({ type: String, attribute: 'skybox-image' })\n    ], EnvironmentModelViewerElement.prototype, \"skyboxImage\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'shadow-intensity' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowIntensity\", void 0);\n    __decorate$4([\n        property({ type: Number, attribute: 'shadow-softness' })\n    ], EnvironmentModelViewerElement.prototype, \"shadowSoftness\", void 0);\n    __decorate$4([\n        property({\n            type: Number,\n        })\n    ], EnvironmentModelViewerElement.prototype, \"exposure\", void 0);\n    return EnvironmentModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$b, _b$9;\nconst INITIAL_STATUS_ANNOUNCEMENT = 'This page includes one or more 3D models that are loading';\nconst FINISHED_LOADING_ANNOUNCEMENT = 'All 3D models in the page have loaded';\nconst UPDATE_STATUS_DEBOUNCE_MS = 100;\nconst $modelViewerStatusInstance = Symbol('modelViewerStatusInstance');\nconst $updateStatus = Symbol('updateStatus');\n/**\n * The LoadingStatusAnnouncer manages announcements of loading status across\n * all <model-viewer> elements in the document at any given time. As new\n * <model-viewer> elements are connected to the document, they are registered\n * with a LoadingStatusAnnouncer singleton. As they are disconnected, the are\n * also unregistered. Announcements are made to indicate the following\n * conditions:\n *\n *  1. There are <model-viewer> elements that have yet to finish loading\n *  2. All <model-viewer> elements in the page have finished attempting to load\n */\nclass LoadingStatusAnnouncer extends EventDispatcher {\n    constructor() {\n        super();\n        /**\n         * The \"status\" instance is the <model-viewer> instance currently designated\n         * to announce the loading status of all <model-viewer> elements in the\n         * document at any given time. It might change as <model-viewer> elements are\n         * attached or detached over time.\n         */\n        this[_a$b] = null;\n        this.registeredInstanceStatuses = new Map();\n        this.loadingPromises = [];\n        /**\n         * This element is a node that floats around the document as the status\n         * instance changes (see above). It is a singleton that represents the loading\n         * status for all <model-viewer> elements currently in the page. It has its\n         * role attribute set to \"status\", which causes screen readers to announce\n         * any changes to its text content.\n         *\n         * @see https://www.w3.org/TR/wai-aria-1.1/#status\n         */\n        this.statusElement = document.createElement('p');\n        this.statusUpdateInProgress = false;\n        this[_b$9] = debounce(() => this.updateStatus(), UPDATE_STATUS_DEBOUNCE_MS);\n        const { statusElement } = this;\n        const { style } = statusElement;\n        statusElement.setAttribute('role', 'status');\n        statusElement.classList.add('screen-reader-only');\n        style.top = style.left = '0';\n        style.pointerEvents = 'none';\n    }\n    /**\n     * Register a <model-viewer> element with the announcer. If it is not yet\n     * loaded, its loading status will be tracked by the announcer.\n     */\n    registerInstance(modelViewer) {\n        if (this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        let onUnregistered = () => { };\n        const loadShouldBeMeasured = modelViewer.loaded === false && !!modelViewer.src;\n        const loadAttemptCompletes = new Promise((resolve) => {\n            if (!loadShouldBeMeasured) {\n                resolve();\n                return;\n            }\n            const resolveHandler = () => {\n                resolve();\n                modelViewer.removeEventListener('load', resolveHandler);\n                modelViewer.removeEventListener('error', resolveHandler);\n            };\n            modelViewer.addEventListener('load', resolveHandler);\n            modelViewer.addEventListener('error', resolveHandler);\n            onUnregistered = resolveHandler;\n        });\n        this.registeredInstanceStatuses.set(modelViewer, { onUnregistered });\n        this.loadingPromises.push(loadAttemptCompletes);\n        if (this.modelViewerStatusInstance == null) {\n            this.modelViewerStatusInstance = modelViewer;\n        }\n    }\n    /**\n     * Unregister a <model-viewer> element with the announcer. Its loading status\n     * will no longer be tracked by the announcer.\n     */\n    unregisterInstance(modelViewer) {\n        if (!this.registeredInstanceStatuses.has(modelViewer)) {\n            return;\n        }\n        const statuses = this.registeredInstanceStatuses;\n        const instanceStatus = statuses.get(modelViewer);\n        statuses.delete(modelViewer);\n        instanceStatus.onUnregistered();\n        if (this.modelViewerStatusInstance === modelViewer) {\n            this.modelViewerStatusInstance = statuses.size > 0 ?\n                getFirstMapKey(statuses) :\n                null;\n        }\n    }\n    get modelViewerStatusInstance() {\n        return this[$modelViewerStatusInstance];\n    }\n    set modelViewerStatusInstance(value) {\n        const currentInstance = this[$modelViewerStatusInstance];\n        if (currentInstance === value) {\n            return;\n        }\n        const { statusElement } = this;\n        if (value != null && value.shadowRoot != null) {\n            value.shadowRoot.appendChild(statusElement);\n        }\n        else if (statusElement.parentNode != null) {\n            statusElement.parentNode.removeChild(statusElement);\n        }\n        this[$modelViewerStatusInstance] = value;\n        this[$updateStatus]();\n    }\n    async updateStatus() {\n        if (this.statusUpdateInProgress || this.loadingPromises.length === 0) {\n            return;\n        }\n        this.statusElement.textContent = INITIAL_STATUS_ANNOUNCEMENT;\n        this.statusUpdateInProgress = true;\n        this.dispatchEvent({ type: 'initial-status-announced' });\n        while (this.loadingPromises.length) {\n            const { loadingPromises } = this;\n            this.loadingPromises = [];\n            await Promise.all(loadingPromises);\n        }\n        this.statusElement.textContent = FINISHED_LOADING_ANNOUNCEMENT;\n        this.statusUpdateInProgress = false;\n        this.dispatchEvent({ type: 'finished-loading-announced' });\n    }\n}\n_a$b = $modelViewerStatusInstance, _b$9 = $updateStatus;\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$5 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst PROGRESS_BAR_UPDATE_THRESHOLD = 100;\nconst PROGRESS_MASK_BASE_OPACITY = 0.2;\nconst DEFAULT_DRACO_DECODER_LOCATION = 'https://www.gstatic.com/draco/versioned/decoders/1.3.6/';\nconst SPACE_KEY = 32;\nconst ENTER_KEY = 13;\nconst RevealStrategy = {\n    AUTO: 'auto',\n    INTERACTION: 'interaction',\n    MANUAL: 'manual'\n};\nconst LoadingStrategy = {\n    AUTO: 'auto',\n    LAZY: 'lazy',\n    EAGER: 'eager'\n};\nconst PosterDismissalSource = {\n    INTERACTION: 'interaction'\n};\nconst loadingStatusAnnouncer = new LoadingStatusAnnouncer();\nconst $defaultProgressBarElement = Symbol('defaultProgressBarElement');\nconst $defaultProgressMaskElement = Symbol('defaultProgressMaskElement');\nconst $posterContainerElement = Symbol('posterContainerElement');\nconst $defaultPosterElement = Symbol('defaultPosterElement');\nconst $posterDismissalSource = Symbol('posterDismissalSource');\nconst $showPoster = Symbol('showPoster');\nconst $hidePoster = Symbol('hidePoster');\nconst $modelIsRevealed = Symbol('modelIsRevealed');\nconst $updateProgressBar = Symbol('updateProgressBar');\nconst $lastReportedProgress = Symbol('lastReportedProgress');\nconst $transitioned = Symbol('transitioned');\nconst $ariaLabelCallToAction = Symbol('ariaLabelCallToAction');\nconst $clickHandler = Symbol('clickHandler');\nconst $keydownHandler = Symbol('keydownHandler');\nconst $progressHandler = Symbol('processHandler');\nconst $onClick = Symbol('onClick');\nconst $onKeydown = Symbol('onKeydown');\nconst $onProgress = Symbol('onProgress');\n/**\n * LoadingMixin implements features related to lazy loading, as well as\n * presentation details related to the pre-load / pre-render presentation of a\n * <model-viewer>\n *\n * This mixin implements support for models with DRACO-compressed meshes.\n * The DRACO decoder will be loaded on-demand if a glTF that uses the DRACO mesh\n * compression extension is encountered.\n *\n * By default, the DRACO decoder will be loaded from a Google CDN. It is\n * possible to customize where the decoder is loaded from by defining a global\n * configuration option for `<model-viewer>` like so:\n *\n * ```html\n * <script>\n * ModelViewerElement = self.ModelViewerElement || {};\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration strategy must be performed *before* the\n * first `<model-viewer>` element is created in the browser. The configuration\n * can be done anywhere, but the easiest way to ensure it is done at the right\n * time is to do it in the `<head>` of the HTML document. This is the\n * recommended way to set the location because it is most compatible with\n * scenarios where the `<model-viewer>` library is lazily loaded.\n *\n * If you absolutely have to set the DRACO decoder location *after* the first\n * `<model-viewer>` element is created, you can do it this way:\n *\n * ```html\n * <script>\n * const ModelViewerElement = customElements.get('model-viewer');\n * ModelViewerElement.dracoDecoderLocation =\n *     'http://example.com/location/of/draco/decoder/files/';\n * </script>\n * ```\n *\n * Note that the above configuration approach will not work until *after*\n * `<model-viewer>` is defined in the browser. Also note that this configuration\n * *must* be set *before* the first DRACO model is fully loaded.\n *\n * It is recommended that users who intend to take advantage of DRACO mesh\n * compression consider whether or not it is acceptable for their use case to\n * have code side-loaded from a Google CDN. If it is not acceptable, then the\n * location must be customized before loading any DRACO models in order to cause\n * the decoder to be loaded from an alternative, acceptable location.\n */\nconst LoadingMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n    class LoadingModelViewerElement extends ModelViewerElement {\n        constructor(...args) {\n            super(...args);\n            /**\n             * A URL pointing to the image to use as a poster in scenarios where the\n             * <model-viewer> is not ready to reveal a rendered model to the viewer.\n             */\n            this.poster = null;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should reveal a model to the viewer.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"interaction\" and \"manual\".\n             */\n            this.reveal = RevealStrategy.AUTO;\n            /**\n             * An enumerable attribute describing under what conditions the\n             * <model-viewer> should preload a model.\n             *\n             * The default value is \"auto\". The only supported alternative values are\n             * \"lazy\" and \"eager\". Auto is equivalent to lazy, which loads the model\n             * when it is near the viewport for reveal = \"auto\", and when interacted\n             * with for reveal = \"interaction\". Eager loads the model immediately.\n             */\n            this.loading = LoadingStrategy.AUTO;\n            this[_a] = false;\n            this[_b] = false;\n            this[_c] = 0;\n            this[_d] = null;\n            // TODO: Add this to the shadow root as part of this mixin's\n            // implementation:\n            this[_e] = this.shadowRoot.querySelector('.slot.poster');\n            this[_f] = this.shadowRoot.querySelector('#default-poster');\n            this[_g] = this.shadowRoot.querySelector('#default-progress-bar > .bar');\n            this[_h] = this.shadowRoot.querySelector('#default-progress-bar > .mask');\n            this[_j] = this[$defaultPosterElement].getAttribute('aria-label');\n            this[_k] = () => this[$onClick]();\n            this[_l] = (event) => this[$onKeydown](event);\n            this[_m] = (event) => this[$onProgress](event);\n            this[_o] = throttle((progress) => {\n                const parentNode = this[$defaultProgressBarElement].parentNode;\n                requestAnimationFrame(() => {\n                    this[$defaultProgressMaskElement].style.opacity =\n                        `${(1.0 - progress) * PROGRESS_MASK_BASE_OPACITY}`;\n                    this[$defaultProgressBarElement].style.transform =\n                        `scaleX(${progress})`;\n                    if (progress === 0) {\n                        // NOTE(cdata): We remove and re-append the progress bar in this\n                        // condition so that the progress bar does not appear to\n                        // transition backwards from the right when we reset to 0 (or\n                        // otherwise <1) progress after having already reached 1 progress\n                        // previously.\n                        parentNode.removeChild(this[$defaultProgressBarElement]);\n                        parentNode.appendChild(this[$defaultProgressBarElement]);\n                    }\n                    // NOTE(cdata): IE11 does not properly respect the second parameter\n                    // of classList.toggle, which this implementation originally used.\n                    // @see https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11865865/\n                    if (progress === 1.0) {\n                        this[$defaultProgressBarElement].classList.add('hide');\n                    }\n                    else {\n                        this[$defaultProgressBarElement].classList.remove('hide');\n                    }\n                });\n            }, PROGRESS_BAR_UPDATE_THRESHOLD);\n            const ModelViewerElement = self.ModelViewerElement || {};\n            const dracoDecoderLocation = ModelViewerElement.dracoDecoderLocation ||\n                DEFAULT_DRACO_DECODER_LOCATION;\n            CachingGLTFLoader.setDRACODecoderLocation(dracoDecoderLocation);\n        }\n        static set dracoDecoderLocation(value) {\n            CachingGLTFLoader.setDRACODecoderLocation(value);\n        }\n        static get dracoDecoderLocation() {\n            return CachingGLTFLoader.getDRACODecoderLocation();\n        }\n        /**\n         * If provided, the callback will be passed each resource URL before a\n         * request is sent. The callback may return the original URL, or a new URL\n         * to override loading behavior. This behavior can be used to load assets\n         * from .ZIP files, drag-and-drop APIs, and Data URIs.\n         */\n        static mapURLs(callback) {\n            Renderer.singleton.loader[$loader].manager.setURLModifier(callback);\n        }\n        /**\n         * Dismisses the poster, causing the model to load and render if\n         * necessary. This is currently effectively the same as interacting with\n         * the poster via user input.\n         */\n        dismissPoster() {\n            if (this[$sceneIsReady]()) {\n                this[$hidePoster]();\n            }\n            else {\n                this[$posterDismissalSource] = PosterDismissalSource.INTERACTION;\n                this[$updateSource]();\n            }\n        }\n        /**\n         * Returns the model's bounding box dimensions in meters, independent of\n         * turntable rotation.\n         */\n        getDimensions() {\n            return toVector3D(this[$scene].model.size);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            // Fired when a user first clicks the model element. Used to\n            // change the visibility of a poster image, or start loading\n            // a model.\n            this[$posterContainerElement].addEventListener('click', this[$clickHandler]);\n            this[$posterContainerElement].addEventListener('keydown', this[$keydownHandler]);\n            this[$progressTracker].addEventListener('progress', this[$progressHandler]);\n            loadingStatusAnnouncer.registerInstance(this);\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$posterContainerElement].removeEventListener('click', this[$clickHandler]);\n            this[$posterContainerElement].removeEventListener('keydown', this[$keydownHandler]);\n            this[$progressTracker].removeEventListener('progress', this[$progressHandler]);\n            loadingStatusAnnouncer.unregisterInstance(this);\n        }\n        async updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('poster') && this.poster != null) {\n                this[$defaultPosterElement].style.backgroundImage =\n                    `url(${this.poster})`;\n            }\n            if (changedProperties.has('alt')) {\n                this[$defaultPosterElement].setAttribute('aria-label', `${this[$ariaLabel]}. ${this[$ariaLabelCallToAction]}`);\n            }\n            if (changedProperties.has('reveal') || changedProperties.has('loaded')) {\n                if (!this[$sceneIsReady]()) {\n                    this[$updateSource]();\n                }\n            }\n        }\n        [(_a = $modelIsRevealed, _b = $transitioned, _c = $lastReportedProgress, _d = $posterDismissalSource, _e = $posterContainerElement, _f = $defaultPosterElement, _g = $defaultProgressBarElement, _h = $defaultProgressMaskElement, _j = $ariaLabelCallToAction, _k = $clickHandler, _l = $keydownHandler, _m = $progressHandler, _o = $updateProgressBar, $onClick)]() {\n            if (this.reveal === RevealStrategy.MANUAL) {\n                return;\n            }\n            this.dismissPoster();\n        }\n        [$onKeydown](event) {\n            if (this.reveal === RevealStrategy.MANUAL) {\n                return;\n            }\n            switch (event.keyCode) {\n                // NOTE(cdata): Links and buttons can typically be activated with\n                // both spacebar and enter to produce a synthetic click action\n                case SPACE_KEY:\n                case ENTER_KEY:\n                    this.dismissPoster();\n                    break;\n            }\n        }\n        [$onProgress](event) {\n            const progress = event.detail.totalProgress;\n            this[$lastReportedProgress] =\n                Math.max(progress, this[$lastReportedProgress]);\n            if (progress === 1.0) {\n                this[$updateProgressBar].flush();\n                if (this[$sceneIsReady]() &&\n                    (this[$posterDismissalSource] != null ||\n                        this.reveal === RevealStrategy.AUTO)) {\n                    this[$hidePoster]();\n                }\n            }\n            this[$updateProgressBar](progress);\n            this.dispatchEvent(new CustomEvent('progress', { detail: { totalProgress: progress } }));\n        }\n        [$shouldAttemptPreload]() {\n            return !!this.src &&\n                (this[$posterDismissalSource] != null ||\n                    this.loading === LoadingStrategy.EAGER ||\n                    (this.reveal === RevealStrategy.AUTO && this[$isElementInViewport]));\n        }\n        [$sceneIsReady]() {\n            const { src } = this;\n            return !!src && super[$sceneIsReady]() &&\n                this[$lastReportedProgress] === 1.0;\n        }\n        [$showPoster]() {\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            defaultPosterElement.removeAttribute('tabindex');\n            defaultPosterElement.removeAttribute('aria-hidden');\n            posterContainerElement.classList.add('show');\n            const oldVisibility = this.modelIsVisible;\n            this[$modelIsRevealed] = false;\n            this[$announceModelVisibility](oldVisibility);\n            this[$transitioned] = false;\n        }\n        [$hidePoster]() {\n            this[$posterDismissalSource] = null;\n            const posterContainerElement = this[$posterContainerElement];\n            const defaultPosterElement = this[$defaultPosterElement];\n            if (posterContainerElement.classList.contains('show')) {\n                posterContainerElement.classList.remove('show');\n                const oldVisibility = this.modelIsVisible;\n                this[$modelIsRevealed] = true;\n                this[$announceModelVisibility](oldVisibility);\n                // We might need to forward focus to our internal canvas, but that\n                // cannot happen until the poster has completely transitioned away\n                posterContainerElement.addEventListener('transitionend', () => {\n                    requestAnimationFrame(() => {\n                        this[$transitioned] = true;\n                        const root = this.getRootNode();\n                        // If the <model-viewer> is still focused, forward the focus to\n                        // the canvas that has just been revealed\n                        if (root &&\n                            root.activeElement === this) {\n                            this[$userInputElement].focus();\n                        }\n                        // Ensure that the poster is no longer focusable or visible to\n                        // screen readers\n                        defaultPosterElement.setAttribute('aria-hidden', 'true');\n                        defaultPosterElement.tabIndex = -1;\n                        this.dispatchEvent(new CustomEvent('poster-dismissed'));\n                    });\n                }, { once: true });\n            }\n        }\n        [$getModelIsVisible]() {\n            return super[$getModelIsVisible]() && this[$modelIsRevealed];\n        }\n        [$hasTransitioned]() {\n            return super[$hasTransitioned]() && this[$transitioned];\n        }\n        async [$updateSource]() {\n            this[$lastReportedProgress] = 0;\n            if (this[$scene].model.currentGLTF == null || this.src == null ||\n                !this[$shouldAttemptPreload]()) {\n                // Don't show the poster when switching models.\n                this[$showPoster]();\n            }\n            await super[$updateSource]();\n        }\n    }\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"poster\", void 0);\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"reveal\", void 0);\n    __decorate$5([\n        property({ type: String })\n    ], LoadingModelViewerElement.prototype, \"loading\", void 0);\n    return LoadingModelViewerElement;\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * The protocol between 3DOM execution contexts is strictly defined.\n * Only specific types of messages are allowed, and their types are\n * all included in the ThreeDOMMessageType map.\n */\nconst ThreeDOMMessageType = {\n    // === Host -> Scene Graph ===\n    // Used when the host execution context and scene graph execution context\n    // are negotiating a connection\n    HANDSHAKE: 1,\n    // A message that indicates that a custom script is meant to be imported\n    // into the scene graph execution context\n    IMPORT_SCRIPT: 2,\n    // A notification from the host execution context that the main Model has\n    // changed, including the sparse, serialized scene graph of the new Model\n    MODEL_CHANGE: 3,\n    // A notification that confirms or denies a request from the scene graph\n    // context to mutate the scene graph\n    MUTATION_RESULT: 4,\n    // === Scene Graph => Host ===\n    // Notification sent to the host execution context to indicate that the\n    // scene graph execution context has finished initializing\n    CONTEXT_INITIALIZED: 5,\n    // A request from the scene graph execution context to mutate some detail\n    // of the backing host scene graph\n    MUTATE: 6\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $ownerModel = Symbol('ownerModel');\n/**\n * The basic implementation for all 3DOM scene graph participants.\n * Scene graph nodes are distinguished by their \"owner\" Model. All scene\n * graph nodes have an owner Model associated with them except for the\n * sole Model in the scene graph, whose ownerModel property is not defined.\n */\nclass ThreeDOMElement {\n    constructor(kernel) {\n        if (kernel == null) {\n            throw new Error('Illegal constructor');\n        }\n        this[$ownerModel] = kernel.model;\n    }\n    /**\n     * The Model of provenance for this scene graph element, or undefined if\n     * element is itself a Model.\n     */\n    get ownerModel() {\n        return this[$ownerModel];\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst $kernel = Symbol('kernel');\nconst $uri = Symbol('uri');\nconst $name = Symbol('name');\nclass Image extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[$kernel] = kernel;\n        this[$uri] = serialized.uri || null;\n        if (serialized.name != null) {\n            this[$name] = serialized.name;\n        }\n    }\n    get name() {\n        return this[$name];\n    }\n    get type() {\n        return this.uri != null ? 'external' : 'embedded';\n    }\n    get uri() {\n        return this[$uri];\n    }\n    async setURI(uri) {\n        await this[$kernel].mutate(this, 'uri', uri);\n        this[$uri] = uri;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$c, _b$a, _c$4;\nconst $pbrMetallicRoughness = Symbol('pbrMetallicRoughness');\nconst $normalTexture = Symbol('normalTexture');\nconst $occlusionTexture = Symbol('occlusionTexture');\nconst $emissiveTexture = Symbol('emissiveTexture');\nconst $kernel$1 = Symbol('kernel');\nconst $name$1 = Symbol('name');\n/**\n * A Material represents a live material in the backing scene graph. Its\n * primary purpose is to give the user write access to discrete properties\n * (for example, the base color factor) of the backing material.\n */\nclass Material$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$c] = null;\n        this[_b$a] = null;\n        this[_c$4] = null;\n        this[$kernel$1] = kernel;\n        if (serialized.name != null) {\n            this[$name$1] = serialized.name;\n        }\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = serialized;\n        this[$pbrMetallicRoughness] =\n            kernel.deserialize('pbr-metallic-roughness', pbrMetallicRoughness);\n        if (normalTexture != null) {\n            this[$normalTexture] = kernel.deserialize('texture-info', normalTexture);\n        }\n        if (occlusionTexture != null) {\n            this[$occlusionTexture] =\n                kernel.deserialize('texture-info', occlusionTexture);\n        }\n        if (emissiveTexture != null) {\n            this[$emissiveTexture] =\n                kernel.deserialize('texture-info', emissiveTexture);\n        }\n    }\n    /**\n     * The PBR properties that are assigned to this material, if any.\n     */\n    get pbrMetallicRoughness() {\n        return this[$pbrMetallicRoughness];\n    }\n    get normalTexture() {\n        return this[$normalTexture];\n    }\n    get occlusionTexture() {\n        return this[$occlusionTexture];\n    }\n    get emissiveTexture() {\n        return this[$emissiveTexture];\n    }\n    /**\n     * The name of the material. Note that names are optional and not\n     * guaranteed to be unique.\n     */\n    get name() {\n        return this[$name$1];\n    }\n}\n_a$c = $normalTexture, _b$a = $occlusionTexture, _c$4 = $emissiveTexture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$d;\nconst $materials = Symbol('material');\nconst $kernel$2 = Symbol('kernel');\n/**\n * A Model is the root element of a 3DOM scene graph. It is considered the\n * element of provenance for all other elements that participate in the same\n * graph. All other elements in the graph can be accessed in from the Model\n * in some fashion.\n */\nclass Model$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$d] = Object.freeze([]);\n        this[$kernel$2] = kernel;\n        for (const material of serialized.materials) {\n            this[$kernel$2].deserialize('material', material);\n        }\n    }\n    /**\n     * The set of Material elements in the graph, in sparse traversal order.\n     * Note that this set will include any Materials that are not part of the\n     * currently activate scene.\n     *\n     * TODO(#1002): This value needs to be sensitive to scene graph order\n     */\n    get materials() {\n        return this[$kernel$2].getElementsByType('material');\n    }\n    /**\n     * A Model has no owner model; it owns itself.\n     */\n    get ownerModel() {\n        return this;\n    }\n}\n_a$d = $materials;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$e, _b$b;\nconst $kernel$3 = Symbol('kernel');\nconst $baseColorFactor = Symbol('baseColorFactor');\nconst $baseColorTexture = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture = Symbol('metallicRoughnessTexture');\nconst $metallicFactor = Symbol('metallicFactor');\nconst $roughnessFactor = Symbol('roughnessFactor');\n/**\n * PBRMetallicRoughness exposes the PBR properties for a given Material.\n */\nclass PBRMetallicRoughness extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$e] = null;\n        this[_b$b] = null;\n        this[$kernel$3] = kernel;\n        this[$baseColorFactor] = Object.freeze(serialized.baseColorFactor);\n        this[$metallicFactor] = serialized.metallicFactor;\n        this[$roughnessFactor] = serialized.roughnessFactor;\n        const { baseColorTexture, metallicRoughnessTexture } = serialized;\n        if (baseColorTexture != null) {\n            this[$baseColorTexture] =\n                kernel.deserialize('texture-info', baseColorTexture);\n        }\n        if (metallicRoughnessTexture != null) {\n            this[$metallicRoughnessTexture] =\n                kernel.deserialize('texture-info', metallicRoughnessTexture);\n        }\n    }\n    /**\n     * The base color factor of the material in RGBA format.\n     */\n    get baseColorFactor() {\n        return this[$baseColorFactor];\n    }\n    /**\n     * The metalness factor of the material in range [0,1].\n     */\n    get metallicFactor() {\n        return this[$metallicFactor];\n    }\n    /**\n     * The roughness factor of the material in range [0,1].\n     */\n    get roughnessFactor() {\n        return this[$roughnessFactor];\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture];\n    }\n    /**\n     * Set the base color factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setBaseColorFactor(color) {\n        await this[$kernel$3].mutate(this, 'baseColorFactor', color);\n        this[$baseColorFactor] = Object.freeze(color);\n    }\n    /**\n     * Set the metallic factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setMetallicFactor(factor) {\n        await this[$kernel$3].mutate(this, 'metallicFactor', factor);\n        this[$metallicFactor] = factor;\n    }\n    /**\n     * Set the roughness factor of the material.\n     *\n     * @see ../api.ts\n     */\n    async setRoughnessFactor(factor) {\n        await this[$kernel$3].mutate(this, 'roughnessFactor', factor);\n        this[$roughnessFactor] = factor;\n    }\n}\n_a$e = $baseColorTexture, _b$b = $metallicRoughnessTexture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$f, _b$c;\nconst $kernel$4 = Symbol('kernel');\nconst $minFilter = Symbol('minFilter');\nconst $magFilter = Symbol('magFilter');\nconst $wrapS = Symbol('wrapS');\nconst $wrapT = Symbol('wrapT');\nconst $name$2 = Symbol('name');\nclass Sampler extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$f] = null;\n        this[_b$c] = null;\n        this[$kernel$4] = kernel;\n        if (serialized.name != null) {\n            this[$name$2] = serialized.name;\n        }\n        this[$minFilter] = serialized.minFilter || null;\n        this[$magFilter] = serialized.magFilter || null;\n        this[$wrapS] = serialized.wrapS || 10497;\n        this[$wrapT] = serialized.wrapT || 10497;\n    }\n    get name() {\n        return this[$name$2];\n    }\n    get minFilter() {\n        return this[$minFilter];\n    }\n    get magFilter() {\n        return this[$magFilter];\n    }\n    get wrapS() {\n        return this[$wrapS];\n    }\n    get wrapT() {\n        return this[$wrapT];\n    }\n    async setMinFilter(filter) {\n        await this[$kernel$4].mutate(this, 'minFilter', filter);\n        this[$minFilter] = filter;\n    }\n    async setMagFilter(filter) {\n        await this[$kernel$4].mutate(this, 'magFilter', filter);\n        this[$magFilter] = filter;\n    }\n    async setWrapS(mode) {\n        await this[$kernel$4].mutate(this, 'wrapS', mode);\n        this[$wrapS] = mode;\n    }\n    async setWrapT(mode) {\n        await this[$kernel$4].mutate(this, 'wrapT', mode);\n        this[$wrapT] = mode;\n    }\n}\n_a$f = $minFilter, _b$c = $magFilter;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$g;\nconst $kernel$5 = Symbol('kernel');\nconst $texture = Symbol('texture');\nclass TextureInfo extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$g] = null;\n        this[$kernel$5] = kernel;\n        const { texture } = serialized;\n        if (texture != null) {\n            this[$texture] = kernel.deserialize('texture', texture);\n        }\n    }\n    get texture() {\n        return this[$texture];\n    }\n    async setTexture(texture) {\n        await this[$kernel$5].mutate(this, 'texture', texture);\n        this[$texture] = texture;\n    }\n}\n_a$g = $texture;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$h, _b$d;\nconst $kernel$6 = Symbol('kernel');\nconst $source = Symbol('source');\nconst $sampler = Symbol('sampler');\nconst $name$3 = Symbol('name');\nclass Texture$1 extends ThreeDOMElement {\n    constructor(kernel, serialized) {\n        super(kernel);\n        this[_a$h] = null;\n        this[_b$d] = null;\n        this[$kernel$6] = kernel;\n        const { sampler, source, name } = serialized;\n        if (name != null) {\n            this[$name$3] = name;\n        }\n        if (sampler != null) {\n            this[$sampler] = kernel.deserialize('sampler', sampler);\n        }\n        if (source != null) {\n            this[$source] = kernel.deserialize('image', source);\n        }\n    }\n    get name() {\n        return this[$name$3];\n    }\n    get sampler() {\n        return this[$sampler];\n    }\n    get source() {\n        return this[$source];\n    }\n    async setSampler(sampler) {\n        await this[$kernel$6].mutate(this, 'sampler', sampler);\n        this[$sampler] = sampler;\n    }\n    async setSource(image) {\n        await this[$kernel$6].mutate(this, 'source', image);\n        this[$source] = image;\n    }\n}\n_a$h = $source, _b$d = $sampler;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$i, _b$e, _c$5, _d$3, _e$2, _f$2;\nconst ThreeDOMElementMap = {\n    'model': Model$1,\n    'material': Material$1,\n    'pbr-metallic-roughness': PBRMetallicRoughness,\n    'image': Image,\n    'sampler': Sampler,\n    'texture': Texture$1,\n    'texture-info': TextureInfo\n};\nconst $onMessageEvent = Symbol('onMessageEvent');\nconst $port = Symbol('port');\nconst $model = Symbol('model');\nconst $elementsByLocalId = Symbol('elementsByLocalId');\nconst $localIdsByElement = Symbol('localIdsByElement');\nconst $elementsByType = Symbol('elementsByType');\nconst $pendingMutations = Symbol('pendingMutations');\nconst $nextMutationId = Symbol('nextMutationId');\n/**\n * A ModelKernel is the core business logic implementation for a distinct\n * Model that has been exposed to a script execution context. The ModelKernel\n * is an internal detail, and should never be explicitly exposed to users of\n * a Model.\n *\n * The ModelKernel primarily handles deserializing scene graph elements, and\n * communicating mutations from the 3DOM execution context to the host\n * execution context where the backing scene graph lives.\n *\n * A ModelKernel also maintains a comprehensive map of elements by type to\n * assist scene graph elements in querying for their contemporaries.\n */\nclass ModelKernel {\n    constructor(port, serialized) {\n        this[_a$i] = new Map();\n        this[_b$e] = new Map();\n        this[_c$5] = new Map();\n        this[_d$3] = new Map();\n        this[_e$2] = 0;\n        this[_f$2] = (event) => {\n            const { data } = event;\n            switch (data && data.type) {\n                case ThreeDOMMessageType.MUTATION_RESULT: {\n                    const message = data;\n                    const { applied, mutationId } = message;\n                    const pendingMutation = this[$pendingMutations].get(mutationId);\n                    this[$pendingMutations].delete(mutationId);\n                    if (pendingMutation != null) {\n                        applied ? pendingMutation.resolve() : pendingMutation.reject();\n                    }\n                    break;\n                }\n            }\n        };\n        const types = new Array('model', 'material', 'pbr-metallic-roughness', 'sampler', 'image', 'texture', 'texture-info');\n        for (const type of types) {\n            this[$elementsByType].set(type, new Set());\n        }\n        this[$port] = port;\n        this[$port].addEventListener('message', this[$onMessageEvent]);\n        this[$port].start();\n        this[$model] = this.deserialize('model', serialized);\n    }\n    /**\n     * The root scene graph element, a Model, that is the entrypoint for the\n     * entire scene graph that is backed by this kernel.\n     */\n    get model() {\n        return this[$model];\n    }\n    /**\n     * Mutate a property of a property of a given scene graph element. All\n     * direct mutations of the scene graph are considered asynchronous. This\n     * method returns a Promise that resolves when the mutation has been\n     * successfully applied to the backing scene graph, and rejects if the\n     * mutation failed or is otherwise not allowed.\n     *\n     * TODO(#1006): How to validate values?\n     */\n    async mutate(element, property, value) {\n        if (!this[$localIdsByElement].has(element)) {\n            throw new Error('Cannot mutate unknown element');\n        }\n        const id = this[$localIdsByElement].get(element);\n        if (value instanceof ThreeDOMElement) {\n            value = this[$localIdsByElement].get(value);\n        }\n        return new Promise((resolve, reject) => {\n            const mutationId = this[$nextMutationId]++;\n            // TODO(#1006): Validate mutations before sending to host context:\n            this[$port].postMessage({\n                type: ThreeDOMMessageType.MUTATE,\n                id,\n                property,\n                value,\n                mutationId,\n            });\n            // TODO(#1011): Add timeout to reject this mutation:\n            this[$pendingMutations].set(mutationId, {\n                resolve,\n                reject,\n            });\n        });\n    }\n    /**\n     * Deserializes a JSON representation of a scene graph element into a live\n     * element that is backed by this ModelKernel.\n     */\n    deserialize(type, serialized) {\n        const { id } = serialized;\n        // TODO: Add test to ensure that we don't double-deserialize elements\n        if (this[$elementsByLocalId].has(id)) {\n            return this[$elementsByLocalId].get(id);\n        }\n        const ElementConstructor = ThreeDOMElementMap[type];\n        if (ElementConstructor == null) {\n            throw new Error(`Cannot deserialize unknown type: ${type}`);\n        }\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const element = new ElementConstructor(this, serialized);\n        this[$elementsByLocalId].set(id, element);\n        this[$localIdsByElement].set(element, id);\n        // We know that the all accepted types have been pre-populated in the\n        // [$elementsByType] map:\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        this[$elementsByType].get(type).add(element);\n        return element;\n    }\n    /**\n     * Look up all scene graph elements given a type string. Type strings\n     * are lower-cased, hyphenated versions of the constructor names of their\n     * corresponding classes. For example, a query for 'pbr-metallic-roughness'\n     * element types will yield the list of PBRMetallicRoughness elements in\n     * sparse tree order.\n     */\n    getElementsByType(type) {\n        if (!this[$elementsByType].has(type)) {\n            return [];\n        }\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        return Array.from(this[$elementsByType].get(type));\n    }\n    /**\n     * Deactivate the ModelKernel. This has the effect of blocking all future\n     * mutations to the scene graph. Once deactivated, a ModelKernel cannot be\n     * reactivated.\n     *\n     * The ModelKernel should be deactivated before it is disposed of, or else\n     * it will leak in memory.\n     */\n    deactivate() {\n        this[$port].close();\n        this[$port].removeEventListener('message', this[$onMessageEvent]);\n    }\n}\n_a$i = $elementsByLocalId, _b$e = $localIdsByElement, _c$5 = $elementsByType, _d$3 = $pendingMutations, _e$2 = $nextMutationId, _f$2 = $onMessageEvent;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$j;\nconst $modelGraft = Symbol('modelGraft');\nconst $port$1 = Symbol('port');\nconst $onMessageEvent$1 = Symbol('onMessageEvent');\n/**\n * A ModelGraftManipulator is an internal construct intended to consolidate\n * any mutations that operate on the backing scene graph. It can be thought\n * of as a host execution context counterpart to the ModelKernel in the scene\n * graph execution context.\n */\nclass ModelGraftManipulator {\n    constructor(modelGraft, port) {\n        this[_a$j] = async (event) => {\n            const { data } = event;\n            if (data && data.type) {\n                if (data.type === ThreeDOMMessageType.MUTATE) {\n                    let applied = false;\n                    const { mutationId } = data;\n                    try {\n                        await this[$modelGraft].mutate(data.id, data.property, data.value);\n                        applied = true;\n                    }\n                    finally {\n                        this[$port$1].postMessage({ type: ThreeDOMMessageType.MUTATION_RESULT, applied, mutationId });\n                    }\n                }\n            }\n        };\n        this[$modelGraft] = modelGraft;\n        this[$port$1] = port;\n        this[$port$1].addEventListener('message', this[$onMessageEvent$1]);\n        this[$port$1].start();\n    }\n    /**\n     * Clean up internal state so that the ModelGraftManipulator can be properly\n     * garbage collected.\n     */\n    dispose() {\n        this[$port$1].removeEventListener('message', this[$onMessageEvent$1]);\n        this[$port$1].close();\n    }\n}\n_a$j = $onMessageEvent$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Produces a \"locally\" unique ID. This ID is only guaranteed to be unique\n * over the lifetime of the function and in the current execution context.\n */\nconst getLocallyUniqueId = (() => {\n    let id = 0;\n    return () => id++;\n})();\nconst $callbacks = Symbol('callbacks');\nconst $visitMesh = Symbol('visitMesh');\nconst $visitElement = Symbol('visitElement');\nconst $visitNode = Symbol('visitNode');\nconst $visitScene = Symbol('visitScene');\nconst $visitMaterial = Symbol('visitMaterial');\n/**\n * GLTFTreeVisitor implements a deterministic traversal order of a valid,\n * deserialized glTF 2.0 model. It supports selective element visitation via\n * callbacks configured based on element type. For example, to visit all\n * materials in all scenes in a glTF:\n *\n * ```javascript\n * const visitor = new GLTFTreeVisitor({\n *   material: (material, index, hierarchy) => {\n *     // material is a glTF 2.0 Material\n *     // index is the index of material in gltf.materials\n *     // hierarchy includes ancestors of material in the glTF\n *   }\n * });\n *\n * visitor.visit(someInMemoryGLTF, { allScenes: true });\n * ```\n *\n * The traversal order of the visitor is pre-order, depth-first.\n *\n * Note that the traversal order is not guaranteed to correspond to the\n * index of a given element in any way. Rather, traversal order is based\n * on the hierarchical order of the scene graph.\n */\nclass GLTFTreeVisitor {\n    constructor(callbacks) {\n        this[$callbacks] = callbacks;\n    }\n    /**\n     * Visit a given in-memory glTF via the configured callbacks of this visitor.\n     * Optionally, all scenes may be visited (as opposed to just the active one).\n     * Sparse traversal can also be specified, in which case elements that\n     * re-appear multiple times in the scene graph will only be visited once.\n     */\n    visit(gltf, options = {}) {\n        const allScenes = !!options.allScenes;\n        const sparse = !!options.sparse;\n        const scenes = allScenes ?\n            gltf.scenes || [] :\n            (gltf.scenes && gltf.scene != null) ? [gltf.scenes[gltf.scene]] : [];\n        const state = { hierarchy: [], visited: new Set(), sparse, gltf };\n        for (const scene of scenes) {\n            this[$visitScene](gltf.scenes.indexOf(scene), state);\n        }\n    }\n    [$visitElement](index, elementList, state, visit, traverse) {\n        if (elementList == null) {\n            return;\n        }\n        const element = elementList[index];\n        const { sparse, hierarchy, visited } = state;\n        if (element == null) {\n            return;\n        }\n        if (sparse && visited.has(element)) {\n            return;\n        }\n        visited.add(element);\n        hierarchy.push(element);\n        if (visit != null) {\n            visit(element, index, hierarchy);\n        }\n        if (traverse != null) {\n            traverse(element);\n        }\n        hierarchy.pop();\n    }\n    [$visitScene](index, state) {\n        const { gltf } = state;\n        const { scene: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.scenes, state, visit, (scene) => {\n            // A scene is not required to have a list of nodes\n            if (scene.nodes == null) {\n                return;\n            }\n            for (const nodeIndex of scene.nodes) {\n                this[$visitNode](nodeIndex, state);\n            }\n        });\n    }\n    [$visitNode](index, state) {\n        const { gltf } = state;\n        const { node: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.nodes, state, visit, (node) => {\n            if (node.mesh != null) {\n                this[$visitMesh](node.mesh, state);\n            }\n            if (node.children != null) {\n                for (const childNodeIndex of node.children) {\n                    this[$visitNode](childNodeIndex, state);\n                }\n            }\n        });\n    }\n    [$visitMesh](index, state) {\n        const { gltf } = state;\n        const { mesh: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.meshes, state, visit, (mesh) => {\n            for (const primitive of mesh.primitives) {\n                if (primitive.material != null) {\n                    this[$visitMaterial](primitive.material, state);\n                }\n            }\n        });\n    }\n    [$visitMaterial](index, state) {\n        const { gltf } = state;\n        const { material: visit } = this[$callbacks];\n        this[$visitElement](index, gltf.materials, state, visit);\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$k;\nconst $correlatedObjects = Symbol('correlatedObjects');\nconst $sourceObject = Symbol('sourceObject');\nconst $graft = Symbol('graft');\nconst $id = Symbol('id');\n/**\n * A SerializableThreeDOMElement is the common primitive of all scene graph\n * elements that have been facaded in the host execution context. It adds\n * a common interface to these elements in support of convenient\n * serializability.\n */\nclass ThreeDOMElement$1 {\n    constructor(graft, element, correlatedObjects = null) {\n        this[_a$k] = getLocallyUniqueId();\n        this[$graft] = graft;\n        this[$sourceObject] = element;\n        this[$correlatedObjects] = correlatedObjects;\n        graft.adopt(this);\n    }\n    /**\n     * The Model of provenance for this scene graph element.\n     */\n    get ownerModel() {\n        return this[$graft].model;\n    }\n    /**\n     * The unique ID that marks this element. In generally, an ID should only be\n     * considered unique to the element in the context of its scene graph. These\n     * IDs are not guaranteed to be stable across script executions.\n     */\n    get internalID() {\n        return this[$id];\n    }\n    /**\n     * Some (but not all) scene graph elements may have an optional name. The\n     * Object3D.prototype.name property is sometimes auto-generated by Three.js.\n     * We only want to expose a name that is set in the source glTF, so Three.js\n     * generated names are ignored.\n     */\n    get name() {\n        return this[$sourceObject].name || null;\n    }\n    /**\n     * The backing Three.js scene graph construct for this element.\n     */\n    get correlatedObjects() {\n        return this[$correlatedObjects];\n    }\n    /**\n     * The canonical GLTF or GLTFElement represented by this facade.\n     */\n    get sourceObject() {\n        return this[$sourceObject];\n    }\n    /**\n     * Mutate a property of the scene graph element. Returns a promise that\n     * resolves when the mutation has been successfully applied.\n     */\n    mutate(_property, _value) {\n        throw new Error('Mutation not implemented for this element');\n    }\n    /**\n     * Serialize the element in order to share it with a worker context.\n     */\n    toJSON() {\n        const serialized = { id: this[$id] };\n        const { name } = this;\n        if (name != null) {\n            serialized.name = name;\n        }\n        return serialized;\n    }\n}\n_a$k = $id;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$l;\nconst loader = new ImageLoader();\nconst $threeTextures = Symbol('threeTextures');\nconst $bufferViewImages = Symbol('bufferViewImages');\n/**\n * Image facade implementation for Three.js textures\n */\nclass Image$1 extends ThreeDOMElement$1 {\n    constructor(graft, image, correlatedTextures) {\n        super(graft, image, correlatedTextures);\n        this[_a$l] = new WeakMap();\n        if (image.bufferView != null) {\n            for (const texture of correlatedTextures) {\n                this[$bufferViewImages].set(texture, texture.image);\n            }\n        }\n    }\n    get [$threeTextures]() {\n        return this[$correlatedObjects];\n    }\n    async mutate(property, value) {\n        let image = null;\n        if (property !== 'uri') {\n            throw new Error(`Cannot configure property \"${property}\" on Image`);\n        }\n        if (value != null) {\n            image = await new Promise((resolve, reject) => {\n                loader.load(value, resolve, undefined, reject);\n            });\n        }\n        for (const texture of this[$threeTextures]) {\n            // If the URI is set to null but the Image had an associated buffer view\n            // (this would happen if it started out as embedded), then fall back to\n            // the cached object URL created by GLTFLoader:\n            if (image == null &&\n                this.sourceObject.bufferView != null) {\n                texture.image = this[$bufferViewImages].get(texture);\n            }\n            else {\n                texture.image = image;\n            }\n            texture.needsUpdate = true;\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { uri } = this.sourceObject;\n        if (uri != null) {\n            serialized.uri = uri;\n        }\n        return serialized;\n    }\n}\n_a$l = $bufferViewImages;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst isMinFilter = (() => {\n    const minFilterValues = [9728, 9729, 9984, 9985, 9986, 9987];\n    return (value) => minFilterValues.indexOf(value) > -1;\n})();\nconst isMagFilter = (() => {\n    const magFilterValues = [9728, 9729];\n    return (value) => magFilterValues.indexOf(value) > -1;\n})();\nconst isWrapMode = (() => {\n    const wrapModes = [33071, 33648, 10497];\n    return (value) => wrapModes.indexOf(value) > -1;\n})();\nconst isValidSamplerValue = (property, value) => {\n    switch (property) {\n        case 'minFilter':\n            return isMinFilter(value);\n        case 'magFilter':\n            return isMagFilter(value);\n        case 'wrapS':\n        case 'wrapT':\n            return isWrapMode(value);\n        default:\n            throw new Error(`Cannot configure property \"${property}\" on Sampler`);\n    }\n};\n// These defaults represent a convergence of glTF defaults for wrap mode and\n// Three.js defaults for filters. Per glTF 2.0 spec, a renderer may choose its\n// own defaults for filters.\n// @see https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#reference-sampler\n// @see https://threejs.org/docs/#api/en/textures/Texture\nconst defaultValues = {\n    minFilter: 9987,\n    magFilter: 9729,\n    wrapS: 10497,\n    wrapT: 10497,\n};\nconst $threeTextures$1 = Symbol('threeTextures');\n/**\n * Sampler facade implementation for Three.js textures\n */\nclass Sampler$1 extends ThreeDOMElement$1 {\n    get [$threeTextures$1]() {\n        return this[$correlatedObjects];\n    }\n    constructor(graft, sampler, correlatedTextures) {\n        super(graft, sampler, correlatedTextures);\n    }\n    async mutate(property, value) {\n        const sampler = this.sourceObject;\n        if (value != null) {\n            if (isValidSamplerValue(property, value)) {\n                sampler[property] = value;\n                for (const texture of this[$threeTextures$1]) {\n                    texture[property] = value;\n                    texture.needsUpdate = true;\n                }\n            }\n        }\n        else if (property in sampler) {\n            delete sampler[property];\n            for (const texture of this[$threeTextures$1]) {\n                texture[property] = defaultValues[property];\n                texture.needsUpdate = true;\n            }\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { minFilter, magFilter, wrapS, wrapT } = this.sourceObject;\n        if (minFilter != null) {\n            serialized.minFilter = minFilter;\n        }\n        if (magFilter != null) {\n            serialized.magFilter = magFilter;\n        }\n        if (wrapS !== 10497) {\n            serialized.wrapS = wrapS;\n        }\n        if (wrapT !== 10497) {\n            serialized.wrapT = wrapT;\n        }\n        return serialized;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$m, _b$f;\nconst $source$1 = Symbol('source');\nconst $sampler$1 = Symbol('sampler');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Texture$2 extends ThreeDOMElement$1 {\n    constructor(graft, texture, correlatedTextures) {\n        super(graft, texture, correlatedTextures);\n        this[_a$m] = null;\n        this[_b$f] = null;\n        const glTF = graft.correlatedSceneGraph.gltf;\n        const { sampler: samplerIndex, source: imageIndex } = texture;\n        if (samplerIndex != null) {\n            const sampler = glTF.samplers && glTF.samplers[samplerIndex];\n            if (sampler != null) {\n                this[$sampler$1] = new Sampler$1(graft, sampler, correlatedTextures);\n            }\n        }\n        if (imageIndex != null) {\n            const image = glTF.images && glTF.images[imageIndex];\n            if (image != null) {\n                this[$source$1] = new Image$1(graft, image, correlatedTextures);\n            }\n        }\n    }\n    get sampler() {\n        return this[$sampler$1];\n    }\n    get source() {\n        return this[$source$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { sampler, source } = this;\n        if (sampler != null) {\n            serialized.sampler = sampler.toJSON();\n        }\n        if (source != null) {\n            serialized.source = source.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$m = $source$1, _b$f = $sampler$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$n;\nconst $texture$1 = Symbol('texture');\n/**\n * TextureInfo facade implementation for Three.js materials\n */\nclass TextureInfo$1 extends ThreeDOMElement$1 {\n    constructor(graft, textureInfo, correlatedTextures) {\n        super(graft, textureInfo, correlatedTextures);\n        this[_a$n] = null;\n        const glTF = graft.correlatedSceneGraph.gltf;\n        const { index: textureIndex } = textureInfo;\n        const texture = textureIndex != null && glTF.textures != null ?\n            glTF.textures[textureIndex] :\n            null;\n        if (texture != null) {\n            this[$texture$1] = new Texture$2(graft, texture, correlatedTextures);\n        }\n    }\n    get texture() {\n        return this[$texture$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { texture } = this;\n        if (texture != null) {\n            serialized.texture = texture.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$n = $texture$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$o, _b$g;\nconst $threeMaterials = Symbol('threeMaterials');\nconst $baseColorTexture$1 = Symbol('baseColorTexture');\nconst $metallicRoughnessTexture$1 = Symbol('metallicRoughnessTexture');\n/**\n * PBR material properties facade implementation for Three.js materials\n */\nclass PBRMetallicRoughness$1 extends ThreeDOMElement$1 {\n    constructor(graft, pbrMetallicRoughness, correlatedMaterials) {\n        super(graft, pbrMetallicRoughness, correlatedMaterials);\n        this[_a$o] = null;\n        this[_b$g] = null;\n        const { baseColorTexture, metallicRoughnessTexture } = pbrMetallicRoughness;\n        const baseColorTextures = new Set();\n        const metallicRoughnessTextures = new Set();\n        for (const material of correlatedMaterials) {\n            if (baseColorTexture != null && material.map != null) {\n                baseColorTextures.add(material.map);\n            }\n            // NOTE: GLTFLoader users the same texture for metalnessMap and\n            // roughnessMap in this case\n            // @see https://github.com/mrdoob/three.js/blob/b4473c25816df4a09405c7d887d5c418ef47ee76/examples/js/loaders/GLTFLoader.js#L2173-L2174\n            if (metallicRoughnessTexture != null && material.metalnessMap != null) {\n                metallicRoughnessTextures.add(material.metalnessMap);\n            }\n        }\n        if (baseColorTextures.size > 0) {\n            this[$baseColorTexture$1] =\n                new TextureInfo$1(graft, baseColorTexture, baseColorTextures);\n        }\n        if (metallicRoughnessTextures.size > 0) {\n            this[$metallicRoughnessTexture$1] = new TextureInfo$1(graft, metallicRoughnessTexture, metallicRoughnessTextures);\n        }\n    }\n    get [(_a$o = $baseColorTexture$1, _b$g = $metallicRoughnessTexture$1, $threeMaterials)]() {\n        return this[$correlatedObjects];\n    }\n    get baseColorFactor() {\n        return this.sourceObject.baseColorFactor ||\n            [1, 1, 1, 1];\n    }\n    get metallicFactor() {\n        return this.sourceObject.metallicFactor || 0;\n    }\n    get roughnessFactor() {\n        return this.sourceObject.roughnessFactor || 0;\n    }\n    get baseColorTexture() {\n        return this[$baseColorTexture$1];\n    }\n    get metallicRoughnessTexture() {\n        return this[$metallicRoughnessTexture$1];\n    }\n    async mutate(property, value) {\n        if (!['baseColorFactor', 'metallicFactor', 'roughnessFactor'].includes(property)) {\n            throw new Error(`Cannot mutate ${property} on PBRMetallicRoughness`);\n        }\n        switch (property) {\n            case 'baseColorFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.color.fromArray(value);\n                    material.opacity = value[3];\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    if (value === 1 && value === 1 &&\n                        value === 1 && value === 1) {\n                        delete pbrMetallicRoughness.baseColorFactor;\n                    }\n                    else {\n                        pbrMetallicRoughness.baseColorFactor = value;\n                    }\n                }\n                break;\n            case 'metallicFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.metalness = value;\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    pbrMetallicRoughness.metallicFactor = value;\n                }\n                break;\n            case 'roughnessFactor':\n                for (const material of this[$threeMaterials]) {\n                    material.roughness = value;\n                    const pbrMetallicRoughness = this[$sourceObject];\n                    pbrMetallicRoughness.roughnessFactor = value;\n                }\n                break;\n        }\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { baseColorTexture, metallicRoughnessTexture, baseColorFactor, roughnessFactor, metallicFactor } = this;\n        if (baseColorTexture != null) {\n            serialized.baseColorTexture = baseColorTexture.toJSON();\n        }\n        if (baseColorFactor != null) {\n            serialized.baseColorFactor = baseColorFactor;\n        }\n        if (metallicFactor != null) {\n            serialized.metallicFactor = metallicFactor;\n        }\n        if (roughnessFactor != null) {\n            serialized.roughnessFactor = roughnessFactor;\n        }\n        if (metallicRoughnessTexture != null) {\n            serialized.metallicRoughnessTexture = metallicRoughnessTexture.toJSON();\n        }\n        return serialized;\n    }\n}\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$p, _b$h, _c$6, _d$4;\nconst $pbrMetallicRoughness$1 = Symbol('pbrMetallicRoughness');\nconst $normalTexture$1 = Symbol('normalTexture');\nconst $occlusionTexture$1 = Symbol('occlusionTexture');\nconst $emissiveTexture$1 = Symbol('emissiveTexture');\n/**\n * Material facade implementation for Three.js materials\n */\nclass Material$2 extends ThreeDOMElement$1 {\n    constructor(graft, material, correlatedMaterials) {\n        super(graft, material, correlatedMaterials);\n        this[_a$p] = null;\n        this[_b$h] = null;\n        this[_c$6] = null;\n        this[_d$4] = null;\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = material;\n        if (pbrMetallicRoughness != null) {\n            this[$pbrMetallicRoughness$1] = new PBRMetallicRoughness$1(graft, pbrMetallicRoughness, correlatedMaterials);\n        }\n        const normalTextures = new Set();\n        const occlusionTextures = new Set();\n        const emissiveTextures = new Set();\n        for (const material of correlatedMaterials) {\n            const { normalMap, aoMap, emissiveMap } = material;\n            if (normalTexture != null && normalMap != null) {\n                normalTextures.add(normalMap);\n            }\n            if (occlusionTexture != null && aoMap != null) {\n                occlusionTextures.add(aoMap);\n            }\n            if (emissiveTexture != null && emissiveMap != null) {\n                emissiveTextures.add(emissiveMap);\n            }\n        }\n        if (normalTextures.size > 0) {\n            this[$normalTexture$1] =\n                new TextureInfo$1(graft, normalTexture, normalTextures);\n        }\n        if (occlusionTextures.size > 0) {\n            this[$occlusionTexture$1] =\n                new TextureInfo$1(graft, occlusionTexture, occlusionTextures);\n        }\n        if (emissiveTextures.size > 0) {\n            this[$emissiveTexture$1] =\n                new TextureInfo$1(graft, emissiveTexture, emissiveTextures);\n        }\n    }\n    get pbrMetallicRoughness() {\n        return this[$pbrMetallicRoughness$1];\n    }\n    get normalTexture() {\n        return this[$normalTexture$1];\n    }\n    get occlusionTexture() {\n        return this[$occlusionTexture$1];\n    }\n    get emissiveTexture() {\n        return this[$emissiveTexture$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        const { pbrMetallicRoughness, normalTexture, occlusionTexture, emissiveTexture } = this;\n        if (pbrMetallicRoughness != null) {\n            serialized.pbrMetallicRoughness = pbrMetallicRoughness.toJSON();\n        }\n        if (normalTexture != null) {\n            serialized.normalTexture = normalTexture.toJSON();\n        }\n        if (occlusionTexture != null) {\n            serialized.occlusionTexture = occlusionTexture.toJSON();\n        }\n        if (emissiveTexture != null) {\n            serialized.emissiveTexture = emissiveTexture.toJSON();\n        }\n        return serialized;\n    }\n}\n_a$p = $pbrMetallicRoughness$1, _b$h = $normalTexture$1, _c$6 = $occlusionTexture$1, _d$4 = $emissiveTexture$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$q, _b$i;\nconst $modelUri = Symbol('modelUri');\nconst $materials$1 = Symbol('materials');\n/**\n * A Model facades the top-level GLTF object returned by Three.js' GLTFLoader.\n * Currently, the model only bothers itself with the materials in the Three.js\n * scene graph.\n */\nclass Model$2 extends ThreeDOMElement$1 {\n    constructor(graft, modelUri, correlatedSceneGraph) {\n        super(graft, correlatedSceneGraph.gltf);\n        this[_a$q] = '';\n        this[_b$i] = [];\n        this[$modelUri] = modelUri;\n        const visitor = new GLTFTreeVisitor({\n            material: (material) => {\n                this[$materials$1].push(new Material$2(graft, material, correlatedSceneGraph.gltfElementMap.get(material)));\n            }\n        });\n        visitor.visit(correlatedSceneGraph.gltf, { sparse: true });\n    }\n    /**\n     * A flat list of all unique materials found in this scene graph. Materials\n     * are listed in the order they appear during pre-order, depth-first traveral\n     * of the scene graph.\n     *\n     * TODO(#1003): How do we handle non-active scenes?\n     * TODO(#1002): Desctibe and enforce traversal order\n     */\n    get materials() {\n        return this[$materials$1];\n    }\n    toJSON() {\n        const serialized = super.toJSON();\n        serialized.modelUri = this[$modelUri];\n        serialized.materials =\n            this[$materials$1].map((material) => material.toJSON());\n        return serialized;\n    }\n}\n_a$q = $modelUri, _b$i = $materials$1;\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar _a$r, _b$j;\nconst $model$1 = Symbol('model');\nconst $correlatedSceneGraph$1 = Symbol('correlatedSceneGraph');\nconst $elementsByInternalId = Symbol('elementsByInternalId');\nconst $eventDelegate$1 = Symbol('eventDelegate');\n/**\n * ModelGraft\n *\n * This is a coordination primitive between a scene graph as represented by the\n * output for Three.js' GLTFLoader and a counterpart 3DOM facade. Since this is\n * the Three.js-specific implementation of the facade, the input is a GLTF-like\n * object whose keys refer to Three.js-specific constructs (e.g., gltf.scene is\n * a THREE.Scene).\n *\n * When created, the ModelGraft produces a Model that can be traversed and\n * manipulated to mutate the Three.js scene graph synchronously (but\n * indirectly). The benefit of this is that mutations to the Three.js scene can\n * be performed in a Three.js-agnostic fashion that is potentially portable to\n * alternative rendering backends.\n *\n * The scene graph representation produced by the ModelGraft is designed to\n * match the structures described in the glTF 2.0 spec as closely as possible.\n * Where there are deviations, it is usually for the purpose of making\n * synchronization easier, or else for ergonomics. For example, in glTF 2.0, the\n * graph is a series of flat arrays where nodes cross-reference each other by\n * index to represent hierarchy, but in a Model nodes have array members\n * containing refrences to their hierarchical children.\n *\n * An important goal of ModelGraft is to enable a scene in one JavaScript\n * context to be manipulated by script in a remote context, such as a distant\n * worker thread or even a different process. So, every node in the graph\n * is able to be serialized, and the serialized form includes an ID that is\n * locally unique to the ModelGraft instance that the node came from so that\n * the remote context can refer back to it. A ModelGraft can be thought of as\n * the host execution context counterpart to the ModelKernel in the scene graph\n * execution context.\n */\nclass ModelGraft {\n    constructor(modelUri, correlatedSceneGraph) {\n        // NOTE(cdata): This eventDelegate hack is a quick trick to let us get the\n        // EventTarget interface without implementing or requiring a full polyfill. We\n        // should remove this once EventTarget is inheritable everywhere.\n        this[_a$r] = document.createDocumentFragment();\n        // NOTE(cdata): We declare each of these methods independently here so that we\n        // can inherit the correct types from EventTarget's interface. Maybe there is\n        // a better way to do this dynamically so that we don't repeat ourselves?\n        this.addEventListener = (...args) => this[$eventDelegate$1].addEventListener(...args);\n        this.removeEventListener = (...args) => this[$eventDelegate$1].removeEventListener(...args);\n        this.dispatchEvent = (...args) => this[$eventDelegate$1].dispatchEvent(...args);\n        this[_b$j] = new Map();\n        this[$correlatedSceneGraph$1] = correlatedSceneGraph;\n        this[$model$1] = new Model$2(this, modelUri, correlatedSceneGraph);\n    }\n    get correlatedSceneGraph() {\n        return this[$correlatedSceneGraph$1];\n    }\n    get model() {\n        return this[$model$1];\n    }\n    getElementByInternalId(id) {\n        const element = this[$elementsByInternalId].get(id);\n        if (element == null) {\n            return null;\n        }\n        return element;\n    }\n    adopt(element) {\n        this[$elementsByInternalId].set(element.internalID, element);\n    }\n    async mutate(id, property, value) {\n        const element = this.getElementByInternalId(id);\n        await element.mutate(property, value);\n        this.dispatchEvent(new CustomEvent('mutation', { detail: { element: element } }));\n    }\n}\n_a$r = $eventDelegate$1, _b$j = $elementsByInternalId;\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\nvar WEBGL_CONSTANTS = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tTRIANGLE_STRIP: 0x0005,\n\tTRIANGLE_FAN: 0x0006,\n\n\tUNSIGNED_BYTE: 0x1401,\n\tUNSIGNED_SHORT: 0x1403,\n\tFLOAT: 0x1406,\n\tUNSIGNED_INT: 0x1405,\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nvar THREE_TO_WEBGL = {};\n\nTHREE_TO_WEBGL[ NearestFilter ] = WEBGL_CONSTANTS.NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapNearestFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ NearestMipmapLinearFilter ] = WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;\nTHREE_TO_WEBGL[ LinearFilter ] = WEBGL_CONSTANTS.LINEAR;\nTHREE_TO_WEBGL[ LinearMipmapNearestFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;\nTHREE_TO_WEBGL[ LinearMipmapLinearFilter ] = WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;\n\nTHREE_TO_WEBGL[ ClampToEdgeWrapping ] = WEBGL_CONSTANTS.CLAMP_TO_EDGE;\nTHREE_TO_WEBGL[ RepeatWrapping ] = WEBGL_CONSTANTS.REPEAT;\nTHREE_TO_WEBGL[ MirroredRepeatWrapping ] = WEBGL_CONSTANTS.MIRRORED_REPEAT;\n\nvar PATH_PROPERTIES = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\n//------------------------------------------------------------------------------\n// GLTF Exporter\n//------------------------------------------------------------------------------\nvar GLTFExporter = function () {};\n\nGLTFExporter.prototype = {\n\n\tconstructor: GLTFExporter,\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tparse: function ( input, onDone, options ) {\n\n\t\tvar DEFAULT_OPTIONS = {\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\ttruncateDrawRange: true,\n\t\t\tembedImages: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tforcePowerOfTwoTextures: false,\n\t\t\tincludeCustomExtensions: false\n\t\t};\n\n\t\toptions = Object.assign( {}, DEFAULT_OPTIONS, options );\n\n\t\tif ( options.animations.length > 0 ) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\toptions.trs = true;\n\n\t\t}\n\n\t\tvar outputJSON = {\n\n\t\t\tasset: {\n\n\t\t\t\tversion: \"2.0\",\n\t\t\t\tgenerator: \"GLTFExporter\"\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar byteOffset = 0;\n\t\tvar buffers = [];\n\t\tvar pending = [];\n\t\tvar nodeMap = new Map();\n\t\tvar skins = [];\n\t\tvar extensionsUsed = {};\n\t\tvar cachedData = {\n\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map()\n\n\t\t};\n\n\t\tvar cachedCanvas;\n\n\t\tvar uids = new Map();\n\t\tvar uid = 0;\n\n\t\t/**\n\t\t * Assign and return a temporal unique id for an object\n\t\t * especially which doesn't have .uuid\n\t\t * @param  {Object} object\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction getUID( object ) {\n\n\t\t\tif ( ! uids.has( object ) ) uids.set( object, uid ++ );\n\n\t\t\treturn uids.get( object );\n\n\t\t}\n\n\t\t/**\n\t\t * Compare two arrays\n\t\t * @param  {Array} array1 Array 1 to compare\n\t\t * @param  {Array} array2 Array 2 to compare\n\t\t * @return {Boolean}        Returns true if both arrays are equal\n\t\t */\n\t\tfunction equalArray( array1, array2 ) {\n\n\t\t\treturn ( array1.length === array2.length ) && array1.every( function ( element, index ) {\n\n\t\t\t\treturn element === array2[ index ];\n\n\t\t\t} );\n\n\t\t}\n\n\t\t/**\n\t\t * Converts a string to an ArrayBuffer.\n\t\t * @param  {string} text\n\t\t * @return {ArrayBuffer}\n\t\t */\n\t\tfunction stringToArrayBuffer( text ) {\n\n\t\t\tif ( window.TextEncoder !== undefined ) {\n\n\t\t\t\treturn new TextEncoder().encode( text ).buffer;\n\n\t\t\t}\n\n\t\t\tvar array = new Uint8Array( new ArrayBuffer( text.length ) );\n\n\t\t\tfor ( var i = 0, il = text.length; i < il; i ++ ) {\n\n\t\t\t\tvar value = text.charCodeAt( i );\n\n\t\t\t\t// Replacing multi-byte character with space(0x20).\n\t\t\t\tarray[ i ] = value > 0xFF ? 0x20 : value;\n\n\t\t\t}\n\n\t\t\treturn array.buffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the min and max vectors from the given attribute\n\t\t * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n\t\t * @param  {Integer} start\n\t\t * @param  {Integer} count\n\t\t * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n\t\t */\n\t\tfunction getMinMax( attribute, start, count ) {\n\n\t\t\tvar output = {\n\n\t\t\t\tmin: new Array( attribute.itemSize ).fill( Number.POSITIVE_INFINITY ),\n\t\t\t\tmax: new Array( attribute.itemSize ).fill( Number.NEGATIVE_INFINITY )\n\n\t\t\t};\n\n\t\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\tvar value = attribute.array[ i * attribute.itemSize + a ];\n\t\t\t\t\toutput.min[ a ] = Math.min( output.min[ a ], value );\n\t\t\t\t\toutput.max[ a ] = Math.max( output.max[ a ], value );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if image size is POT.\n\t\t *\n\t\t * @param {Image} image The image to be checked.\n\t\t * @returns {Boolean} Returns true if image size is POT.\n\t\t *\n\t\t */\n\t\tfunction isPowerOfTwo( image ) {\n\n\t\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if normal attribute values are normalized.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {Boolean}\n\t\t *\n\t\t */\n\t\tfunction isNormalizedNormalAttribute( normal ) {\n\n\t\t\tif ( cachedData.attributesNormalized.has( normal ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = normal.count; i < il; i ++ ) {\n\n\t\t\t\t// 0.0005 is from glTF-validator\n\t\t\t\tif ( Math.abs( v.fromArray( normal.array, i * 3 ).length() - 1.0 ) > 0.0005 ) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates normalized normal buffer attribute.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {BufferAttribute}\n\t\t *\n\t\t */\n\t\tfunction createNormalizedNormalAttribute( normal ) {\n\n\t\t\tif ( cachedData.attributesNormalized.has( normal ) ) {\n\n\t\t\t\treturn cachedData.attributesNormalized.get( normal );\n\n\t\t\t}\n\n\t\t\tvar attribute = normal.clone();\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor ( var i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\t\tv.fromArray( attribute.array, i * 3 );\n\n\t\t\t\tif ( v.x === 0 && v.y === 0 && v.z === 0 ) {\n\n\t\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\t\tv.setX( 1.0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.normalize();\n\n\t\t\t\t}\n\n\t\t\t\tv.toArray( attribute.array, i * 3 );\n\n\t\t\t}\n\n\t\t\tcachedData.attributesNormalized.set( normal, attribute );\n\n\t\t\treturn attribute;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n\t\t * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n\t\t *\n\t\t * @param {Integer} bufferSize The size the original buffer.\n\t\t * @returns {Integer} new buffer size with required padding.\n\t\t *\n\t\t */\n\t\tfunction getPaddedBufferSize( bufferSize ) {\n\n\t\t\treturn Math.ceil( bufferSize / 4 ) * 4;\n\n\t\t}\n\n\t\t/**\n\t\t * Returns a buffer aligned to 4-byte boundary.\n\t\t *\n\t\t * @param {ArrayBuffer} arrayBuffer Buffer to pad\n\t\t * @param {Integer} paddingByte (Optional)\n\t\t * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n\t\t */\n\t\tfunction getPaddedArrayBuffer( arrayBuffer, paddingByte ) {\n\n\t\t\tpaddingByte = paddingByte || 0;\n\n\t\t\tvar paddedLength = getPaddedBufferSize( arrayBuffer.byteLength );\n\n\t\t\tif ( paddedLength !== arrayBuffer.byteLength ) {\n\n\t\t\t\tvar array = new Uint8Array( paddedLength );\n\t\t\t\tarray.set( new Uint8Array( arrayBuffer ) );\n\n\t\t\t\tif ( paddingByte !== 0 ) {\n\n\t\t\t\t\tfor ( var i = arrayBuffer.byteLength; i < paddedLength; i ++ ) {\n\n\t\t\t\t\t\tarray[ i ] = paddingByte;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn array.buffer;\n\n\t\t\t}\n\n\t\t\treturn arrayBuffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Serializes a userData.\n\t\t *\n\t\t * @param {THREE.Object3D|THREE.Material} object\n\t\t * @param {Object} gltfProperty\n\t\t */\n\t\tfunction serializeUserData( object, gltfProperty ) {\n\n\t\t\tif ( Object.keys( object.userData ).length === 0 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar json = JSON.parse( JSON.stringify( object.userData ) );\n\n\t\t\t\tif ( options.includeCustomExtensions && json.gltfExtensions ) {\n\n\t\t\t\t\tif ( gltfProperty.extensions === undefined ) {\n\n\t\t\t\t\t\tgltfProperty.extensions = {};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var extensionName in json.gltfExtensions ) {\n\n\t\t\t\t\t\tgltfProperty.extensions[ extensionName ] = json.gltfExtensions[ extensionName ];\n\t\t\t\t\t\textensionsUsed[ extensionName ] = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( json ).length > 0 ) {\n\n\t\t\t\t\tgltfProperty.extras = json;\n\n\t\t\t\t}\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message );\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Applies a texture transform, if present, to the map definition. Requires\n\t\t * the KHR_texture_transform extension.\n\t\t */\n\t\tfunction applyTextureTransform( mapDef, texture ) {\n\n\t\t\tvar didTransform = false;\n\t\t\tvar transformDef = {};\n\n\t\t\tif ( texture.offset.x !== 0 || texture.offset.y !== 0 ) {\n\n\t\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.rotation !== 0 ) {\n\n\t\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( texture.repeat.x !== 1 || texture.repeat.y !== 1 ) {\n\n\t\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif ( didTransform ) {\n\n\t\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\t\tmapDef.extensions[ 'KHR_texture_transform' ] = transformDef;\n\t\t\t\textensionsUsed[ 'KHR_texture_transform' ] = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Process a buffer to append to the default one.\n\t\t * @param  {ArrayBuffer} buffer\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction processBuffer( buffer ) {\n\n\t\t\tif ( ! outputJSON.buffers ) {\n\n\t\t\t\toutputJSON.buffers = [ { byteLength: 0 } ];\n\n\t\t\t}\n\n\t\t\t// All buffers are merged before export.\n\t\t\tbuffers.push( buffer );\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView\n\t\t * @param  {BufferAttribute} attribute\n\t\t * @param  {number} componentType\n\t\t * @param  {number} start\n\t\t * @param  {number} count\n\t\t * @param  {number} target (Optional) Target usage of the BufferView\n\t\t * @return {Object}\n\t\t */\n\t\tfunction processBufferView( attribute, componentType, start, count, target ) {\n\n\t\t\tif ( ! outputJSON.bufferViews ) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\t\tvar componentSize;\n\n\t\t\tif ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t} else {\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t\t}\n\n\t\t\tvar byteLength = getPaddedBufferSize( count * attribute.itemSize * componentSize );\n\t\t\tvar dataView = new DataView( new ArrayBuffer( byteLength ) );\n\t\t\tvar offset = 0;\n\n\t\t\tfor ( var i = start; i < start + count; i ++ ) {\n\n\t\t\t\tfor ( var a = 0; a < attribute.itemSize; a ++ ) {\n\n\t\t\t\t\tvar value;\n\n\t\t\t\t\tif ( attribute.itemSize > 4 ) {\n\n\t\t\t\t\t\t // no support for interleaved data for itemSize > 4\n\n\t\t\t\t\t\tvalue = attribute.array[ i * attribute.itemSize + a ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( a === 0 ) value = attribute.getX( i );\n\t\t\t\t\t\telse if ( a === 1 ) value = attribute.getY( i );\n\t\t\t\t\t\telse if ( a === 2 ) value = attribute.getZ( i );\n\t\t\t\t\t\telse if ( a === 3 ) value = attribute.getW( i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( componentType === WEBGL_CONSTANTS.FLOAT ) {\n\n\t\t\t\t\t\tdataView.setFloat32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_INT ) {\n\n\t\t\t\t\t\tdataView.setUint32( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_SHORT ) {\n\n\t\t\t\t\t\tdataView.setUint16( offset, value, true );\n\n\t\t\t\t\t} else if ( componentType === WEBGL_CONSTANTS.UNSIGNED_BYTE ) {\n\n\t\t\t\t\t\tdataView.setUint8( offset, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += componentSize;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar gltfBufferView = {\n\n\t\t\t\tbuffer: processBuffer( dataView.buffer ),\n\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\tbyteLength: byteLength\n\n\t\t\t};\n\n\t\t\tif ( target !== undefined ) gltfBufferView.target = target;\n\n\t\t\tif ( target === WEBGL_CONSTANTS.ARRAY_BUFFER ) {\n\n\t\t\t\t// Only define byteStride for vertex attributes.\n\t\t\t\tgltfBufferView.byteStride = attribute.itemSize * componentSize;\n\n\t\t\t}\n\n\t\t\tbyteOffset += byteLength;\n\n\t\t\toutputJSON.bufferViews.push( gltfBufferView );\n\n\t\t\t// @TODO Merge bufferViews where possible.\n\t\t\tvar output = {\n\n\t\t\t\tid: outputJSON.bufferViews.length - 1,\n\t\t\t\tbyteLength: 0\n\n\t\t\t};\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView from an image Blob.\n\t\t * @param {Blob} blob\n\t\t * @return {Promise<Integer>}\n\t\t */\n\t\tfunction processBufferViewImage( blob ) {\n\n\t\t\tif ( ! outputJSON.bufferViews ) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tvar buffer = getPaddedArrayBuffer( reader.result );\n\n\t\t\t\t\tvar bufferView = {\n\t\t\t\t\t\tbuffer: processBuffer( buffer ),\n\t\t\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t\t};\n\n\t\t\t\t\tbyteOffset += buffer.byteLength;\n\n\t\t\t\t\toutputJSON.bufferViews.push( bufferView );\n\n\t\t\t\t\tresolve( outputJSON.bufferViews.length - 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\t/**\n\t\t * Process attribute to generate an accessor\n\t\t * @param  {BufferAttribute} attribute Attribute to process\n\t\t * @param  {BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t\t * @param  {Integer} start (Optional)\n\t\t * @param  {Integer} count (Optional)\n\t\t * @return {Integer}           Index of the processed accessor on the \"accessors\" array\n\t\t */\n\t\tfunction processAccessor( attribute, geometry, start, count ) {\n\n\t\t\tvar types = {\n\n\t\t\t\t1: 'SCALAR',\n\t\t\t\t2: 'VEC2',\n\t\t\t\t3: 'VEC3',\n\t\t\t\t4: 'VEC4',\n\t\t\t\t16: 'MAT4'\n\n\t\t\t};\n\n\t\t\tvar componentType;\n\n\t\t\t// Detect the component type of the attribute array (float, uint or ushort)\n\t\t\tif ( attribute.array.constructor === Float32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.FLOAT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint32Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_INT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint16Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_SHORT;\n\n\t\t\t} else if ( attribute.array.constructor === Uint8Array ) {\n\n\t\t\t\tcomponentType = WEBGL_CONSTANTS.UNSIGNED_BYTE;\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Unsupported bufferAttribute component type.' );\n\n\t\t\t}\n\n\t\t\tif ( start === undefined ) start = 0;\n\t\t\tif ( count === undefined ) count = attribute.count;\n\n\t\t\t// @TODO Indexed buffer geometry with drawRange not supported yet\n\t\t\tif ( options.truncateDrawRange && geometry !== undefined && geometry.index === null ) {\n\n\t\t\t\tvar end = start + count;\n\t\t\t\tvar end2 = geometry.drawRange.count === Infinity\n\t\t\t\t\t? attribute.count\n\t\t\t\t\t: geometry.drawRange.start + geometry.drawRange.count;\n\n\t\t\t\tstart = Math.max( start, geometry.drawRange.start );\n\t\t\t\tcount = Math.min( end, end2 ) - start;\n\n\t\t\t\tif ( count < 0 ) count = 0;\n\n\t\t\t}\n\n\t\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\t\tif ( count === 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar minMax = getMinMax( attribute, start, count );\n\n\t\t\tvar bufferViewTarget;\n\n\t\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t\t// animation samplers, target must not be set.\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tbufferViewTarget = attribute === geometry.index ? WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER : WEBGL_CONSTANTS.ARRAY_BUFFER;\n\n\t\t\t}\n\n\t\t\tvar bufferView = processBufferView( attribute, componentType, start, count, bufferViewTarget );\n\n\t\t\tvar gltfAccessor = {\n\n\t\t\t\tbufferView: bufferView.id,\n\t\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\t\tcomponentType: componentType,\n\t\t\t\tcount: count,\n\t\t\t\tmax: minMax.max,\n\t\t\t\tmin: minMax.min,\n\t\t\t\ttype: types[ attribute.itemSize ]\n\n\t\t\t};\n\n\t\t\tif ( attribute.normalized === true ) {\n\n\t\t\t\tgltfAccessor.normalized = true;\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.accessors ) {\n\n\t\t\t\toutputJSON.accessors = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.accessors.push( gltfAccessor );\n\n\t\t\treturn outputJSON.accessors.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process image\n\t\t * @param  {Image} image to process\n\t\t * @param  {Integer} format of the image (e.g. THREE.RGBFormat, RGBAFormat etc)\n\t\t * @param  {Boolean} flipY before writing out the image\n\t\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t\t */\n\t\tfunction processImage( image, format, flipY ) {\n\n\t\t\tif ( ! cachedData.images.has( image ) ) {\n\n\t\t\t\tcachedData.images.set( image, {} );\n\n\t\t\t}\n\n\t\t\tvar cachedImages = cachedData.images.get( image );\n\t\t\tvar mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n\t\t\tvar key = mimeType + \":flipY/\" + flipY.toString();\n\n\t\t\tif ( cachedImages[ key ] !== undefined ) {\n\n\t\t\t\treturn cachedImages[ key ];\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.images ) {\n\n\t\t\t\toutputJSON.images = [];\n\n\t\t\t}\n\n\t\t\tvar gltfImage = { mimeType: mimeType };\n\n\t\t\tif ( options.embedImages ) {\n\n\t\t\t\tvar canvas = cachedCanvas = cachedCanvas || document.createElement( 'canvas' );\n\n\t\t\t\tcanvas.width = Math.min( image.width, options.maxTextureSize );\n\t\t\t\tcanvas.height = Math.min( image.height, options.maxTextureSize );\n\n\t\t\t\tif ( options.forcePowerOfTwoTextures && ! isPowerOfTwo( canvas ) ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Resized non-power-of-two image.', image );\n\n\t\t\t\t\tcanvas.width = MathUtils.floorPowerOfTwo( canvas.width );\n\t\t\t\t\tcanvas.height = MathUtils.floorPowerOfTwo( canvas.height );\n\n\t\t\t\t}\n\n\t\t\t\tvar ctx = canvas.getContext( '2d' );\n\n\t\t\t\tif ( flipY === true ) {\n\n\t\t\t\t\tctx.translate( 0, canvas.height );\n\t\t\t\t\tctx.scale( 1, - 1 );\n\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t\tpending.push( new Promise( function ( resolve ) {\n\n\t\t\t\t\t\tcanvas.toBlob( function ( blob ) {\n\n\t\t\t\t\t\t\tprocessBufferViewImage( blob ).then( function ( bufferViewIndex ) {\n\n\t\t\t\t\t\t\t\tgltfImage.bufferView = bufferViewIndex;\n\n\t\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t}, mimeType );\n\n\t\t\t\t\t} ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgltfImage.uri = canvas.toDataURL( mimeType );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tgltfImage.uri = image.src;\n\n\t\t\t}\n\n\t\t\toutputJSON.images.push( gltfImage );\n\n\t\t\tvar index = outputJSON.images.length - 1;\n\t\t\tcachedImages[ key ] = index;\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process sampler\n\t\t * @param  {Texture} map Texture to process\n\t\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t\t */\n\t\tfunction processSampler( map ) {\n\n\t\t\tif ( ! outputJSON.samplers ) {\n\n\t\t\t\toutputJSON.samplers = [];\n\n\t\t\t}\n\n\t\t\tvar gltfSampler = {\n\n\t\t\t\tmagFilter: THREE_TO_WEBGL[ map.magFilter ],\n\t\t\t\tminFilter: THREE_TO_WEBGL[ map.minFilter ],\n\t\t\t\twrapS: THREE_TO_WEBGL[ map.wrapS ],\n\t\t\t\twrapT: THREE_TO_WEBGL[ map.wrapT ]\n\n\t\t\t};\n\n\t\t\toutputJSON.samplers.push( gltfSampler );\n\n\t\t\treturn outputJSON.samplers.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process texture\n\t\t * @param  {Texture} map Map to process\n\t\t * @return {Integer}     Index of the processed texture in the \"textures\" array\n\t\t */\n\t\tfunction processTexture( map ) {\n\n\t\t\tif ( cachedData.textures.has( map ) ) {\n\n\t\t\t\treturn cachedData.textures.get( map );\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.textures ) {\n\n\t\t\t\toutputJSON.textures = [];\n\n\t\t\t}\n\n\t\t\tvar gltfTexture = {\n\n\t\t\t\tsampler: processSampler( map ),\n\t\t\t\tsource: processImage( map.image, map.format, map.flipY )\n\n\t\t\t};\n\n\t\t\tif ( map.name ) {\n\n\t\t\t\tgltfTexture.name = map.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.textures.push( gltfTexture );\n\n\t\t\tvar index = outputJSON.textures.length - 1;\n\t\t\tcachedData.textures.set( map, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process material\n\t\t * @param  {THREE.Material} material Material to process\n\t\t * @return {Integer}      Index of the processed material in the \"materials\" array\n\t\t */\n\t\tfunction processMaterial( material ) {\n\n\t\t\tif ( cachedData.materials.has( material ) ) {\n\n\t\t\t\treturn cachedData.materials.get( material );\n\n\t\t\t}\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: THREE.ShaderMaterial not supported.' );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( ! outputJSON.materials ) {\n\n\t\t\t\toutputJSON.materials = [];\n\n\t\t\t}\n\n\t\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\t\tvar gltfMaterial = {\n\n\t\t\t\tpbrMetallicRoughness: {}\n\n\t\t\t};\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_unlit: {} };\n\n\t\t\t\textensionsUsed[ 'KHR_materials_unlit' ] = true;\n\n\t\t\t} else if ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_pbrSpecularGlossiness: {} };\n\n\t\t\t\textensionsUsed[ 'KHR_materials_pbrSpecularGlossiness' ] = true;\n\n\t\t\t} else if ( ! material.isMeshStandardMaterial ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.' );\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorFactor\n\t\t\tvar color = material.color.toArray().concat( [ material.opacity ] );\n\n\t\t\tif ( ! equalArray( color, [ 1, 1, 1, 1 ] ) ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshStandardMaterial ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t\t} else if ( material.isMeshBasicMaterial ) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t\t\t} else {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness diffuse, specular and glossiness factor\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\tif ( gltfMaterial.pbrMetallicRoughness.baseColorFactor ) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor = gltfMaterial.pbrMetallicRoughness.baseColorFactor;\n\n\t\t\t\t}\n\n\t\t\t\tvar specularFactor = [ 1, 1, 1 ];\n\t\t\t\tmaterial.specular.toArray( specularFactor, 0 );\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor = specularFactor;\n\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor = material.glossiness;\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\t\tif ( material.metalnessMap || material.roughnessMap ) {\n\n\t\t\t\tif ( material.metalnessMap === material.roughnessMap ) {\n\n\t\t\t\t\tvar metalRoughMapDef = { index: processTexture( material.metalnessMap ) };\n\t\t\t\t\tapplyTextureTransform( metalRoughMapDef, material.metalnessMap );\n\t\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\t\t\tif ( material.map ) {\n\n\t\t\t\tvar baseColorMapDef = { index: processTexture( material.map ) };\n\t\t\t\tapplyTextureTransform( baseColorMapDef, material.map );\n\n\t\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture = baseColorMapDef;\n\n\t\t\t\t}\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness specular map\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial && material.specularMap ) {\n\n\t\t\t\tvar specularMapDef = { index: processTexture( material.specularMap ) };\n\t\t\t\tapplyTextureTransform( specularMapDef, material.specularMap );\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture = specularMapDef;\n\n\t\t\t}\n\n\t\t\tif ( material.emissive ) {\n\n\t\t\t\t// emissiveFactor\n\t\t\t\tvar emissive = material.emissive.clone().multiplyScalar( material.emissiveIntensity ).toArray();\n\n\t\t\t\tif ( ! equalArray( emissive, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tgltfMaterial.emissiveFactor = emissive;\n\n\t\t\t\t}\n\n\t\t\t\t// emissiveTexture\n\t\t\t\tif ( material.emissiveMap ) {\n\n\t\t\t\t\tvar emissiveMapDef = { index: processTexture( material.emissiveMap ) };\n\t\t\t\t\tapplyTextureTransform( emissiveMapDef, material.emissiveMap );\n\t\t\t\t\tgltfMaterial.emissiveTexture = emissiveMapDef;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normalTexture\n\t\t\tif ( material.normalMap ) {\n\n\t\t\t\tvar normalMapDef = { index: processTexture( material.normalMap ) };\n\n\t\t\t\tif ( material.normalScale && material.normalScale.x !== - 1 ) {\n\n\t\t\t\t\tif ( material.normalScale.x !== material.normalScale.y ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform( normalMapDef, material.normalMap );\n\n\t\t\t\tgltfMaterial.normalTexture = normalMapDef;\n\n\t\t\t}\n\n\t\t\t// occlusionTexture\n\t\t\tif ( material.aoMap ) {\n\n\t\t\t\tvar occlusionMapDef = {\n\t\t\t\t\tindex: processTexture( material.aoMap ),\n\t\t\t\t\ttexCoord: 1\n\t\t\t\t};\n\n\t\t\t\tif ( material.aoMapIntensity !== 1.0 ) {\n\n\t\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform( occlusionMapDef, material.aoMap );\n\n\t\t\t\tgltfMaterial.occlusionTexture = occlusionMapDef;\n\n\t\t\t}\n\n\t\t\t// alphaMode\n\t\t\tif ( material.transparent ) {\n\n\t\t\t\tgltfMaterial.alphaMode = 'BLEND';\n\n\t\t\t} else {\n\n\t\t\t\tif ( material.alphaTest > 0.0 ) {\n\n\t\t\t\t\tgltfMaterial.alphaMode = 'MASK';\n\t\t\t\t\tgltfMaterial.alphaCutoff = material.alphaTest;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// doubleSided\n\t\t\tif ( material.side === DoubleSide ) {\n\n\t\t\t\tgltfMaterial.doubleSided = true;\n\n\t\t\t}\n\n\t\t\tif ( material.name !== '' ) {\n\n\t\t\t\tgltfMaterial.name = material.name;\n\n\t\t\t}\n\n\t\t\tserializeUserData( material, gltfMaterial );\n\n\t\t\toutputJSON.materials.push( gltfMaterial );\n\n\t\t\tvar index = outputJSON.materials.length - 1;\n\t\t\tcachedData.materials.set( material, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process mesh\n\t\t * @param  {THREE.Mesh} mesh Mesh to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"meshes\" array\n\t\t */\n\t\tfunction processMesh( mesh ) {\n\n\t\t\tvar meshCacheKeyParts = [ mesh.geometry.uuid ];\n\t\t\tif ( Array.isArray( mesh.material ) ) {\n\n\t\t\t\tfor ( var i = 0, l = mesh.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tmeshCacheKeyParts.push( mesh.material[ i ].uuid\t);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmeshCacheKeyParts.push( mesh.material.uuid );\n\n\t\t\t}\n\n\t\t\tvar meshCacheKey = meshCacheKeyParts.join( ':' );\n\t\t\tif ( cachedData.meshes.has( meshCacheKey ) ) {\n\n\t\t\t\treturn cachedData.meshes.get( meshCacheKey );\n\n\t\t\t}\n\n\t\t\tvar geometry = mesh.geometry;\n\n\t\t\tvar mode;\n\n\t\t\t// Use the correct mode\n\t\t\tif ( mesh.isLineSegments ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINES;\n\n\t\t\t} else if ( mesh.isLineLoop ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_LOOP;\n\n\t\t\t} else if ( mesh.isLine ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.LINE_STRIP;\n\n\t\t\t} else if ( mesh.isPoints ) {\n\n\t\t\t\tmode = WEBGL_CONSTANTS.POINTS;\n\n\t\t\t} else {\n\n\t\t\t\tmode = mesh.material.wireframe ? WEBGL_CONSTANTS.LINES : WEBGL_CONSTANTS.TRIANGLES;\n\n\t\t\t}\n\n\t\t\tif ( ! geometry.isBufferGeometry ) {\n\n\t\t\t\tconsole.warn( 'GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.' );\n\t\t\t\tgeometry = new BufferGeometry().setFromObject( mesh );\n\n\t\t\t}\n\n\t\t\tvar gltfMesh = {};\n\n\t\t\tvar attributes = {};\n\t\t\tvar primitives = [];\n\t\t\tvar targets = [];\n\n\t\t\t// Conversion between attributes names in threejs and gltf spec\n\t\t\tvar nameConversion = {\n\n\t\t\t\tuv: 'TEXCOORD_0',\n\t\t\t\tuv2: 'TEXCOORD_1',\n\t\t\t\tcolor: 'COLOR_0',\n\t\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\t\tskinIndex: 'JOINTS_0'\n\n\t\t\t};\n\n\t\t\tvar originalNormal = geometry.getAttribute( 'normal' );\n\n\t\t\tif ( originalNormal !== undefined && ! isNormalizedNormalAttribute( originalNormal ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.' );\n\n\t\t\t\tgeometry.setAttribute( 'normal', createNormalizedNormalAttribute( originalNormal ) );\n\n\t\t\t}\n\n\t\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t\t// For every attribute create an accessor\n\t\t\tvar modifiedAttribute = null;\n\t\t\tfor ( var attributeName in geometry.attributes ) {\n\n\t\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\t\tif ( attributeName.substr( 0, 5 ) === 'morph' ) continue;\n\n\t\t\t\tvar attribute = geometry.attributes[ attributeName ];\n\t\t\t\tattributeName = nameConversion[ attributeName ] || attributeName.toUpperCase();\n\n\t\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\t\tvar validVertexAttributes =\n\t\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\t\t\t\tif ( ! validVertexAttributes.test( attributeName ) ) {\n\n\t\t\t\t\tattributeName = '_' + attributeName;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedData.attributes.has( getUID( attribute ) ) ) {\n\n\t\t\t\t\tattributes[ attributeName ] = cachedData.attributes.get( getUID( attribute ) );\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\t\tmodifiedAttribute = null;\n\t\t\t\tvar array = attribute.array;\n\t\t\t\tif ( attributeName === 'JOINTS_0' &&\n\t\t\t\t\t! ( array instanceof Uint16Array ) &&\n\t\t\t\t\t! ( array instanceof Uint8Array ) ) {\n\n\t\t\t\t\tconsole.warn( 'GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.' );\n\t\t\t\t\tmodifiedAttribute = new BufferAttribute( new Uint16Array( array ), attribute.itemSize, attribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tvar accessor = processAccessor( modifiedAttribute || attribute, geometry );\n\t\t\t\tif ( accessor !== null ) {\n\n\t\t\t\t\tattributes[ attributeName ] = accessor;\n\t\t\t\t\tcachedData.attributes.set( getUID( attribute ), accessor );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( originalNormal !== undefined ) geometry.setAttribute( 'normal', originalNormal );\n\n\t\t\t// Skip if no exportable attributes found\n\t\t\tif ( Object.keys( attributes ).length === 0 ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Morph targets\n\t\t\tif ( mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0 ) {\n\n\t\t\t\tvar weights = [];\n\t\t\t\tvar targetNames = [];\n\t\t\t\tvar reverseDictionary = {};\n\n\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) {\n\n\t\t\t\t\tfor ( var key in mesh.morphTargetDictionary ) {\n\n\t\t\t\t\t\treverseDictionary[ mesh.morphTargetDictionary[ key ] ] = key;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0; i < mesh.morphTargetInfluences.length; ++ i ) {\n\n\t\t\t\t\tvar target = {};\n\n\t\t\t\t\tvar warned = false;\n\n\t\t\t\t\tfor ( var attributeName in geometry.morphAttributes ) {\n\n\t\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\t\tif ( attributeName !== 'position' && attributeName !== 'normal' ) {\n\n\t\t\t\t\t\t\tif ( ! warned ) {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'GLTFExporter: Only POSITION and NORMAL morph are supported.' );\n\t\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar attribute = geometry.morphAttributes[ attributeName ][ i ];\n\t\t\t\t\t\tvar gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\t\tvar baseAttribute = geometry.attributes[ attributeName ];\n\n\t\t\t\t\t\tif ( cachedData.attributes.has( getUID( attribute ) ) ) {\n\n\t\t\t\t\t\t\ttarget[ gltfAttributeName ] = cachedData.attributes.get( getUID( attribute ) );\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\t\tvar relativeAttribute = attribute.clone();\n\n\t\t\t\t\t\tif ( ! geometry.morphTargetsRelative ) {\n\n\t\t\t\t\t\t\tfor ( var j = 0, jl = attribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\t\trelativeAttribute.setXYZ(\n\t\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\t\tattribute.getX( j ) - baseAttribute.getX( j ),\n\t\t\t\t\t\t\t\t\tattribute.getY( j ) - baseAttribute.getY( j ),\n\t\t\t\t\t\t\t\t\tattribute.getZ( j ) - baseAttribute.getZ( j )\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[ gltfAttributeName ] = processAccessor( relativeAttribute, geometry );\n\t\t\t\t\t\tcachedData.attributes.set( getUID( baseAttribute ), target[ gltfAttributeName ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push( target );\n\n\t\t\t\t\tweights.push( mesh.morphTargetInfluences[ i ] );\n\t\t\t\t\tif ( mesh.morphTargetDictionary !== undefined ) targetNames.push( reverseDictionary[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tgltfMesh.weights = weights;\n\n\t\t\t\tif ( targetNames.length > 0 ) {\n\n\t\t\t\t\tgltfMesh.extras = {};\n\t\t\t\t\tgltfMesh.extras.targetNames = targetNames;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar isMultiMaterial = Array.isArray( mesh.material );\n\n\t\t\tif ( isMultiMaterial && geometry.groups.length === 0 ) return null;\n\n\t\t\tvar materials = isMultiMaterial ? mesh.material : [ mesh.material ];\n\t\t\tvar groups = isMultiMaterial ? geometry.groups : [ { materialIndex: 0, start: undefined, count: undefined } ];\n\n\t\t\tfor ( var i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\tvar primitive = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tattributes: attributes,\n\t\t\t\t};\n\n\t\t\t\tserializeUserData( geometry, primitive );\n\n\t\t\t\tif ( targets.length > 0 ) primitive.targets = targets;\n\n\t\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t\tvar cacheKey = getUID( geometry.index );\n\n\t\t\t\t\tif ( groups[ i ].start !== undefined || groups[ i ].count !== undefined ) {\n\n\t\t\t\t\t\tcacheKey += ':' + groups[ i ].start + ':' + groups[ i ].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cachedData.attributes.has( cacheKey ) ) {\n\n\t\t\t\t\t\tprimitive.indices = cachedData.attributes.get( cacheKey );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprimitive.indices = processAccessor( geometry.index, geometry, groups[ i ].start, groups[ i ].count );\n\t\t\t\t\t\tcachedData.attributes.set( cacheKey, primitive.indices );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.indices === null ) delete primitive.indices;\n\n\t\t\t\t}\n\n\t\t\t\tvar material = processMaterial( materials[ groups[ i ].materialIndex ] );\n\n\t\t\t\tif ( material !== null ) {\n\n\t\t\t\t\tprimitive.material = material;\n\n\t\t\t\t}\n\n\t\t\t\tprimitives.push( primitive );\n\n\t\t\t}\n\n\t\t\tgltfMesh.primitives = primitives;\n\n\t\t\tif ( ! outputJSON.meshes ) {\n\n\t\t\t\toutputJSON.meshes = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.meshes.push( gltfMesh );\n\n\t\t\tvar index = outputJSON.meshes.length - 1;\n\t\t\tcachedData.meshes.set( meshCacheKey, index );\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process camera\n\t\t * @param  {THREE.Camera} camera Camera to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t\t */\n\t\tfunction processCamera( camera ) {\n\n\t\t\tif ( ! outputJSON.cameras ) {\n\n\t\t\t\toutputJSON.cameras = [];\n\n\t\t\t}\n\n\t\t\tvar isOrtho = camera.isOrthographicCamera;\n\n\t\t\tvar gltfCamera = {\n\n\t\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\n\t\t\t};\n\n\t\t\tif ( isOrtho ) {\n\n\t\t\t\tgltfCamera.orthographic = {\n\n\t\t\t\t\txmag: camera.right * 2,\n\t\t\t\t\tymag: camera.top * 2,\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tgltfCamera.perspective = {\n\n\t\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\t\tyfov: MathUtils.degToRad( camera.fov ),\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tif ( camera.name !== '' ) {\n\n\t\t\t\tgltfCamera.name = camera.type;\n\n\t\t\t}\n\n\t\t\toutputJSON.cameras.push( gltfCamera );\n\n\t\t\treturn outputJSON.cameras.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates glTF animation entry from AnimationClip object.\n\t\t *\n\t\t * Status:\n\t\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t\t *\n\t\t * @param {THREE.AnimationClip} clip\n\t\t * @param {THREE.Object3D} root\n\t\t * @return {number}\n\t\t */\n\t\tfunction processAnimation( clip, root ) {\n\n\t\t\tif ( ! outputJSON.animations ) {\n\n\t\t\t\toutputJSON.animations = [];\n\n\t\t\t}\n\n\t\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks( clip.clone(), root );\n\n\t\t\tvar tracks = clip.tracks;\n\t\t\tvar channels = [];\n\t\t\tvar samplers = [];\n\n\t\t\tfor ( var i = 0; i < tracks.length; ++ i ) {\n\n\t\t\t\tvar track = tracks[ i ];\n\t\t\t\tvar trackBinding = PropertyBinding.parseTrackName( track.name );\n\t\t\t\tvar trackNode = PropertyBinding.findNode( root, trackBinding.nodeName );\n\t\t\t\tvar trackProperty = PATH_PROPERTIES[ trackBinding.propertyName ];\n\n\t\t\t\tif ( trackBinding.objectName === 'bones' ) {\n\n\t\t\t\t\tif ( trackNode.isSkinnedMesh === true ) {\n\n\t\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName( trackBinding.objectIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! trackNode || ! trackProperty ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Could not export animation track \"%s\".', track.name );\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tvar inputItemSize = 1;\n\t\t\t\tvar outputItemSize = track.values.length / track.times.length;\n\n\t\t\t\tif ( trackProperty === PATH_PROPERTIES.morphTargetInfluences ) {\n\n\t\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t\t}\n\n\t\t\t\tvar interpolation;\n\n\t\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t\t// valid value from .getInterpolation().\n\t\t\t\tif ( track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true ) {\n\n\t\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\t\toutputItemSize /= 3;\n\n\t\t\t\t} else if ( track.getInterpolation() === InterpolateDiscrete ) {\n\n\t\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t\t}\n\n\t\t\t\tsamplers.push( {\n\n\t\t\t\t\tinput: processAccessor( new BufferAttribute( track.times, inputItemSize ) ),\n\t\t\t\t\toutput: processAccessor( new BufferAttribute( track.values, outputItemSize ) ),\n\t\t\t\t\tinterpolation: interpolation\n\n\t\t\t\t} );\n\n\t\t\t\tchannels.push( {\n\n\t\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tnode: nodeMap.get( trackNode ),\n\t\t\t\t\t\tpath: trackProperty\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\toutputJSON.animations.push( {\n\n\t\t\t\tname: clip.name || 'clip_' + outputJSON.animations.length,\n\t\t\t\tsamplers: samplers,\n\t\t\t\tchannels: channels\n\n\t\t\t} );\n\n\t\t\treturn outputJSON.animations.length - 1;\n\n\t\t}\n\n\t\tfunction processSkin( object ) {\n\n\t\t\tvar node = outputJSON.nodes[ nodeMap.get( object ) ];\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton === undefined ) return null;\n\n\t\t\tvar rootJoint = object.skeleton.bones[ 0 ];\n\n\t\t\tif ( rootJoint === undefined ) return null;\n\n\t\t\tvar joints = [];\n\t\t\tvar inverseBindMatrices = new Float32Array( skeleton.bones.length * 16 );\n\n\t\t\tfor ( var i = 0; i < skeleton.bones.length; ++ i ) {\n\n\t\t\t\tjoints.push( nodeMap.get( skeleton.bones[ i ] ) );\n\n\t\t\t\tskeleton.boneInverses[ i ].toArray( inverseBindMatrices, i * 16 );\n\n\t\t\t}\n\n\t\t\tif ( outputJSON.skins === undefined ) {\n\n\t\t\t\toutputJSON.skins = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.skins.push( {\n\n\t\t\t\tinverseBindMatrices: processAccessor( new BufferAttribute( inverseBindMatrices, 16 ) ),\n\t\t\t\tjoints: joints,\n\t\t\t\tskeleton: nodeMap.get( rootJoint )\n\n\t\t\t} );\n\n\t\t\tvar skinIndex = node.skin = outputJSON.skins.length - 1;\n\n\t\t\treturn skinIndex;\n\n\t\t}\n\n\t\tfunction processLight( light ) {\n\n\t\t\tvar lightDef = {};\n\n\t\t\tif ( light.name ) lightDef.name = light.name;\n\n\t\t\tlightDef.color = light.color.toArray();\n\n\t\t\tlightDef.intensity = light.intensity;\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tlightDef.type = 'directional';\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tlightDef.type = 'point';\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tlightDef.type = 'spot';\n\t\t\t\tif ( light.distance > 0 ) lightDef.range = light.distance;\n\t\t\t\tlightDef.spot = {};\n\t\t\t\tlightDef.spot.innerConeAngle = ( light.penumbra - 1.0 ) * light.angle * - 1.0;\n\t\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t\t}\n\n\t\t\tif ( light.decay !== undefined && light.decay !== 2 ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t\t+ 'and expects light.decay=2.' );\n\n\t\t\t}\n\n\t\t\tif ( light.target\n\t\t\t\t\t&& ( light.target.parent !== light\n\t\t\t\t\t || light.target.position.x !== 0\n\t\t\t\t\t || light.target.position.y !== 0\n\t\t\t\t\t || light.target.position.z !== - 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.' );\n\n\t\t\t}\n\n\t\t\tvar lights = outputJSON.extensions[ 'KHR_lights_punctual' ].lights;\n\t\t\tlights.push( lightDef );\n\t\t\treturn lights.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Object3D node\n\t\t * @param  {THREE.Object3D} node Object3D to processNode\n\t\t * @return {Integer}      Index of the node in the nodes list\n\t\t */\n\t\tfunction processNode( object ) {\n\n\t\t\tif ( ! outputJSON.nodes ) {\n\n\t\t\t\toutputJSON.nodes = [];\n\n\t\t\t}\n\n\t\t\tvar gltfNode = {};\n\n\t\t\tif ( options.trs ) {\n\n\t\t\t\tvar rotation = object.quaternion.toArray();\n\t\t\t\tvar position = object.position.toArray();\n\t\t\t\tvar scale = object.scale.toArray();\n\n\t\t\t\tif ( ! equalArray( rotation, [ 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.rotation = rotation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( position, [ 0, 0, 0 ] ) ) {\n\n\t\t\t\t\tgltfNode.translation = position;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( scale, [ 1, 1, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.scale = scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( object.matrixAutoUpdate ) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! equalArray( object.matrix.elements, [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1 ] ) ) {\n\n\t\t\t\t\tgltfNode.matrix = object.matrix.elements;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\t\tif ( object.name !== '' ) {\n\n\t\t\t\tgltfNode.name = String( object.name );\n\n\t\t\t}\n\n\t\t\tserializeUserData( object, gltfNode );\n\n\t\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tvar mesh = processMesh( object );\n\n\t\t\t\tif ( mesh !== null ) {\n\n\t\t\t\t\tgltfNode.mesh = mesh;\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isCamera ) {\n\n\t\t\t\tgltfNode.camera = processCamera( object );\n\n\t\t\t} else if ( object.isDirectionalLight || object.isPointLight || object.isSpotLight ) {\n\n\t\t\t\tif ( ! extensionsUsed[ 'KHR_lights_punctual' ] ) {\n\n\t\t\t\t\toutputJSON.extensions = outputJSON.extensions || {};\n\t\t\t\t\toutputJSON.extensions[ 'KHR_lights_punctual' ] = { lights: [] };\n\t\t\t\t\textensionsUsed[ 'KHR_lights_punctual' ] = true;\n\n\t\t\t\t}\n\n\t\t\t\tgltfNode.extensions = gltfNode.extensions || {};\n\t\t\t\tgltfNode.extensions[ 'KHR_lights_punctual' ] = { light: processLight( object ) };\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Only directional, point, and spot lights are supported.', object );\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\tskins.push( object );\n\n\t\t\t}\n\n\t\t\tif ( object.children.length > 0 ) {\n\n\t\t\t\tvar children = [];\n\n\t\t\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar child = object.children[ i ];\n\n\t\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\t\tvar node = processNode( child );\n\n\t\t\t\t\t\tif ( node !== null ) {\n\n\t\t\t\t\t\t\tchildren.push( node );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( children.length > 0 ) {\n\n\t\t\t\t\tgltfNode.children = children;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\toutputJSON.nodes.push( gltfNode );\n\n\t\t\tvar nodeIndex = outputJSON.nodes.length - 1;\n\t\t\tnodeMap.set( object, nodeIndex );\n\n\t\t\treturn nodeIndex;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Scene\n\t\t * @param  {Scene} node Scene to process\n\t\t */\n\t\tfunction processScene( scene ) {\n\n\t\t\tif ( ! outputJSON.scenes ) {\n\n\t\t\t\toutputJSON.scenes = [];\n\t\t\t\toutputJSON.scene = 0;\n\n\t\t\t}\n\n\t\t\tvar gltfScene = {};\n\n\t\t\tif ( scene.name !== '' ) {\n\n\t\t\t\tgltfScene.name = scene.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.scenes.push( gltfScene );\n\n\t\t\tvar nodes = [];\n\n\t\t\tfor ( var i = 0, l = scene.children.length; i < l; i ++ ) {\n\n\t\t\t\tvar child = scene.children[ i ];\n\n\t\t\t\tif ( child.visible || options.onlyVisible === false ) {\n\n\t\t\t\t\tvar node = processNode( child );\n\n\t\t\t\t\tif ( node !== null ) {\n\n\t\t\t\t\t\tnodes.push( node );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodes.length > 0 ) {\n\n\t\t\t\tgltfScene.nodes = nodes;\n\n\t\t\t}\n\n\t\t\tserializeUserData( scene, gltfScene );\n\n\t\t}\n\n\t\t/**\n\t\t * Creates a Scene to hold a list of objects and parse it\n\t\t * @param  {Array} objects List of objects to process\n\t\t */\n\t\tfunction processObjects( objects ) {\n\n\t\t\tvar scene = new Scene();\n\t\t\tscene.name = 'AuxScene';\n\n\t\t\tfor ( var i = 0; i < objects.length; i ++ ) {\n\n\t\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\t\tscene.children.push( objects[ i ] );\n\n\t\t\t}\n\n\t\t\tprocessScene( scene );\n\n\t\t}\n\n\t\tfunction processInput( input ) {\n\n\t\t\tinput = input instanceof Array ? input : [ input ];\n\n\t\t\tvar objectsWithoutScene = [];\n\n\t\t\tfor ( var i = 0; i < input.length; i ++ ) {\n\n\t\t\t\tif ( input[ i ] instanceof Scene ) {\n\n\t\t\t\t\tprocessScene( input[ i ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobjectsWithoutScene.push( input[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( objectsWithoutScene.length > 0 ) {\n\n\t\t\t\tprocessObjects( objectsWithoutScene );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < skins.length; ++ i ) {\n\n\t\t\t\tprocessSkin( skins[ i ] );\n\n\t\t\t}\n\n\t\t\tfor ( var i = 0; i < options.animations.length; ++ i ) {\n\n\t\t\t\tprocessAnimation( options.animations[ i ], input[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tprocessInput( input );\n\n\t\tPromise.all( pending ).then( function () {\n\n\t\t\t// Merge buffers.\n\t\t\tvar blob = new Blob( buffers, { type: 'application/octet-stream' } );\n\n\t\t\t// Declare extensions.\n\t\t\tvar extensionsUsedList = Object.keys( extensionsUsed );\n\t\t\tif ( extensionsUsedList.length > 0 ) outputJSON.extensionsUsed = extensionsUsedList;\n\n\t\t\t// Update bytelength of the single buffer.\n\t\t\tif ( outputJSON.buffers && outputJSON.buffers.length > 0 ) outputJSON.buffers[ 0 ].byteLength = blob.size;\n\n\t\t\tif ( options.binary === true ) {\n\n\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\t\tvar GLB_HEADER_BYTES = 12;\n\t\t\t\tvar GLB_HEADER_MAGIC = 0x46546C67;\n\t\t\t\tvar GLB_VERSION = 2;\n\n\t\t\t\tvar GLB_CHUNK_PREFIX_BYTES = 8;\n\t\t\t\tvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\n\t\t\t\tvar GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer( blob );\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t// Binary chunk.\n\t\t\t\t\tvar binaryChunk = getPaddedArrayBuffer( reader.result );\n\t\t\t\t\tvar binaryChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\tbinaryChunkPrefix.setUint32( 0, binaryChunk.byteLength, true );\n\t\t\t\t\tbinaryChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_BIN, true );\n\n\t\t\t\t\t// JSON chunk.\n\t\t\t\t\tvar jsonChunk = getPaddedArrayBuffer( stringToArrayBuffer( JSON.stringify( outputJSON ) ), 0x20 );\n\t\t\t\t\tvar jsonChunkPrefix = new DataView( new ArrayBuffer( GLB_CHUNK_PREFIX_BYTES ) );\n\t\t\t\t\tjsonChunkPrefix.setUint32( 0, jsonChunk.byteLength, true );\n\t\t\t\t\tjsonChunkPrefix.setUint32( 4, GLB_CHUNK_TYPE_JSON, true );\n\n\t\t\t\t\t// GLB header.\n\t\t\t\t\tvar header = new ArrayBuffer( GLB_HEADER_BYTES );\n\t\t\t\t\tvar headerView = new DataView( header );\n\t\t\t\t\theaderView.setUint32( 0, GLB_HEADER_MAGIC, true );\n\t\t\t\t\theaderView.setUint32( 4, GLB_VERSION, true );\n\t\t\t\t\tvar totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\t\theaderView.setUint32( 8, totalByteLength, true );\n\n\t\t\t\t\tvar glbBlob = new Blob( [\n\t\t\t\t\t\theader,\n\t\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\t\tjsonChunk,\n\t\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\t\tbinaryChunk\n\t\t\t\t\t], { type: 'application/octet-stream' } );\n\n\t\t\t\t\tvar glbReader = new window.FileReader();\n\t\t\t\t\tglbReader.readAsArrayBuffer( glbBlob );\n\t\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\t\tonDone( glbReader.result );\n\n\t\t\t\t\t};\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tif ( outputJSON.buffers && outputJSON.buffers.length > 0 ) {\n\n\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\treader.readAsDataURL( blob );\n\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\tvar base64data = reader.result;\n\t\t\t\t\t\toutputJSON.buffers[ 0 ].uri = base64data;\n\t\t\t\t\t\tonDone( outputJSON );\n\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonDone( outputJSON );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n};\n\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function ( track, time ) {\n\n\t\tvar tolerance = 0.001; // 1ms\n\t\tvar valueSize = track.getValueSize();\n\n\t\tvar times = new track.TimeBufferType( track.times.length + 1 );\n\t\tvar values = new track.ValueBufferType( track.values.length + valueSize );\n\t\tvar interpolant = track.createInterpolant( new track.ValueBufferType( valueSize ) );\n\n\t\tvar index;\n\n\t\tif ( track.times.length === 0 ) {\n\n\t\t\ttimes[ 0 ] = time;\n\n\t\t\tfor ( var i = 0; i < valueSize; i ++ ) {\n\n\t\t\t\tvalues[ i ] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time < track.times[ 0 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ 0 ] - time ) < tolerance ) return 0;\n\n\t\t\ttimes[ 0 ] = time;\n\t\t\ttimes.set( track.times, 1 );\n\n\t\t\tvalues.set( interpolant.evaluate( time ), 0 );\n\t\t\tvalues.set( track.values, valueSize );\n\n\t\t\tindex = 0;\n\n\t\t} else if ( time > track.times[ track.times.length - 1 ] ) {\n\n\t\t\tif ( Math.abs( track.times[ track.times.length - 1 ] - time ) < tolerance ) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[ times.length - 1 ] = time;\n\t\t\ttimes.set( track.times, 0 );\n\n\t\t\tvalues.set( track.values, 0 );\n\t\t\tvalues.set( interpolant.evaluate( time ), track.values.length );\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor ( var i = 0; i < track.times.length; i ++ ) {\n\n\t\t\t\tif ( Math.abs( track.times[ i ] - time ) < tolerance ) return i;\n\n\t\t\t\tif ( track.times[ i ] < time && track.times[ i + 1 ] > time ) {\n\n\t\t\t\t\ttimes.set( track.times.slice( 0, i + 1 ), 0 );\n\t\t\t\t\ttimes[ i + 1 ] = time;\n\t\t\t\t\ttimes.set( track.times.slice( i + 1 ), i + 2 );\n\n\t\t\t\t\tvalues.set( track.values.slice( 0, ( i + 1 ) * valueSize ), 0 );\n\t\t\t\t\tvalues.set( interpolant.evaluate( time ), ( i + 1 ) * valueSize );\n\t\t\t\t\tvalues.set( track.values.slice( ( i + 1 ) * valueSize ), ( i + 2 ) * valueSize );\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function ( clip, root ) {\n\n\t\tvar tracks = [];\n\t\tvar mergedTracks = {};\n\t\tvar sourceTracks = clip.tracks;\n\n\t\tfor ( var i = 0; i < sourceTracks.length; ++ i ) {\n\n\t\t\tvar sourceTrack = sourceTracks[ i ];\n\t\t\tvar sourceTrackBinding = PropertyBinding.parseTrackName( sourceTrack.name );\n\t\t\tvar sourceTrackNode = PropertyBinding.findNode( root, sourceTrackBinding.nodeName );\n\n\t\t\tif ( sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined ) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push( sourceTrack );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear ) {\n\n\t\t\t\tif ( sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.' );\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn( 'THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.' );\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation( InterpolateLinear );\n\n\t\t\t}\n\n\t\t\tvar targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tvar targetIndex = sourceTrackNode.morphTargetDictionary[ sourceTrackBinding.propertyIndex ];\n\n\t\t\tif ( targetIndex === undefined ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex );\n\n\t\t\t}\n\n\t\t\tvar mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif ( mergedTracks[ sourceTrackNode.uuid ] === undefined ) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tvar values = new mergedTrack.ValueBufferType( targetCount * mergedTrack.times.length );\n\n\t\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\t\tvalues[ j * targetCount + targetIndex ] = mergedTrack.values[ j ];\n\n\t\t\t\t}\n\n\t\t\t\t// We need to take into consideration the intended target node\n\t\t\t\t// of our original un-merged morphTarget animation.\n\t\t\t\tmergedTrack.name = sourceTrackBinding.nodeName + '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[ sourceTrackNode.uuid ] = mergedTrack;\n\t\t\t\ttracks.push( mergedTrack );\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar sourceInterpolant = sourceTrack.createInterpolant( new sourceTrack.ValueBufferType( 1 ) );\n\n\t\t\tmergedTrack = mergedTracks[ sourceTrackNode.uuid ];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor ( var j = 0; j < mergedTrack.times.length; j ++ ) {\n\n\t\t\t\tmergedTrack.values[ j * targetCount + targetIndex ] = sourceInterpolant.evaluate( mergedTrack.times[ j ] );\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor ( var j = 0; j < sourceTrack.times.length; j ++ ) {\n\n\t\t\t\tvar keyframeIndex = this.insertKeyframe( mergedTrack, sourceTrack.times[ j ] );\n\t\t\t\tmergedTrack.values[ keyframeIndex * targetCount + targetIndex ] = sourceTrack.values[ j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\n/* @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$6 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nconst $updateThreeSide = Symbol('updateThreeSide');\nconst $currentGLTF$1 = Symbol('currentGLTF');\nconst $modelGraft$1 = Symbol('modelGraft');\nconst $mainPort = Symbol('mainPort');\nconst $threePort = Symbol('threePort');\nconst $manipulator = Symbol('manipulator');\nconst $modelKernel = Symbol('modelKernel');\nconst $onModelChange = Symbol('onModelChange');\nconst $onModelGraftMutation = Symbol('onModelGraftMutation');\n/**\n * SceneGraphMixin manages a `<model-viewer>` integration with the 3DOM library\n * in order to support operations on the <model-viewer> scene graph.\n */\nconst SceneGraphMixin = (ModelViewerElement) => {\n    var _a, _b, _c, _d, _e, _f, _g;\n    var _h;\n    class SceneGraphModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this[_h] = null;\n            this[_a] = null;\n            this[_b] = null;\n            this[_c] = null;\n            this[_d] = null;\n            this[_e] = null;\n            this[_f] = (event) => {\n                const { data } = event;\n                if (data && data.type === ThreeDOMMessageType.MODEL_CHANGE) {\n                    const serialized = data.model;\n                    const currentKernel = this[$modelKernel];\n                    if (currentKernel != null) {\n                        currentKernel.deactivate();\n                    }\n                    else if (serialized == null) {\n                        // Do not proceed if transitioning from null to null\n                        return;\n                    }\n                    if (serialized != null) {\n                        this[$modelKernel] = new ModelKernel(data.port, serialized);\n                    }\n                    else {\n                        this[$modelKernel] = null;\n                    }\n                    this.dispatchEvent(new CustomEvent('scene-graph-ready', { detail: { url: serialized ? serialized.modelUri : null } }));\n                }\n            };\n            this[_g] = (_event) => {\n                this[$needsRender]();\n            };\n        }\n        // ThreeDOM implementation:\n        /** @export */\n        get model() {\n            const kernel = this[$modelKernel];\n            return kernel ? kernel.model : undefined;\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            const { port1, port2 } = new MessageChannel();\n            port1.start();\n            port2.start();\n            this[$mainPort] = port1;\n            this[$threePort] = port2;\n            this[$mainPort].onmessage = this[$onModelChange];\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this[$mainPort].close();\n            this[$threePort].close();\n            this[$mainPort] = null;\n            this[$threePort] = null;\n            if (this[$manipulator] != null) {\n                this[$manipulator].dispose();\n            }\n            if (this[$modelKernel] != null) {\n                this[$modelKernel].deactivate();\n            }\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has($modelGraft$1)) {\n                const oldModelGraft = changedProperties.get($modelGraft$1);\n                if (oldModelGraft != null) {\n                    oldModelGraft.removeEventListener('mutation', this[$onModelGraftMutation]);\n                }\n                const modelGraft = this[$modelGraft$1];\n                if (modelGraft != null) {\n                    modelGraft.addEventListener('mutation', this[$onModelGraftMutation]);\n                }\n            }\n        }\n        [(_h = $modelGraft$1, _a = $currentGLTF$1, _b = $mainPort, _c = $threePort, _d = $manipulator, _e = $modelKernel, $onModelLoad)]() {\n            super[$onModelLoad]();\n            this[$updateThreeSide]();\n        }\n        [$updateThreeSide]() {\n            // Three.js side (will eventually move to worker)\n            const scene = this[$scene];\n            const { model } = scene;\n            const { currentGLTF } = model;\n            let modelGraft = null;\n            let manipulator = null;\n            if (currentGLTF != null) {\n                const { correlatedSceneGraph } = currentGLTF;\n                const currentModelGraft = this[$modelGraft$1];\n                const currentManipulator = this[$manipulator];\n                if (correlatedSceneGraph != null) {\n                    if (currentManipulator != null) {\n                        currentManipulator.dispose();\n                    }\n                    if (currentModelGraft != null && currentGLTF === this[$currentGLTF$1]) {\n                        return;\n                    }\n                    modelGraft = new ModelGraft(model.url || '', correlatedSceneGraph);\n                    let channel = null;\n                    if (modelGraft != null && modelGraft.model != null) {\n                        channel = new MessageChannel();\n                        manipulator = new ModelGraftManipulator(modelGraft, channel.port1);\n                        this[$threePort].postMessage({\n                            type: ThreeDOMMessageType.MODEL_CHANGE,\n                            model: modelGraft.model.toJSON(),\n                            port: channel.port2\n                        }, [channel.port2]);\n                    }\n                    else {\n                        this[$threePort].postMessage({\n                            type: ThreeDOMMessageType.MODEL_CHANGE,\n                            model: null,\n                            port: null\n                        });\n                    }\n                }\n            }\n            this[$modelGraft$1] = modelGraft;\n            this[$manipulator] = manipulator;\n            this[$currentGLTF$1] = currentGLTF;\n        }\n        /** @export */\n        async exportScene(options) {\n            const { model } = this[$scene];\n            return new Promise(async (resolve, reject) => {\n                if (model == null) {\n                    return reject('Model missing or not yet loaded');\n                }\n                // Defaults\n                const opts = {\n                    binary: true,\n                    onlyVisible: true,\n                    maxTextureSize: Infinity,\n                    forcePowerOfTwoTextures: false,\n                    includeCustomExtensions: false,\n                    embedImages: true\n                };\n                Object.assign(opts, options);\n                // Not configurable\n                opts.animations = model.animations;\n                opts.truncateDrawRange = true;\n                const shadow = model[$shadow];\n                let visible = false;\n                // Remove shadow from export\n                if (shadow != null) {\n                    visible = shadow.visible;\n                    shadow.visible = false;\n                }\n                const exporter = new GLTFExporter();\n                exporter.parse(model.modelContainer, (gltf) => {\n                    return resolve(new Blob([opts.binary ? gltf : JSON.stringify(gltf)], {\n                        type: opts.binary ? 'application/octet-stream' :\n                            'application/json'\n                    }));\n                }, opts);\n                if (shadow != null) {\n                    shadow.visible = visible;\n                }\n            });\n        }\n    }\n    _f = $onModelChange, _g = $onModelGraftMutation;\n    __decorate$6([\n        property({ type: Object })\n    ], SceneGraphModelViewerElement.prototype, _h, void 0);\n    return SceneGraphModelViewerElement;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nvar __decorate$7 = (undefined && undefined.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof undefined === \"function\") r = undefined(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n// How much the model will rotate per\n// second in radians:\nconst DEFAULT_ROTATION_SPEED = Math.PI / 32;\nconst AUTO_ROTATE_DELAY_DEFAULT = 3000;\nconst rotationRateIntrinsics = {\n    basis: [degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED, 'rad'))],\n    keywords: { auto: [null] }\n};\nconst $autoRotateStartTime = Symbol('autoRotateStartTime');\nconst $radiansPerSecond = Symbol('radiansPerSecond');\nconst $syncRotationRate = Symbol('syncRotationRate');\nconst $cameraChangeHandler = Symbol('cameraChangeHandler');\nconst $onCameraChange = Symbol('onCameraChange');\nconst StagingMixin = (ModelViewerElement) => {\n    var _a, _b, _c;\n    class StagingModelViewerElement extends ModelViewerElement {\n        constructor() {\n            super(...arguments);\n            this.autoRotate = false;\n            this.autoRotateDelay = AUTO_ROTATE_DELAY_DEFAULT;\n            this.rotationPerSecond = 'auto';\n            this[_a] = performance.now();\n            this[_b] = 0;\n            this[_c] = (event) => this[$onCameraChange](event);\n        }\n        connectedCallback() {\n            super.connectedCallback();\n            this.addEventListener('camera-change', this[$cameraChangeHandler]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback();\n            this.removeEventListener('camera-change', this[$cameraChangeHandler]);\n            this[$autoRotateStartTime] = performance.now();\n        }\n        updated(changedProperties) {\n            super.updated(changedProperties);\n            if (changedProperties.has('autoRotate')) {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        [(_a = $autoRotateStartTime, _b = $radiansPerSecond, _c = $cameraChangeHandler, $syncRotationRate)](style) {\n            this[$radiansPerSecond] = style[0];\n        }\n        [$tick$1](time, delta) {\n            super[$tick$1](time, delta);\n            if (!this.autoRotate || !this[$hasTransitioned]() ||\n                this[$renderer].isPresenting) {\n                return;\n            }\n            const rotationDelta = Math.min(delta, time - this[$autoRotateStartTime] - this.autoRotateDelay);\n            if (rotationDelta > 0) {\n                this[$scene].yaw = this.turntableRotation +\n                    this[$radiansPerSecond] * rotationDelta * 0.001;\n            }\n        }\n        [$onCameraChange](event) {\n            if (!this.autoRotate) {\n                return;\n            }\n            if (event.detail.source === 'user-interaction') {\n                this[$autoRotateStartTime] = performance.now();\n            }\n        }\n        get turntableRotation() {\n            return this[$scene].yaw;\n        }\n        resetTurntableRotation(theta = 0) {\n            this[$scene].yaw = theta;\n        }\n    }\n    __decorate$7([\n        property({ type: Boolean, attribute: 'auto-rotate' })\n    ], StagingModelViewerElement.prototype, \"autoRotate\", void 0);\n    __decorate$7([\n        property({ type: Number, attribute: 'auto-rotate-delay' })\n    ], StagingModelViewerElement.prototype, \"autoRotateDelay\", void 0);\n    __decorate$7([\n        style({ intrinsics: rotationRateIntrinsics, updateHandler: $syncRotationRate }),\n        property({ type: String, attribute: 'rotation-per-second' })\n    ], StagingModelViewerElement.prototype, \"rotationPerSecond\", void 0);\n    return StagingModelViewerElement;\n};\n\n/**\n * This mixin function is designed to be applied to a class that inherits\n * from HTMLElement. It makes it easy for a custom element to coordinate with\n * the :focus-visible polyfill.\n *\n * NOTE(cdata): The code here was adapted from an example proposed with the\n * introduction of ShadowDOM support in the :focus-visible polyfill.\n *\n * @see https://github.com/WICG/focus-visible/pull/196\n * @param {Function} SuperClass The base class implementation to decorate with\n * implementation that coordinates with the :focus-visible polyfill\n */\nconst FocusVisiblePolyfillMixin = (SuperClass) => {\n    var _a;\n    const coordinateWithPolyfill = (instance) => {\n        // If there is no shadow root, there is no need to coordinate with\n        // the polyfill. If we already coordinated with the polyfill, we can\n        // skip subsequent invokcations:\n        if (instance.shadowRoot == null ||\n            instance.hasAttribute('data-js-focus-visible')) {\n            return () => { };\n        }\n        // The polyfill might already be loaded. If so, we can apply it to\n        // the shadow root immediately:\n        if (self.applyFocusVisiblePolyfill) {\n            self.applyFocusVisiblePolyfill(instance.shadowRoot);\n        }\n        else {\n            const coordinationHandler = () => {\n                self.applyFocusVisiblePolyfill(instance.shadowRoot);\n            };\n            // Otherwise, wait for the polyfill to be loaded lazily. It might\n            // never be loaded, but if it is then we can apply it to the\n            // shadow root at the appropriate time by waiting for the ready\n            // event:\n            self.addEventListener('focus-visible-polyfill-ready', coordinationHandler, { once: true });\n            return () => {\n                self.removeEventListener('focus-visible-polyfill-ready', coordinationHandler);\n            };\n        }\n        return () => { };\n    };\n    const $endPolyfillCoordination = Symbol('endPolyfillCoordination');\n    // IE11 doesn't natively support custom elements or JavaScript class\n    // syntax The mixin implementation assumes that the user will take the\n    // appropriate steps to support both:\n    class FocusVisibleCoordinator extends SuperClass {\n        constructor() {\n            super(...arguments);\n            this[_a] = null;\n        }\n        // Attempt to coordinate with the polyfill when connected to the\n        // document:\n        connectedCallback() {\n            super.connectedCallback && super.connectedCallback();\n            if (this[$endPolyfillCoordination] == null) {\n                this[$endPolyfillCoordination] = coordinateWithPolyfill(this);\n            }\n        }\n        disconnectedCallback() {\n            super.disconnectedCallback && super.disconnectedCallback();\n            // It's important to remove the polyfill event listener when we\n            // disconnect, otherwise we will leak the whole element via window:\n            if (this[$endPolyfillCoordination] != null) {\n                this[$endPolyfillCoordination]();\n                this[$endPolyfillCoordination] = null;\n            }\n        }\n    }\n    _a = $endPolyfillCoordination;\n    return FocusVisibleCoordinator;\n};\n\n/* @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the 'License');\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an 'AS IS' BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// Uncomment these lines to export PMREM textures in Glitch:\n// export {default as TextureUtils} from './three-components/TextureUtils';\n// export * from 'three';\nconst ModelViewerElement = AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));\ncustomElements.define('model-viewer', ModelViewerElement);\n\nexport { ModelViewerElement };\n//# sourceMappingURL=model-viewer.js.map\n"],"sourceRoot":""}